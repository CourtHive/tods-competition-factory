"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[8842],{3805:(e,n,t)=>{t.d(n,{xA:()=>p,yg:()=>g});var a=t(758);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var s=a.createContext({}),c=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},p=function(e){var n=c(e.components);return a.createElement(s.Provider,{value:n},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=c(t),m=o,g=u["".concat(s,".").concat(m)]||u[m]||d[m]||i;return t?a.createElement(g,r(r({ref:n},p),{},{components:t})):a.createElement(g,r({ref:n},p))}));function g(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var i=t.length,r=new Array(i);r[0]=m;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l[u]="string"==typeof e?e:o,r[1]=l;for(var c=2;c<i;c++)r[c]=t[c];return a.createElement.apply(null,r)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},5749:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>r,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var a=t(2232),o=(t(758),t(3805));const i={title:"Scoring Policy"},r=void 0,l={unversionedId:"policies/scoringPolicy",id:"policies/scoringPolicy",title:"Scoring Policy",description:"The Scoring Policy (POLICYTYPESCORING) controls scoring requirements, format restrictions, deletion permissions, and change propagation behaviors. This policy ensures data integrity and enforces tournament-specific scoring rules.",source:"@site/docs/policies/scoringPolicy.md",sourceDirName:"policies",slug:"/policies/scoringPolicy",permalink:"/tods-competition-factory/docs/policies/scoringPolicy",draft:!1,tags:[],version:"current",frontMatter:{title:"Scoring Policy"},sidebar:"docs",previous:{title:"Scheduling Policy",permalink:"/tods-competition-factory/docs/policies/scheduling"},next:{title:"Draws Policy",permalink:"/tods-competition-factory/docs/policies/draws"}},s={},c=[{value:"Policy Structure",id:"policy-structure",level:2},{value:"Default Scoring Policy",id:"default-scoring-policy",level:2},{value:"Basic Examples",id:"basic-examples",level:2},{value:"Default Matchup Format",id:"default-matchup-format",level:3},{value:"Require Participants for Scoring",id:"require-participants-for-scoring",level:3},{value:"Allow Early Scoring (Consolation)",id:"allow-early-scoring-consolation",level:3},{value:"Deletion Protection",id:"deletion-protection",level:2},{value:"Prevent Draw Deletion with Scores",id:"prevent-draw-deletion-with-scores",level:3},{value:"Allow Deletion (Testing/Development)",id:"allow-deletion-testingdevelopment",level:3},{value:"Format Restrictions",id:"format-restrictions",level:2},{value:"Limit Available Formats (USTA Example)",id:"limit-available-formats-usta-example",level:3},{value:"Category-Specific Formats",id:"category-specific-formats",level:3},{value:"Stage-Specific Requirements",id:"stage-specific-requirements",level:2},{value:"Main Draw vs. Consolation",id:"main-draw-vs-consolation",level:3},{value:"MatchUp Status Codes",id:"matchup-status-codes",level:2},{value:"USTA Status Codes (Comprehensive)",id:"usta-status-codes-comprehensive",level:3},{value:"Change Propagation",id:"change-propagation",level:2},{value:"Automatic Propagation (Use Cautiously)",id:"automatic-propagation-use-cautiously",level:3},{value:"Real-World Examples",id:"real-world-examples",level:2},{value:"USTA Tournament",id:"usta-tournament",level:3},{value:"ITF Junior Event",id:"itf-junior-event",level:3},{value:"Club Tournament (Flexible)",id:"club-tournament-flexible",level:3},{value:"Process Codes",id:"process-codes",level:2},{value:"Incomplete Assignments on Default",id:"incomplete-assignments-on-default",level:3},{value:"Notes",id:"notes",level:2},{value:"Related Methods",id:"related-methods",level:2},{value:"Federation Policies",id:"federation-policies",level:2}],p={toc:c},u="wrapper";function d({components:e,...n}){return(0,o.yg)(u,(0,a.A)({},p,n,{components:e,mdxType:"MDXLayout"}),(0,o.yg)("p",null,"The ",(0,o.yg)("strong",{parentName:"p"},"Scoring Policy")," (",(0,o.yg)("inlineCode",{parentName:"p"},"POLICY_TYPE_SCORING"),") controls scoring requirements, format restrictions, deletion permissions, and change propagation behaviors. This policy ensures data integrity and enforces tournament-specific scoring rules."),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Policy Type:")," ",(0,o.yg)("inlineCode",{parentName:"p"},"scoring")),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"When to Use:")),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},"Enforcing participant presence requirements for scoring"),(0,o.yg)("li",{parentName:"ul"},"Controlling when draws/structures can be deleted"),(0,o.yg)("li",{parentName:"ul"},"Restricting available matchUp formats"),(0,o.yg)("li",{parentName:"ul"},"Requiring all positions assigned before scoring"),(0,o.yg)("li",{parentName:"ul"},"Defining matchUpStatus code interpretations"),(0,o.yg)("li",{parentName:"ul"},"Managing score change propagation"),(0,o.yg)("li",{parentName:"ul"},"Setting default matchUp formats")),(0,o.yg)("hr",null),(0,o.yg)("h2",{id:"policy-structure"},"Policy Structure"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-ts"},"{\n  scoring: {\n    policyName?: string;                               // Optional policy identifier\n    \n    // Default format for all matchUps\n    defaultMatchUpFormat?: string;                     // e.g., 'SET3-S:6/TB7'\n    \n    // Deletion permissions when scores exist\n    allowDeletionWithScoresPresent?: {\n      drawDefinitions: boolean;                        // Allow draw deletion (default: false)\n      structures: boolean;                             // Allow structure deletion (default: false)\n    };\n    \n    // Scoring requirements\n    requireParticipantsForScoring?: boolean;           // Both participants must be present (default: false)\n    requireAllPositionsAssigned?: boolean | undefined; // All positions assigned before scoring (default: undefined = true)\n    \n    // Change propagation\n    allowChangePropagation?: boolean;                  // Propagate winningSide changes downstream (default: false)\n    \n    // Stage-specific requirements\n    stage?: {\n      [stageName: string]: {\n        stageSequence?: {\n          [sequence: number]: {\n            requireAllPositionsAssigned?: boolean;     // Override for specific stage/sequence\n          };\n        };\n      };\n    };\n    \n    // Available matchUp formats\n    matchUpFormats?: Array<{\n      matchUpFormat: string;                           // Format code\n      description?: string;                            // Human-readable description\n      categoryNames?: string[];                        // Applicable categories\n      categoryTypes?: string[];                        // Applicable category types\n    }>;\n    \n    // Status code refinements\n    matchUpStatusCodes?: {\n      [status: string]: Array<{\n        matchUpStatusCode: string;                     // Code identifier\n        matchUpStatusCodeDisplay: string;              // Display text\n        label: string;                                 // User-facing label\n        description?: string;                          // Detailed explanation\n      }>;\n    };\n    \n    // Process codes for specific scenarios\n    processCodes?: {\n      incompleteAssignmentsOnDefault?: string[];       // Codes applied on default (e.g., ['RANKING.IGNORE'])\n    };\n  }\n}\n")),(0,o.yg)("hr",null),(0,o.yg)("h2",{id:"default-scoring-policy"},"Default Scoring Policy"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},"import { POLICY_SCORING_DEFAULT } from 'tods-competition-factory';\n\n// Defaults:\n// {\n//   scoring: {\n//     defaultMatchUpFormat: 'SET3-S:6/TB7',          // Standard format\n//     allowDeletionWithScoresPresent: {\n//       drawDefinitions: false,                       // Cannot delete draws with scores\n//       structures: false                             // Cannot delete structures with scores\n//     },\n//     requireParticipantsForScoring: false,           // Participants not required\n//     requireAllPositionsAssigned: undefined,         // Defaults to true for MAIN stage\n//     allowChangePropagation: false,                  // No automatic propagation\n//     stage: {\n//       MAIN: {\n//         stageSequence: {\n//           1: { requireAllPositionsAssigned: true }  // Main draw must be complete\n//         }\n//       }\n//     },\n//     matchUpFormats: [],                             // No format restrictions\n//     matchUpStatusCodes: {                           // Empty status codes\n//       ABANDONED: [],\n//       CANCELLED: [],\n//       DEFAULTED: [],\n//       INCOMPLETE: [],\n//       RETIRED: [],\n//       WALKOVER: []\n//     },\n//     processCodes: {\n//       incompleteAssignmentsOnDefault: ['RANKING.IGNORE']\n//     }\n//   }\n// }\n")),(0,o.yg)("hr",null),(0,o.yg)("h2",{id:"basic-examples"},"Basic Examples"),(0,o.yg)("h3",{id:"default-matchup-format"},"Default Matchup Format"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},"import { POLICY_TYPE_SCORING } from 'tods-competition-factory';\n\n// Set tournament-wide default format\nconst defaultFormatPolicy = {\n  [POLICY_TYPE_SCORING]: {\n    policyName: 'Standard Scoring',\n    defaultMatchUpFormat: 'SET3-S:6/TB7'  // All matchUps use this by default\n  }\n};\n\ntournamentEngine.attachPolicies({\n  policyDefinitions: defaultFormatPolicy\n});\n\n// Override for specific event (e.g., short format for juniors)\nconst shortFormatPolicy = {\n  [POLICY_TYPE_SCORING]: {\n    policyName: 'Junior Scoring',\n    defaultMatchUpFormat: 'SET3-S:4/TB7'  // Short sets\n  }\n};\n\ntournamentEngine.attachPolicies({\n  policyDefinitions: shortFormatPolicy,\n  eventId: 'junior-event-id'\n});\n")),(0,o.yg)("h3",{id:"require-participants-for-scoring"},"Require Participants for Scoring"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},"// Both participants must be present before scoring\nconst participantRequirementPolicy = {\n  [POLICY_TYPE_SCORING]: {\n    policyName: 'Participant Required',\n    requireParticipantsForScoring: true   // Cannot score without both participants\n  }\n};\n\ntournamentEngine.attachPolicies({\n  policyDefinitions: participantRequirementPolicy\n});\n\n// Attempting to score without participants will fail\nconst result = tournamentEngine.setMatchUpStatus({\n  matchUpId: 'match-1',\n  outcome: { winningSide: 1 }\n});\n\nif (result.error === 'MISSING_PARTICIPANTS') {\n  console.error('Both participants must be assigned before scoring');\n}\n")),(0,o.yg)("h3",{id:"allow-early-scoring-consolation"},"Allow Early Scoring (Consolation)"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},"// Allow scoring in consolation before all positions filled\nconst flexibleScoringPolicy = {\n  [POLICY_TYPE_SCORING]: {\n    policyName: 'Flexible Consolation Scoring',\n    requireAllPositionsAssigned: false    // Can score as positions fill\n  }\n};\n\ntournamentEngine.attachPolicies({\n  policyDefinitions: flexibleScoringPolicy,\n  eventId: 'event-id'\n});\n\n// Main draw still requires all positions (via stage-specific rule)\n// Consolation/playoff draws can score immediately\n")),(0,o.yg)("hr",null),(0,o.yg)("h2",{id:"deletion-protection"},"Deletion Protection"),(0,o.yg)("h3",{id:"prevent-draw-deletion-with-scores"},"Prevent Draw Deletion with Scores"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},"const deletionProtectionPolicy = {\n  [POLICY_TYPE_SCORING]: {\n    policyName: 'Deletion Protection',\n    allowDeletionWithScoresPresent: {\n      drawDefinitions: false,   // Cannot delete draws with any scores\n      structures: false         // Cannot delete structures with any scores\n    }\n  }\n};\n\ntournamentEngine.attachPolicies({\n  policyDefinitions: deletionProtectionPolicy\n});\n\n// Attempt to delete draw with scores\nconst result = tournamentEngine.deleteDrawDefinitions({\n  eventId: 'event-1',\n  drawIds: ['draw-1']\n});\n\nif (result.error === 'SCORES_PRESENT') {\n  console.error('Cannot delete draw - scores have been entered');\n}\n\n// Force deletion (override policy)\nconst forceResult = tournamentEngine.deleteDrawDefinitions({\n  eventId: 'event-1',\n  drawIds: ['draw-1'],\n  force: true  // Bypasses policy check\n});\n")),(0,o.yg)("h3",{id:"allow-deletion-testingdevelopment"},"Allow Deletion (Testing/Development)"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},"// Allow deletion even with scores (for development/testing)\nconst flexibleDeletionPolicy = {\n  [POLICY_TYPE_SCORING]: {\n    policyName: 'Flexible Deletion',\n    allowDeletionWithScoresPresent: {\n      drawDefinitions: true,    // Can delete draws with scores\n      structures: true          // Can delete structures with scores\n    }\n  }\n};\n\n// Use cautiously - can lead to data loss!\n")),(0,o.yg)("hr",null),(0,o.yg)("h2",{id:"format-restrictions"},"Format Restrictions"),(0,o.yg)("h3",{id:"limit-available-formats-usta-example"},"Limit Available Formats (USTA Example)"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},"import { POLICY_SCORING_USTA } from 'tods-competition-factory';\n\n// USTA policy includes approved formats only\nconst ustaPolicy = {\n  [POLICY_TYPE_SCORING]: {\n    policyName: 'USTA Scoring',\n    defaultMatchUpFormat: 'SET3-S:6/TB7',\n    matchUpFormats: [\n      {\n        matchUpFormat: 'SET3-S:6/TB7',\n        description: 'Best of 3 tiebreak sets'\n      },\n      {\n        matchUpFormat: 'SET3-S:6/TB7-F:TB10',\n        description: 'Two tiebreak sets, 10-point match tiebreak at one set all'\n      },\n      {\n        matchUpFormat: 'SET1-S:6/TB7',\n        description: 'One standard tiebreak set'\n      },\n      {\n        matchUpFormat: 'SET3-S:4/TB7',\n        description: 'Best of 3 sets to 4'\n      },\n      {\n        matchUpFormat: 'SET1-S:4/TB5@3',\n        description: 'One short set to 4, 5-point tiebreak at 3'\n      },\n      {\n        matchUpFormat: 'SET1-S:8/TB7',\n        description: '8 game pro-set'\n      },\n      {\n        matchUpFormat: 'SET1-S:TB10',\n        description: 'One 10-point tiebreak game'\n      },\n      {\n        matchUpFormat: 'SET1-S:T20',\n        description: 'Timed 20 minute game'\n      }\n      // ... 19 total approved formats\n    ]\n  }\n};\n\ntournamentEngine.attachPolicies({\n  policyDefinitions: ustaPolicy\n});\n\n// UI can retrieve allowed formats\nconst { policy } = tournamentEngine.findPolicy({\n  policyType: POLICY_TYPE_SCORING\n});\n\nconsole.log(policy.matchUpFormats);\n// Display in format selector dropdown\n")),(0,o.yg)("h3",{id:"category-specific-formats"},"Category-Specific Formats"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},"const categoryFormatsPolicy = {\n  [POLICY_TYPE_SCORING]: {\n    matchUpFormats: [\n      {\n        matchUpFormat: 'SET3-S:6/TB7',\n        description: 'Standard format',\n        categoryTypes: ['ADULT'],\n        categoryNames: []\n      },\n      {\n        matchUpFormat: 'SET3-S:4/TB7',\n        description: 'Short sets',\n        categoryTypes: ['JUNIOR'],\n        categoryNames: ['U10', 'U12', 'U14']\n      },\n      {\n        matchUpFormat: 'SET1-S:TB10',\n        description: 'Super tiebreak',\n        categoryTypes: ['JUNIOR'],\n        categoryNames: ['U8', 'U10']\n      }\n    ]\n  }\n};\n\n// Format selector shows only applicable formats per category\n")),(0,o.yg)("hr",null),(0,o.yg)("h2",{id:"stage-specific-requirements"},"Stage-Specific Requirements"),(0,o.yg)("h3",{id:"main-draw-vs-consolation"},"Main Draw vs. Consolation"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},"const stageSpecificPolicy = {\n  [POLICY_TYPE_SCORING]: {\n    policyName: 'Stage-Specific Scoring',\n    requireAllPositionsAssigned: false,  // Default: flexible\n    stage: {\n      MAIN: {\n        stageSequence: {\n          1: {\n            requireAllPositionsAssigned: true  // Main draw: all positions required\n          }\n        }\n      }\n      // CONSOLATION, PLAY_OFF stages use default (false)\n    }\n  }\n};\n\n// Main draw: Cannot score until draw is complete\n// Consolation: Can score as positions are filled\n// Compass/Playoff: Can score as positions are filled\n")),(0,o.yg)("hr",null),(0,o.yg)("h2",{id:"matchup-status-codes"},"MatchUp Status Codes"),(0,o.yg)("h3",{id:"usta-status-codes-comprehensive"},"USTA Status Codes (Comprehensive)"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},"import { POLICY_SCORING_USTA } from 'tods-competition-factory';\n\n// USTA policy includes detailed status codes:\nconst ustaStatusCodes = {\n  [POLICY_TYPE_SCORING]: {\n    matchUpStatusCodes: {\n      WALKOVER: [\n        {\n          matchUpStatusCode: 'W1',\n          matchUpStatusCodeDisplay: 'Wo [inj]',\n          label: 'Injury'\n        },\n        {\n          matchUpStatusCode: 'W2',\n          matchUpStatusCodeDisplay: 'Wo [ill]',\n          label: 'Illness'\n        },\n        {\n          matchUpStatusCode: 'W3',\n          matchUpStatusCodeDisplay: 'Wo [pc]',\n          label: 'Personal circumstance'\n        },\n        {\n          matchUpStatusCode: 'W4',\n          matchUpStatusCodeDisplay: 'Wo [Tae]',\n          label: 'Tournament Administrative Error'\n        },\n        {\n          matchUpStatusCode: 'WOWO',\n          matchUpStatusCodeDisplay: 'Wo/Wo',\n          label: 'Double walkover'\n        }\n      ],\n      RETIRED: [\n        {\n          matchUpStatusCode: 'RJ',\n          matchUpStatusCodeDisplay: 'Ret [inj]',\n          label: 'Injury'\n        },\n        {\n          matchUpStatusCode: 'RI',\n          matchUpStatusCodeDisplay: 'Ret [ill]',\n          label: 'Illness'\n        },\n        {\n          matchUpStatusCode: 'RC',\n          matchUpStatusCodeDisplay: 'Ret [pc]',\n          label: 'Personal circumstance'\n        },\n        {\n          matchUpStatusCode: 'RU',\n          matchUpStatusCodeDisplay: 'Ret [elg]',\n          label: 'Ret. (eligible)',\n          description: 'Player remains eligible for consolations, playoffs, doubles'\n        }\n      ],\n      DEFAULTED: [\n        {\n          matchUpStatusCode: 'DQ',\n          matchUpStatusCodeDisplay: 'Def [dq]',\n          label: 'Disqualification (ineligibility)',\n          description: 'Disqualification for cause or ineligibility'\n        },\n        {\n          matchUpStatusCode: 'DM',\n          matchUpStatusCodeDisplay: 'Def [cond]',\n          label: 'Misconduct',\n          description: 'Misconduct before or between matches'\n        },\n        {\n          matchUpStatusCode: 'D4',\n          matchUpStatusCodeDisplay: 'Def [refsl]',\n          label: 'Refusal to start match'\n        },\n        {\n          matchUpStatusCode: 'D6',\n          matchUpStatusCodeDisplay: 'Def [ns]',\n          label: 'Not showing up'\n        },\n        {\n          matchUpStatusCode: 'D7',\n          matchUpStatusCodeDisplay: 'Score + Def [late]',\n          label: 'Lateness for match'\n        },\n        {\n          matchUpStatusCode: 'DD',\n          matchUpStatusCodeDisplay: 'Def/Def',\n          label: 'Double default'\n        },\n        {\n          matchUpStatusCode: 'DP',\n          matchUpStatusCodeDisplay: 'Def [pps]',\n          label: 'Default (Point Penalty System)'\n        }\n      ],\n      ABANDONED: [\n        {\n          matchUpStatusCode: 'OA',\n          matchUpStatusCodeDisplay: 'Abandoned',\n          label: 'Abandoned match'\n        }\n      ],\n      CANCELLED: [\n        {\n          matchUpStatusCode: 'OC',\n          matchUpStatusCodeDisplay: 'Unplayed or Cancelled',\n          label: 'Cancelled match'\n        }\n      ],\n      INCOMPLETE: [\n        {\n          matchUpStatusCode: 'OI',\n          matchUpStatusCodeDisplay: 'Incomplete',\n          label: 'Incomplete match'\n        }\n      ]\n    }\n  }\n};\n\n// UI displays status code selector\ntournamentEngine.attachPolicies({\n  policyDefinitions: POLICY_SCORING_USTA\n});\n\nconst { policy } = tournamentEngine.findPolicy({\n  policyType: POLICY_TYPE_SCORING\n});\n\n// Build dropdown for walkover reasons\npolicy.matchUpStatusCodes.WALKOVER.forEach(code => {\n  console.log(`${code.matchUpStatusCode}: ${code.label}`);\n});\n// W1: Injury\n// W2: Illness\n// W3: Personal circumstance\n// etc.\n")),(0,o.yg)("hr",null),(0,o.yg)("h2",{id:"change-propagation"},"Change Propagation"),(0,o.yg)("h3",{id:"automatic-propagation-use-cautiously"},"Automatic Propagation (Use Cautiously)"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},"const propagationPolicy = {\n  [POLICY_TYPE_SCORING]: {\n    policyName: 'Auto Propagation',\n    allowChangePropagation: true  // Changes propagate downstream\n  }\n};\n\n// Scenario:\n// 1. Score match: Player A wins\n// 2. Player A placed in next round\n// 3. Change winningSide to Player B\n// 4. With propagation: Player B automatically moved to next round\n// 5. Without propagation: Manual repositioning required\n\n// WARNING: Can cause unexpected changes in large structures\n// Recommended: Keep false for manual control\n")),(0,o.yg)("hr",null),(0,o.yg)("h2",{id:"real-world-examples"},"Real-World Examples"),(0,o.yg)("h3",{id:"usta-tournament"},"USTA Tournament"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},"import { POLICY_SCORING_USTA } from 'tods-competition-factory';\n\n// Use complete USTA policy\ntournamentEngine.attachPolicies({\n  policyDefinitions: POLICY_SCORING_USTA\n});\n\n// Includes:\n// - 19 approved matchUp formats\n// - Comprehensive status codes (W1-W5, RJ-RU, DQ-DP, etc.)\n// - Flexible consolation scoring\n// - Standard format default\n// - Main draw position requirement\n")),(0,o.yg)("h3",{id:"itf-junior-event"},"ITF Junior Event"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},"const itfJuniorPolicy = {\n  [POLICY_TYPE_SCORING]: {\n    policyName: 'ITF Junior Scoring',\n    defaultMatchUpFormat: 'SET3-S:6/TB7',\n    requireAllPositionsAssigned: false,\n    stage: {\n      MAIN: {\n        stageSequence: {\n          1: { requireAllPositionsAssigned: true }\n        }\n      }\n    },\n    matchUpFormats: [\n      {\n        matchUpFormat: 'SET3-S:6/TB7',\n        description: 'Best of 3 sets'\n      },\n      {\n        matchUpFormat: 'SET3-S:6/TB7-F:TB10',\n        description: 'Match tiebreak final set'\n      },\n      {\n        matchUpFormat: 'SET1-S:6/TB7',\n        description: 'One set (qualifying)'\n      }\n    ],\n    allowDeletionWithScoresPresent: {\n      drawDefinitions: false,\n      structures: false\n    }\n  }\n};\n")),(0,o.yg)("h3",{id:"club-tournament-flexible"},"Club Tournament (Flexible)"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},"const clubPolicy = {\n  [POLICY_TYPE_SCORING]: {\n    policyName: 'Club Scoring',\n    defaultMatchUpFormat: 'SET1-S:8/TB7',  // Pro set default\n    requireParticipantsForScoring: false,\n    requireAllPositionsAssigned: false,     // Very flexible\n    allowDeletionWithScoresPresent: {\n      drawDefinitions: true,                // Allow corrections\n      structures: true\n    },\n    matchUpFormats: [\n      { matchUpFormat: 'SET1-S:8/TB7', description: '8-game pro set' },\n      { matchUpFormat: 'SET1-S:6/TB7', description: 'One set' },\n      { matchUpFormat: 'SET1-S:TB10', description: 'Super tiebreak' },\n      { matchUpFormat: 'SET3-S:6/TB7', description: 'Best of 3' }\n    ]\n  }\n};\n")),(0,o.yg)("hr",null),(0,o.yg)("h2",{id:"process-codes"},"Process Codes"),(0,o.yg)("h3",{id:"incomplete-assignments-on-default"},"Incomplete Assignments on Default"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},"const processCodePolicy = {\n  [POLICY_TYPE_SCORING]: {\n    processCodes: {\n      incompleteAssignmentsOnDefault: ['RANKING.IGNORE']\n    }\n  }\n};\n\n// When a player defaults before completing all assignments:\n// - Apply RANKING.IGNORE code\n// - Affects ranking point calculation\n// - Used by federations for ranking integrity\n")),(0,o.yg)("hr",null),(0,o.yg)("h2",{id:"notes"},"Notes"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"requireAllPositionsAssigned"),": ",(0,o.yg)("inlineCode",{parentName:"li"},"undefined")," defaults to ",(0,o.yg)("inlineCode",{parentName:"li"},"true")," for MAIN stage"),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Stage-specific overrides"),": More specific than global setting"),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Format restrictions"),": Empty array = no restrictions (all formats allowed)"),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Status codes"),": Used for detailed match outcome tracking"),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Deletion protection"),": Prevents accidental data loss"),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Change propagation"),": Disabled by default for safety"),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"USTA policy"),": Most comprehensive example (19 formats, 30+ status codes)"),(0,o.yg)("li",{parentName:"ul"},"Format restrictions enforced in UI, not in engine (validation only)"),(0,o.yg)("li",{parentName:"ul"},"Status codes stored with matchUp for reporting"),(0,o.yg)("li",{parentName:"ul"},"Process codes affect ranking calculations"),(0,o.yg)("li",{parentName:"ul"},"Tournament-level policy applies unless overridden by event"),(0,o.yg)("li",{parentName:"ul"},"Draw-level policy overrides event policy")),(0,o.yg)("hr",null),(0,o.yg)("h2",{id:"related-methods"},"Related Methods"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"findPolicy({ policyType: POLICY_TYPE_SCORING })")," - Retrieve active policy"),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"setMatchUpStatus")," - Respects requireParticipantsForScoring"),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"deleteDrawDefinitions")," - Respects allowDeletionWithScoresPresent"),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"removeStructure")," - Respects allowDeletionWithScoresPresent")),(0,o.yg)("hr",null),(0,o.yg)("h2",{id:"federation-policies"},"Federation Policies"),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Available Presets:")),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"POLICY_SCORING_DEFAULT")," - Basic policy"),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"POLICY_SCORING_USTA")," - Complete USTA policy with 19 formats and comprehensive status codes")),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Custom Federations:"),"\nCreate federation-specific policies following USTA pattern:"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},"Define approved formats"),(0,o.yg)("li",{parentName:"ul"},"Define status codes"),(0,o.yg)("li",{parentName:"ul"},"Set stage requirements"),(0,o.yg)("li",{parentName:"ul"},"Configure deletion rules")))}d.isMDXComponent=!0}}]);