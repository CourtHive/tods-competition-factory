"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[2670],{3805:(e,a,t)=>{t.d(a,{xA:()=>m,yg:()=>y});var n=t(758);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function l(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?l(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function s(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var o=n.createContext({}),p=function(e){var a=n.useContext(o),t=a;return e&&(t="function"==typeof e?e(a):i(i({},a),e)),t},m=function(e){var a=p(e.components);return n.createElement(o.Provider,{value:a},e.children)},g="mdxType",u={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},c=n.forwardRef((function(e,a){var t=e.components,r=e.mdxType,l=e.originalType,o=e.parentName,m=s(e,["components","mdxType","originalType","parentName"]),g=p(t),c=r,y=g["".concat(o,".").concat(c)]||g[c]||u[c]||l;return t?n.createElement(y,i(i({ref:a},m),{},{components:t})):n.createElement(y,i({ref:a},m))}));function y(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var l=t.length,i=new Array(l);i[0]=c;var s={};for(var o in a)hasOwnProperty.call(a,o)&&(s[o]=a[o]);s.originalType=e,s[g]="string"==typeof e?e:r,i[1]=s;for(var p=2;p<l;p++)i[p]=t[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,t)}c.displayName="MDXCreateElement"},6602:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>o,contentTitle:()=>i,default:()=>u,frontMatter:()=>l,metadata:()=>s,toc:()=>p});var n=t(2232),r=(t(758),t(3805));const l={},i="maxParticipants Attribute - Threshold-Based Tiebreaking",s={unversionedId:"policies/maxParticipants",id:"policies/maxParticipants",title:"maxParticipants Attribute - Threshold-Based Tiebreaking",description:"The maxParticipants attribute in round robin tally directives implements a universal pattern found across sports: different tie-breaking rules apply based on how many teams are tied.",source:"@site/docs/policies/maxParticipants.md",sourceDirName:"policies",slug:"/policies/maxParticipants",permalink:"/tods-competition-factory/docs/policies/maxParticipants",draft:!1,tags:[],version:"current",frontMatter:{}},o={},p=[{value:"Overview",id:"overview",level:2},{value:"Why This Exists",id:"why-this-exists",level:2},{value:"Mathematical Reality: Circular Ties",id:"mathematical-reality-circular-ties",level:3},{value:"Sports Precedents",id:"sports-precedents",level:2},{value:"1. Edmonton U15AA Invitational Hockey Tournament",id:"1-edmonton-u15aa-invitational-hockey-tournament",level:3},{value:"2. Play K Sports Baseball",id:"2-play-k-sports-baseball",level:3},{value:"3. Ripken Baseball Tournaments",id:"3-ripken-baseball-tournaments",level:3},{value:"4. USA Pickleball Tournaments",id:"4-usa-pickleball-tournaments",level:3},{value:"5. EMFC 3v3 Soccer Challenge Cup",id:"5-emfc-3v3-soccer-challenge-cup",level:3},{value:"6. DSBN Volleyball Tournaments",id:"6-dsbn-volleyball-tournaments",level:3},{value:"7. Major Sports Organizations",id:"7-major-sports-organizations",level:3},{value:"Implementation in Policies",id:"implementation-in-policies",level:2},{value:"Example 1: Tournament of Champions (TOC) Policy",id:"example-1-tournament-of-champions-toc-policy",level:3},{value:"Example 2: Custom Hockey Tournament Policy",id:"example-2-custom-hockey-tournament-policy",level:3},{value:"Example 3: Baseball Tournament Policy",id:"example-3-baseball-tournament-policy",level:3},{value:"When to Use maxParticipants",id:"when-to-use-maxparticipants",level:2},{value:"\u2705 <strong>Use maxParticipants for:</strong>",id:"-use-maxparticipants-for",level:3},{value:"\u274c <strong>Don&#39;t use maxParticipants for:</strong>",id:"-dont-use-maxparticipants-for",level:3},{value:"Circular Tie Scenarios",id:"circular-tie-scenarios",level:2},{value:"Example 1: 3-Team Circular Tie",id:"example-1-3-team-circular-tie",level:3},{value:"Example 2: 4-Team Partial Circular Tie",id:"example-2-4-team-partial-circular-tie",level:3},{value:"Testing maxParticipants",id:"testing-maxparticipants",level:2},{value:"Test 1: Verify 2-team behavior",id:"test-1-verify-2-team-behavior",level:3},{value:"Test 2: Verify 3+-team skipping",id:"test-2-verify-3-team-skipping",level:3},{value:"Test 3: Compare outcomes",id:"test-3-compare-outcomes",level:3},{value:"Implementation Details",id:"implementation-details",level:2},{value:"Source Code",id:"source-code",level:3},{value:"Common Patterns",id:"common-patterns",level:2},{value:"Pattern 1: Two-Stage Head-to-Head",id:"pattern-1-two-stage-head-to-head",level:3},{value:"Pattern 2: Skip Head-to-Head for Large Ties",id:"pattern-2-skip-head-to-head-for-large-ties",level:3},{value:"Pattern 3: Threshold-Based Escalation",id:"pattern-3-threshold-based-escalation",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Always Provide Fallback",id:"1-always-provide-fallback",level:3},{value:"2. Document Tournament-Specific Rules",id:"2-document-tournament-specific-rules",level:3},{value:"3. Consider Circular Tie Probability",id:"3-consider-circular-tie-probability",level:3},{value:"Conclusion",id:"conclusion",level:2}],m={toc:p},g="wrapper";function u(e){let{components:a,...t}=e;return(0,r.yg)(g,(0,n.A)({},m,t,{components:a,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"maxparticipants-attribute---threshold-based-tiebreaking"},"maxParticipants Attribute - Threshold-Based Tiebreaking"),(0,r.yg)("p",null,"The ",(0,r.yg)("inlineCode",{parentName:"p"},"maxParticipants")," attribute in round robin tally directives implements a universal pattern found across sports: ",(0,r.yg)("strong",{parentName:"p"},"different tie-breaking rules apply based on how many teams are tied"),"."),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"overview"},"Overview"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Purpose:")," Apply a tally directive ONLY when the number of tied participants does not exceed a specified threshold."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Common usage:")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"{\n  attribute: 'matchUpsPct',\n  idsFilter: true,\n  maxParticipants: 2  // Only apply when exactly 2 teams are tied\n}\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Behavior:")," "),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Rule applies when: ",(0,r.yg)("inlineCode",{parentName:"li"},"tiedParticipants.length <= maxParticipants")),(0,r.yg)("li",{parentName:"ul"},"Rule is skipped when: ",(0,r.yg)("inlineCode",{parentName:"li"},"tiedParticipants.length > maxParticipants"))),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"why-this-exists"},"Why This Exists"),(0,r.yg)("h3",{id:"mathematical-reality-circular-ties"},"Mathematical Reality: Circular Ties"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"With 2 teams tied:")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"Team A beat Team B\n\u2192 Clear winner: Team A places higher\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"With 3+ teams tied (circular tie possible):")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"Team A beat Team B (1-0 head-to-head)\nTeam B beat Team C (1-0 head-to-head)\nTeam C beat Team A (1-0 head-to-head)\n\nHead-to-head records among tied teams:\n- Team A: 1 win, 1 loss (50%)\n- Team B: 1 win, 1 loss (50%)\n- Team C: 1 win, 1 loss (50%)\n\n\u2192 Head-to-head CANNOT break the tie!\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Solution:")," When 3+ teams are tied, skip head-to-head and use the next tiebreaker (games won, sets won, etc.)."),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"sports-precedents"},"Sports Precedents"),(0,r.yg)("p",null,"This pattern appears universally across sports, with explicit threshold-based rules:"),(0,r.yg)("h3",{id:"1-edmonton-u15aa-invitational-hockey-tournament"},"1. Edmonton U15AA Invitational Hockey Tournament"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Explicitly separate sections:")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},'"Two Teams Tied":')),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"Head-to-head result"),(0,r.yg)("li",{parentName:"ol"},"Most wins"),(0,r.yg)("li",{parentName:"ol"},"Goal average (goals for divided by goals against)"),(0,r.yg)("li",{parentName:"ol"},"Fewest penalty minutes"),(0,r.yg)("li",{parentName:"ol"},"Coin toss")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},'"Three or More Teams Tied":')),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"Performance among tied teams only (wins, goal average)"),(0,r.yg)("li",{parentName:"ol"},"If still tied, performance in all group games"),(0,r.yg)("li",{parentName:"ol"},"Coin toss")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Critical rule:")," ",(0,r.yg)("em",{parentName:"p"},'"At no time will teams using this formula go back to the two-team tiebreaker."')),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Source:")," ",(0,r.yg)("a",{parentName:"p",href:"https://www.printyourbrackets.com/tiebreaker-in-round-robin-tournaments.html"},"printyourbrackets.com")),(0,r.yg)("hr",null),(0,r.yg)("h3",{id:"2-play-k-sports-baseball"},"2. Play K Sports Baseball"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Explicit threshold condition:")),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},'"Head-to-head (only when two (2) teams are tied, and only when they have played each other). Once three (3) teams are tied in a pool, then we go to the next tie breakers."')),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Tiebreaker sequence:")),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"Head-to-head record (",(0,r.yg)("strong",{parentName:"li"},"only when 2 teams tied"),")"),(0,r.yg)("li",{parentName:"ol"},"Runs allowed"),(0,r.yg)("li",{parentName:"ol"},"Run differential (capped)"),(0,r.yg)("li",{parentName:"ol"},"Coin flip")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Implementation as policy:")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"{\n  tallyDirectives: [\n    { attribute: 'matchUpsPct', idsFilter: true, maxParticipants: 2 },\n    { attribute: 'pointsLost', idsFilter: false, reversed: true },\n    { attribute: 'pointsDifferential', idsFilter: false },\n  ]\n}\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Source:")," ",(0,r.yg)("a",{parentName:"p",href:"https://tarrant.apaleagues.com/Uploads/tarrant/2025_AlohaChallengeRules_TarrantCounty.pdf"},"tarrant.apaleagues.com")),(0,r.yg)("hr",null),(0,r.yg)("h3",{id:"3-ripken-baseball-tournaments"},"3. Ripken Baseball Tournaments"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Separate sections with different procedures:")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},'"2 Team Tie Breaker":')),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"Head to head"),(0,r.yg)("li",{parentName:"ol"},"Fewest runs allowed"),(0,r.yg)("li",{parentName:"ol"},"Run differential (capped at 7 per game)"),(0,r.yg)("li",{parentName:"ol"},"Coin flip")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},'"3 or more Team Tie Breaker":')),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"Head to head among all tied teams"),(0,r.yg)("li",{parentName:"ol"},"Fewest runs allowed among tied teams"),(0,r.yg)("li",{parentName:"ol"},"Run differential among tied teams (capped)"),(0,r.yg)("li",{parentName:"ol"},"If still tied, compare overall stats"),(0,r.yg)("li",{parentName:"ol"},"Coin flip")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Note:")," Head-to-head must be evaluated differently when 3+ teams (among tied teams only)."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Source:")," ",(0,r.yg)("a",{parentName:"p",href:"https://www.districtsixbridge.org/wp-content/uploads/2018/12/Round-Robin-Fact-Sheet-.pdf"},"districtsixbridge.org")),(0,r.yg)("hr",null),(0,r.yg)("h3",{id:"4-usa-pickleball-tournaments"},"4. USA Pickleball Tournaments"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Different procedures based on tie size:")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Two teams tied:")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Direct head-to-head result determines placement")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Three or more teams tied:")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Results among tied teams evaluated first"),(0,r.yg)("li",{parentName:"ul"},"Then game/point differentials among tied teams"),(0,r.yg)("li",{parentName:"ul"},"Then overall group performance")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Source:")," ",(0,r.yg)("a",{parentName:"p",href:"https://rules.usapickleball.org/view/rule-changes-view-all/entry/527/"},"rules.usapickleball.org")),(0,r.yg)("hr",null),(0,r.yg)("h3",{id:"5-emfc-3v3-soccer-challenge-cup"},"5. EMFC 3v3 Soccer Challenge Cup"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Head-to-head conditioned on tie size:")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Two teams tied:")),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"Head-to-head result"),(0,r.yg)("li",{parentName:"ol"},"Goal differential"),(0,r.yg)("li",{parentName:"ol"},"Goals scored"),(0,r.yg)("li",{parentName:"ol"},"Coin toss")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Three or more teams tied:")),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"Performance among tied teams"),(0,r.yg)("li",{parentName:"ol"},"Goal differential among tied teams"),(0,r.yg)("li",{parentName:"ol"},"Overall group statistics"),(0,r.yg)("li",{parentName:"ol"},"Coin toss")),(0,r.yg)("hr",null),(0,r.yg)("h3",{id:"6-dsbn-volleyball-tournaments"},"6. DSBN Volleyball Tournaments"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Explicit participant threshold:")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Two teams tied:")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Winner of head-to-head match places higher")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Three or more teams tied:")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Set ratio among tied teams"),(0,r.yg)("li",{parentName:"ul"},"Point ratio among tied teams"),(0,r.yg)("li",{parentName:"ul"},"Overall group performance")),(0,r.yg)("hr",null),(0,r.yg)("h3",{id:"7-major-sports-organizations"},"7. Major Sports Organizations"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"FIFA World Cup:")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"2 teams: Direct head-to-head"),(0,r.yg)("li",{parentName:"ul"},"3+ teams: Mini-table among tied teams")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"UEFA Champions League:")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"2 teams: Head-to-head points/goal difference"),(0,r.yg)("li",{parentName:"ul"},"3+ teams: Mini-league calculation")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"NFL:")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"2 teams: Head-to-head record"),(0,r.yg)("li",{parentName:"ul"},'3+ teams: "Head-to-head sweep" (only if one team beat ALL others)')),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"USTA Team Tennis:")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"2 teams: Head-to-head result"),(0,r.yg)("li",{parentName:"ul"},"3+ teams: Match/set/game percentages among tied teams")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"ITF Davis Cup:")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"2 teams: Direct tie breaker"),(0,r.yg)("li",{parentName:"ul"},"3+ teams: Results within tied subgroup")),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"implementation-in-policies"},"Implementation in Policies"),(0,r.yg)("h3",{id:"example-1-tournament-of-champions-toc-policy"},"Example 1: Tournament of Champions (TOC) Policy"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"export const POLICY_ROUND_ROBIN_TALLY_TOC = {\n  [POLICY_TYPE_ROUND_ROBIN_TALLY]: {\n    policyName: 'TOC Round Robin Tally',\n    groupOrderKey: 'matchUpsPct',\n    tallyDirectives: [\n      // Head-to-head ONLY if 2 teams tied\n      { \n        attribute: 'matchUpsPct', \n        idsFilter: true, \n        maxParticipants: 2 \n      },\n      // Games percentage (all ties)\n      { attribute: 'gamesPct', idsFilter: false },\n      // Total games won (all ties)\n      { attribute: 'gamesWon', idsFilter: false },\n      // Fewest games lost (all ties)\n      { attribute: 'gamesLost', idsFilter: false, reversed: true },\n    ],\n  },\n};\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Behavior:")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"2 teams tied:")," Uses head-to-head record"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"3+ teams tied:")," Skips head-to-head, uses games percentage immediately")),(0,r.yg)("hr",null),(0,r.yg)("h3",{id:"example-2-custom-hockey-tournament-policy"},"Example 2: Custom Hockey Tournament Policy"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"const hockeyTournamentPolicy = {\n  [POLICY_TYPE_ROUND_ROBIN_TALLY]: {\n    policyName: 'Hockey Tournament',\n    groupOrderKey: 'matchUpsWon',\n    tallyDirectives: [\n      // Two teams tied: head-to-head\n      { \n        attribute: 'matchUpsPct', \n        idsFilter: true, \n        maxParticipants: 2 \n      },\n      // Three+ teams tied: goal average among tied teams\n      { \n        attribute: 'goalAverage', // Custom attribute\n        idsFilter: true  // Among tied teams only\n      },\n      // Still tied: overall goal average\n      { \n        attribute: 'goalAverage', \n        idsFilter: false \n      },\n      // Still tied: fewest penalty minutes\n      { \n        attribute: 'penaltyMinutes', \n        idsFilter: false, \n        reversed: true \n      },\n    ],\n  },\n};\n")),(0,r.yg)("hr",null),(0,r.yg)("h3",{id:"example-3-baseball-tournament-policy"},"Example 3: Baseball Tournament Policy"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"const baseballTournamentPolicy = {\n  [POLICY_TYPE_ROUND_ROBIN_TALLY]: {\n    policyName: 'Baseball Tournament',\n    groupOrderKey: 'matchUpsWon',\n    tallyDirectives: [\n      // Two teams: direct head-to-head\n      { \n        attribute: 'matchUpsPct', \n        idsFilter: true, \n        maxParticipants: 2 \n      },\n      // Three+: fewest runs allowed among tied teams\n      { \n        attribute: 'pointsLost', \n        idsFilter: true, \n        reversed: true \n      },\n      // Run differential (capped) among tied teams\n      { \n        attribute: 'pointsDifferential', \n        idsFilter: true \n      },\n      // Overall runs allowed\n      { \n        attribute: 'pointsLost', \n        idsFilter: false, \n        reversed: true \n      },\n    ],\n  },\n};\n")),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"when-to-use-maxparticipants"},"When to Use maxParticipants"),(0,r.yg)("h3",{id:"-use-maxparticipants-for"},"\u2705 ",(0,r.yg)("strong",{parentName:"h3"},"Use maxParticipants for:")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"1. Head-to-head rules (idsFilter: true)")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"{ \n  attribute: 'matchUpsPct', \n  idsFilter: true,     // Compare only tied teams\n  maxParticipants: 2   // Only when exactly 2 tied\n}\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Why:")," Head-to-head comparison is only meaningful when one team clearly beat the other. With 3+, circular ties are possible."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"2. Direct comparison attributes")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"{ \n  attribute: 'matchUpsWon', \n  idsFilter: true, \n  maxParticipants: 2 \n}\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Why:")," Similar to head-to-head - direct comparison works best with 2 teams."),(0,r.yg)("hr",null),(0,r.yg)("h3",{id:"-dont-use-maxparticipants-for"},"\u274c ",(0,r.yg)("strong",{parentName:"h3"},"Don't use maxParticipants for:")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"1. Percentage-based rules")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"{ \n  attribute: 'gamesPct', \n  idsFilter: false \n  // No maxParticipants needed\n}\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Why:")," Percentages work equally well with 2 or 200 teams."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"2. Absolute count rules")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"{ \n  attribute: 'gamesWon', \n  idsFilter: false \n  // No maxParticipants needed\n}\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Why:")," Total games won is comparable regardless of number of tied teams."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"3. Reversed (fewest) rules")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"{ \n  attribute: 'gamesLost', \n  idsFilter: false, \n  reversed: true \n  // No maxParticipants needed\n}\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Why:")," Fewest games lost works with any number of teams."),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"circular-tie-scenarios"},"Circular Tie Scenarios"),(0,r.yg)("h3",{id:"example-1-3-team-circular-tie"},"Example 1: 3-Team Circular Tie"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Round robin results:")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"Match 1: Team A 6-2 Team B  (A wins)\nMatch 2: Team B 6-3 Team C  (B wins)\nMatch 3: Team C 6-4 Team A  (C wins)\n\nStandings:\n- Team A: 1-1 (won vs B, lost vs C)\n- Team B: 1-1 (won vs C, lost vs A)\n- Team C: 1-1 (won vs A, lost vs B)\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Without maxParticipants:")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"tallyDirectives: [\n  { attribute: 'matchUpsPct', idsFilter: true }\n]\n\n// All teams: 50% head-to-head (1-1)\n// Cannot break tie \u2192 stuck or requires additional logic\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"With maxParticipants:")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"tallyDirectives: [\n  { attribute: 'matchUpsPct', idsFilter: true, maxParticipants: 2 },\n  { attribute: 'gamesPct', idsFilter: false }\n]\n\n// 3 teams tied \u2192 skip head-to-head\n// Use games percentage:\n// - Team A: 6-2 + 4-6 = 10-8 (55.6%)\n// - Team B: 2-6 + 6-3 = 8-9 (47.1%)\n// - Team C: 3-6 + 6-4 = 9-10 (47.4%)\n// \n// Result: A (1st), C (2nd), B (3rd) \u2713\n")),(0,r.yg)("hr",null),(0,r.yg)("h3",{id:"example-2-4-team-partial-circular-tie"},"Example 2: 4-Team Partial Circular Tie"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Round robin results (6 total matches):")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"Team A: 3-0 (beat B, C, D)\nTeam B: 1-2 (beat C, lost to A and D)\nTeam C: 1-2 (beat D, lost to A and B)\nTeam D: 1-2 (beat B, lost to A and C)\n\nStandings: B, C, D all 1-2 (tied for 2nd)\n\nHead-to-head among tied teams:\n- B beat C (but lost to D)\n- C beat D (but lost to B)\n- D beat B (but lost to C)\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"With maxParticipants: 2")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"// 3 teams tied \u2192 skip head-to-head\n// Proceed to games percentage among B, C, D\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Without maxParticipants:")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"// Would try head-to-head: B, C, D all 1-1\n// Stuck in circular tie\n")),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"testing-maxparticipants"},"Testing maxParticipants"),(0,r.yg)("h3",{id:"test-1-verify-2-team-behavior"},"Test 1: Verify 2-team behavior"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"it('maxParticipants: 2 applies head-to-head when exactly 2 teams tied', () => {\n  // Create scenario where exactly 2 teams are tied\n  // Verify head-to-head determines order\n});\n")),(0,r.yg)("h3",{id:"test-2-verify-3-team-skipping"},"Test 2: Verify 3+-team skipping"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"it('maxParticipants: 2 skips head-to-head when 3+ teams tied', () => {\n  // Create circular tie scenario (A>B>C>A)\n  // Verify head-to-head is skipped\n  // Verify next directive is used\n});\n")),(0,r.yg)("h3",{id:"test-3-compare-outcomes"},"Test 3: Compare outcomes"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"it('maxParticipants changes outcomes in circular ties', () => {\n  // With maxParticipants: should break tie using games\n  // Without maxParticipants: should be stuck at head-to-head\n});\n")),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"implementation-details"},"Implementation Details"),(0,r.yg)("h3",{id:"source-code"},"Source Code"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"From ",(0,r.yg)("inlineCode",{parentName:"strong"},"getGroupOrder.ts"),":")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"// Line 286-287\nconst keepDirective = !(\n  isNumeric(directive.maxParticipants) && \n  participantIds?.length > directive.maxParticipants\n);\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Behavior:")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"keepDirective = true"),": Apply this directive"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"keepDirective = false"),": Skip this directive, try next one")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"When does it skip?")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"When ",(0,r.yg)("inlineCode",{parentName:"li"},"maxParticipants")," is defined (numeric)"),(0,r.yg)("li",{parentName:"ul"},"AND number of tied participants exceeds ",(0,r.yg)("inlineCode",{parentName:"li"},"maxParticipants"))),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"common-patterns"},"Common Patterns"),(0,r.yg)("h3",{id:"pattern-1-two-stage-head-to-head"},"Pattern 1: Two-Stage Head-to-Head"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"{\n  tallyDirectives: [\n    // Stage 1: Direct head-to-head (2 teams only)\n    { \n      attribute: 'matchUpsPct', \n      idsFilter: true, \n      maxParticipants: 2 \n    },\n    \n    // Stage 2: Head-to-head among all tied (3+ teams)\n    { \n      attribute: 'matchUpsPct', \n      idsFilter: true \n    },\n    \n    // Stage 3: Overall group performance\n    { \n      attribute: 'matchUpsPct', \n      idsFilter: false \n    },\n  ]\n}\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Used by:")," FIFA, UEFA, many tournament formats"),(0,r.yg)("hr",null),(0,r.yg)("h3",{id:"pattern-2-skip-head-to-head-for-large-ties"},"Pattern 2: Skip Head-to-Head for Large Ties"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"{\n  tallyDirectives: [\n    // Only use head-to-head if 2-3 teams\n    { \n      attribute: 'matchUpsPct', \n      idsFilter: true, \n      maxParticipants: 3 \n    },\n    \n    // 4+ teams: use games percentage\n    { \n      attribute: 'gamesPct', \n      idsFilter: false \n    },\n  ]\n}\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Rationale:")," With 4+ teams, likelihood of circular ties increases significantly."),(0,r.yg)("hr",null),(0,r.yg)("h3",{id:"pattern-3-threshold-based-escalation"},"Pattern 3: Threshold-Based Escalation"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"{\n  tallyDirectives: [\n    // 2 teams: simple head-to-head\n    { \n      attribute: 'matchUpsPct', \n      idsFilter: true, \n      maxParticipants: 2 \n    },\n    \n    // 3-4 teams: games among tied teams\n    { \n      attribute: 'gamesPct', \n      idsFilter: true, \n      maxParticipants: 4 \n    },\n    \n    // 5+ teams: overall games\n    { \n      attribute: 'gamesPct', \n      idsFilter: false \n    },\n  ]\n}\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Used by:")," Large tournaments with multiple groups"),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"best-practices"},"Best Practices"),(0,r.yg)("h3",{id:"1-always-provide-fallback"},"1. Always Provide Fallback"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"// \u2713 GOOD: Has fallback when maxParticipants filters out rule\n{\n  tallyDirectives: [\n    { attribute: 'matchUpsPct', idsFilter: true, maxParticipants: 2 },\n    { attribute: 'gamesPct', idsFilter: false }, // Fallback\n  ]\n}\n\n// \u2717 BAD: No fallback if 3+ teams tied\n{\n  tallyDirectives: [\n    { attribute: 'matchUpsPct', idsFilter: true, maxParticipants: 2 },\n    // No other rules! What happens with 3+ teams?\n  ]\n}\n")),(0,r.yg)("hr",null),(0,r.yg)("h3",{id:"2-document-tournament-specific-rules"},"2. Document Tournament-Specific Rules"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"const myTournamentPolicy = {\n  [POLICY_TYPE_ROUND_ROBIN_TALLY]: {\n    policyName: 'Spring Championship 2024',\n    // Document why maxParticipants is used\n    // \"Per tournament rules section 5.2: Head-to-head only applies \n    //  when exactly two teams are tied\"\n    tallyDirectives: [\n      { attribute: 'matchUpsPct', idsFilter: true, maxParticipants: 2 },\n      { attribute: 'gamesPct', idsFilter: false },\n    ],\n  },\n};\n")),(0,r.yg)("hr",null),(0,r.yg)("h3",{id:"3-consider-circular-tie-probability"},"3. Consider Circular Tie Probability"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Small groups (4 teams):")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Circular ties less common"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"maxParticipants: 2")," usually sufficient")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Large groups (8+ teams):")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Circular ties more likely"),(0,r.yg)("li",{parentName:"ul"},"Consider ",(0,r.yg)("inlineCode",{parentName:"li"},"maxParticipants: 3")," or removing head-to-head entirely")),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"conclusion"},"Conclusion"),(0,r.yg)("p",null,"The ",(0,r.yg)("inlineCode",{parentName:"p"},"maxParticipants")," attribute implements a ",(0,r.yg)("strong",{parentName:"p"},"universal sports rule pattern"),": different tie-breaking procedures apply based on how many teams are tied. This is not arbitrary - it reflects the mathematical reality that head-to-head comparisons work for 2 teams but can produce circular ties with 3+ teams."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Key takeaways:")),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"\u2705 Use ",(0,r.yg)("inlineCode",{parentName:"li"},"maxParticipants: 2")," for head-to-head rules"),(0,r.yg)("li",{parentName:"ol"},"\u2705 Always provide fallback directives"),(0,r.yg)("li",{parentName:"ol"},"\u2705 Matches real-world sports tournament rules"),(0,r.yg)("li",{parentName:"ol"},"\u2705 Prevents futile calculations on circular ties"),(0,r.yg)("li",{parentName:"ol"},"\u2705 Well-precedented across hockey, baseball, soccer, volleyball, pickleball, tennis, and football")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Sports precedents:")," Edmonton Hockey, Play K Baseball, Ripken Baseball, USA Pickleball, FIFA, UEFA, NFL, USTA, ITF, Olympics, and many more."))}u.isMDXComponent=!0}}]);