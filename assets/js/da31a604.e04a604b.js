"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[8499],{9150(n,e,i){i.r(e),i.d(e,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"scale-engine/quality-win-points","title":"Quality Win Points","description":"Quality win points are bonus points awarded for defeating ranked opponents. They are computed after position and per-win points, per participant, per draw.","source":"@site/docs/scale-engine/quality-win-points.md","sourceDirName":"scale-engine","slug":"/scale-engine/quality-win-points","permalink":"/competition-factory/docs/scale-engine/quality-win-points","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Quality Win Points"},"sidebar":"docs","previous":{"title":"Ranking Points Pipeline","permalink":"/competition-factory/docs/scale-engine/ranking-points-pipeline"},"next":{"title":"Multi-Tournament Aggregation","permalink":"/competition-factory/docs/scale-engine/aggregation"}}');var a=i(6070),r=i(8322);const s={title:"Quality Win Points"},o=void 0,l={},c=[{value:"How It Works",id:"how-it-works",level:2},{value:"Quality Win Profile",id:"quality-win-profile",level:2},{value:"Ranking Snapshot Strategies",id:"ranking-snapshot-strategies",level:2},{value:"Ranking Source",id:"ranking-source",level:2},{value:"Unranked Opponents",id:"unranked-opponents",level:2},{value:"Walkovers and Defaults",id:"walkovers-and-defaults",level:2},{value:"Quality Win Output",id:"quality-win-output",level:2},{value:"Integration with Aggregation",id:"integration-with-aggregation",level:2},{value:"Related Documentation",id:"related-documentation",level:2}];function d(n){const e={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.p,{children:"Quality win points are bonus points awarded for defeating ranked opponents. They are computed after position and per-win points, per participant, per draw."}),"\n",(0,a.jsx)(e.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,a.jsxs)(e.ol,{children:["\n",(0,a.jsx)(e.li,{children:"For each participant, identify their won matchUps in the draw"}),"\n",(0,a.jsx)(e.li,{children:"For each won matchUp, find the opponent"}),"\n",(0,a.jsxs)(e.li,{children:["Look up the opponent's ranking from their ",(0,a.jsx)(e.a,{href:"/docs/concepts/scaleItems",children:"scale items"})," (time items with ",(0,a.jsx)(e.code,{children:"SCALE.RANKING.{eventType}.{scaleName}"}),")"]}),"\n",(0,a.jsxs)(e.li,{children:["If the opponent is ranked and falls within a ",(0,a.jsx)(e.code,{children:"rankingRange"}),", award the corresponding bonus points"]}),"\n",(0,a.jsxs)(e.li,{children:["Sum all quality win bonuses, subject to ",(0,a.jsx)(e.code,{children:"maxBonusPerTournament"})," cap"]}),"\n"]}),"\n",(0,a.jsx)(e.h2,{id:"quality-win-profile",children:"Quality Win Profile"}),"\n",(0,a.jsxs)(e.p,{children:["Quality win behavior is defined in the ",(0,a.jsx)(e.code,{children:"qualityWinProfiles"})," array of a ",(0,a.jsx)(e.a,{href:"/docs/policies/rankingPolicy",children:"ranking policy"}),":"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-js",children:"qualityWinProfiles: [\n  {\n    rankingScaleName: 'USTA_JUNIOR',      // which ranking to look up\n    rankingSnapshot: 'tournamentStart',    // when to snapshot the ranking\n    unrankedOpponentBehavior: 'noBonus',   // what to do if opponent has no ranking\n    includeWalkovers: false,               // count walkovers as quality wins?\n    maxBonusPerTournament: 500,            // cap total quality win bonus per tournament\n\n    rankingRanges: [\n      { rankRange: [1, 10], value: 225 },\n      { rankRange: [11, 25], value: 203 },\n      { rankRange: [26, 50], value: 169 },\n      { rankRange: [51, 75], value: 135 },\n      { rankRange: [76, 100], value: 101 },\n      { rankRange: [101, 150], value: 68 },\n      { rankRange: [151, 250], value: 45 },\n      { rankRange: [251, 350], value: 23 },\n      { rankRange: [351, 500], value: 11 },\n    ],\n  },\n],\n"})}),"\n",(0,a.jsx)(e.h2,{id:"ranking-snapshot-strategies",children:"Ranking Snapshot Strategies"}),"\n",(0,a.jsxs)(e.p,{children:["The ",(0,a.jsx)(e.code,{children:"rankingSnapshot"})," field controls which point-in-time ranking value is used for the opponent:"]}),"\n",(0,a.jsxs)(e.table,{children:[(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"Strategy"}),(0,a.jsx)(e.th,{children:"Behavior"})]})}),(0,a.jsxs)(e.tbody,{children:[(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"'tournamentStart'"})}),(0,a.jsxs)(e.td,{children:["Most recent scale item with ",(0,a.jsx)(e.code,{children:"scaleDate <= tournamentRecord.startDate"})]})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"'latestAvailable'"})}),(0,a.jsx)(e.td,{children:"Most recent scale item regardless of date"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"'matchDate'"})}),(0,a.jsxs)(e.td,{children:["Most recent scale item with ",(0,a.jsx)(e.code,{children:"scaleDate <= matchUp.endDate"})]})]})]})]}),"\n",(0,a.jsx)(e.admonition,{type:"tip",children:(0,a.jsxs)(e.p,{children:["Use ",(0,a.jsx)(e.code,{children:"'tournamentStart'"})," (the default) for consistency \u2014 all opponents are evaluated against the rankings published before the tournament began. This prevents a player from earning quality win points based on rankings that changed mid-tournament."]})}),"\n",(0,a.jsx)(e.h2,{id:"ranking-source",children:"Ranking Source"}),"\n",(0,a.jsxs)(e.p,{children:["Opponent rankings are read from participant ",(0,a.jsx)(e.a,{href:"/docs/concepts/scaleItems",children:"scale items"}),", which are stored as time items on participant records. Rankings are typically:"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Imported"})," by the organizer when setting up a tournament (from the ranking authority)"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Written"})," by a prior call to ",(0,a.jsx)(e.a,{href:"/docs/scale-engine/scale-engine-api#applytournamentrankingpoints",children:"applyTournamentRankingPoints"})]}),"\n"]}),"\n",(0,a.jsxs)(e.p,{children:["The ",(0,a.jsx)(e.code,{children:"rankingScaleName"})," in the quality win profile must match the ",(0,a.jsx)(e.code,{children:"scaleName"})," used when the ranking was stored."]}),"\n",(0,a.jsx)(e.h2,{id:"unranked-opponents",children:"Unranked Opponents"}),"\n",(0,a.jsxs)(e.p,{children:["When an opponent has no ranking for the specified ",(0,a.jsx)(e.code,{children:"rankingScaleName"}),":"]}),"\n",(0,a.jsxs)(e.table,{children:[(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"Setting"}),(0,a.jsx)(e.th,{children:"Behavior"})]})}),(0,a.jsxs)(e.tbody,{children:[(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"'noBonus'"})}),(0,a.jsx)(e.td,{children:"No quality win points awarded (default)"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"'useDefaultRank'"})}),(0,a.jsxs)(e.td,{children:["Use ",(0,a.jsx)(e.code,{children:"defaultRank"})," value from the profile, then match against ranking ranges"]})]})]})]}),"\n",(0,a.jsx)(e.h2,{id:"walkovers-and-defaults",children:"Walkovers and Defaults"}),"\n",(0,a.jsxs)(e.p,{children:["By default, walkovers (",(0,a.jsx)(e.code,{children:"WALKOVER"}),") and defaults (",(0,a.jsx)(e.code,{children:"DEFAULTED"}),") are excluded from quality win calculation. Set ",(0,a.jsx)(e.code,{children:"includeWalkovers: true"})," to count them."]}),"\n",(0,a.jsx)(e.h2,{id:"quality-win-output",children:"Quality Win Output"}),"\n",(0,a.jsxs)(e.p,{children:["Quality win awards are stored separately in ",(0,a.jsx)(e.code,{children:"personPoints"}),":"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-js",children:"{\n  qualityWinPoints: 394,     // total quality win bonus for this draw\n  qualityWins: [\n    {\n      matchUpId: 'mu-123',\n      opponentParticipantId: 'opp-456',\n      opponentRank: 15,\n      points: 203,\n    },\n    {\n      matchUpId: 'mu-789',\n      opponentParticipantId: 'opp-012',\n      opponentRank: 42,\n      points: 169,\n    },\n    // ...additional entries capped at maxBonusPerTournament\n  ],\n  eventType: 'SINGLES',\n  drawId: 'draw-abc',\n}\n"})}),"\n",(0,a.jsx)(e.h2,{id:"integration-with-aggregation",children:"Integration with Aggregation"}),"\n",(0,a.jsxs)(e.p,{children:["Quality win points flow into ",(0,a.jsx)(e.a,{href:"/docs/scale-engine/aggregation",children:"multi-tournament aggregation"})," through the ",(0,a.jsx)(e.code,{children:"pointComponents"})," field on counting buckets:"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-js",children:"countingBuckets: [\n  // Quality wins typically have their own bucket with no bestOfCount cap\n  {\n    bucketName: 'Quality Wins',\n    pointComponents: ['qualityWinPoints'],\n    bestOfCount: 0, // count all quality wins\n  },\n],\n"})}),"\n",(0,a.jsx)(e.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:(0,a.jsx)(e.a,{href:"./scale-engine-overview",children:"Scale Engine Overview"})})," \u2014 Introduction and architecture"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:(0,a.jsx)(e.a,{href:"./scale-engine-api",children:"Core API Reference"})})," \u2014 Complete method reference"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:(0,a.jsx)(e.a,{href:"./ranking-points-pipeline",children:"Ranking Points Pipeline"})})," \u2014 How position and per-win points work"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:(0,a.jsx)(e.a,{href:"./aggregation",children:"Multi-Tournament Aggregation"})})," \u2014 Counting buckets and ranking lists"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:(0,a.jsx)(e.a,{href:"/docs/policies/rankingPolicy",children:"Ranking Policy"})})," \u2014 Full policy structure"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:(0,a.jsx)(e.a,{href:"/docs/concepts/scaleItems",children:"Scale Items"})})," \u2014 How rankings are stored"]}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(d,{...n})}):d(n)}},8322(n,e,i){i.d(e,{R:()=>s,x:()=>o});var t=i(758);const a={},r=t.createContext(a);function s(n){const e=t.useContext(r);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:s(n.components),t.createElement(r.Provider,{value:e},n.children)}}}]);