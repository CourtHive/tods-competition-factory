"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[5691],{3805:(e,n,a)=>{a.d(n,{xA:()=>o,yg:()=>h});var i=a(758);function l(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function t(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,i)}return a}function s(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?t(Object(a),!0).forEach((function(n){l(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function r(e,n){if(null==e)return{};var a,i,l=function(e,n){if(null==e)return{};var a,i,l={},t=Object.keys(e);for(i=0;i<t.length;i++)a=t[i],n.indexOf(a)>=0||(l[a]=e[a]);return l}(e,n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);for(i=0;i<t.length;i++)a=t[i],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var u=i.createContext({}),p=function(e){var n=i.useContext(u),a=n;return e&&(a="function"==typeof e?e(n):s(s({},n),e)),a},o=function(e){var n=p(e.components);return i.createElement(u.Provider,{value:n},e.children)},g="mdxType",c={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},d=i.forwardRef((function(e,n){var a=e.components,l=e.mdxType,t=e.originalType,u=e.parentName,o=r(e,["components","mdxType","originalType","parentName"]),g=p(a),d=l,h=g["".concat(u,".").concat(d)]||g[d]||c[d]||t;return a?i.createElement(h,s(s({ref:n},o),{},{components:a})):i.createElement(h,s({ref:n},o))}));function h(e,n){var a=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var t=a.length,s=new Array(t);s[0]=d;var r={};for(var u in n)hasOwnProperty.call(n,u)&&(r[u]=n[u]);r.originalType=e,r[g]="string"==typeof e?e:l,s[1]=r;for(var p=2;p<t;p++)s[p]=a[p];return i.createElement.apply(null,s)}return i.createElement.apply(null,a)}d.displayName="MDXCreateElement"},865:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>u,contentTitle:()=>s,default:()=>c,frontMatter:()=>t,metadata:()=>r,toc:()=>p});var i=a(2232),l=(a(758),a(3805));const t={title:"Publishing Governor"},s=void 0,r={unversionedId:"governors/publishing-governor",id:"governors/publishing-governor",title:"Publishing Governor",description:"The Publishing Governor provides methods for controlling the public visibility of tournament information through publish state management. These methods work in conjunction with Time Items to track what's published and when.",source:"@site/docs/governors/publishing-governor.md",sourceDirName:"governors",slug:"/governors/publishing-governor",permalink:"/tods-competition-factory/docs/governors/publishing-governor",draft:!1,tags:[],version:"current",frontMatter:{title:"Publishing Governor"},sidebar:"docs",previous:{title:"Policy Governor",permalink:"/tods-competition-factory/docs/governors/policy-governor"},next:{title:"Query Governor",permalink:"/tods-competition-factory/docs/governors/query-governor"}},u={},p=[{value:"Overview",id:"overview",level:2},{value:"getPublishState",id:"getpublishstate",level:2},{value:"Return All Publish State",id:"return-all-publish-state",level:3},{value:"Query Specific Event",id:"query-specific-event",level:3},{value:"Query Specific Draw",id:"query-specific-draw",level:3},{value:"publishEvent",id:"publishevent",level:2},{value:"Publishing Patterns",id:"publishing-patterns",level:3},{value:"Publish All Draws in Event",id:"publish-all-draws-in-event",level:4},{value:"Publish Specific Draws (Flights)",id:"publish-specific-draws-flights",level:4},{value:"Publish by Stage",id:"publish-by-stage",level:4},{value:"Round-by-Round Publishing",id:"round-by-round-publishing",level:4},{value:"Publishing with Embargo",id:"publishing-with-embargo",level:4},{value:"Publishing with Privacy Policies",id:"publishing-with-privacy-policies",level:4},{value:"Customizing Event Data Payload",id:"customizing-event-data-payload",level:4},{value:"publishEventSeeding",id:"publisheventseeding",level:2},{value:"Examples",id:"examples",level:3},{value:"Publish All Seeding",id:"publish-all-seeding",level:4},{value:"Publish Specific Scales",id:"publish-specific-scales",level:4},{value:"Different Scales per Stage",id:"different-scales-per-stage",level:4},{value:"Publish Specific Flights",id:"publish-specific-flights",level:4},{value:"publishOrderOfPlay",id:"publishorderofplay",level:2},{value:"Examples",id:"examples-1",level:3},{value:"Publish All Scheduled MatchUps",id:"publish-all-scheduled-matchups",level:4},{value:"Publish Specific Dates",id:"publish-specific-dates",level:4},{value:"Publish Specific Events",id:"publish-specific-events",level:4},{value:"Daily Publication",id:"daily-publication",level:4},{value:"Replace All Previous Publications",id:"replace-all-previous-publications",level:4},{value:"publishParticipants",id:"publishparticipants",level:2},{value:"Examples",id:"examples-2",level:3},{value:"Publish Participants",id:"publish-participants",level:4},{value:"Replace Previous Publication",id:"replace-previous-publication",level:4},{value:"unPublishEvent",id:"unpublishevent",level:2},{value:"Examples",id:"examples-3",level:3},{value:"unPublishEventSeeding",id:"unpublisheventseeding",level:2},{value:"Examples",id:"examples-4",level:3},{value:"Unpublish All Seeding",id:"unpublish-all-seeding",level:4},{value:"Unpublish Specific Stages",id:"unpublish-specific-stages",level:4},{value:"unPublishOrderOfPlay",id:"unpublishorderofplay",level:2},{value:"Examples",id:"examples-5",level:3},{value:"unPublishParticipants",id:"unpublishparticipants",level:2},{value:"Examples",id:"examples-6",level:3},{value:"Integration Patterns",id:"integration-patterns",level:2},{value:"Subscription-Based Publishing",id:"subscription-based-publishing",level:3},{value:"Database Synchronization",id:"database-synchronization",level:3},{value:"Cache Management",id:"cache-management",level:3},{value:"Related Documentation",id:"related-documentation",level:2}],o={toc:p},g="wrapper";function c({components:e,...n}){return(0,l.yg)(g,(0,i.A)({},o,n,{components:e,mdxType:"MDXLayout"}),(0,l.yg)("p",null,"The ",(0,l.yg)("strong",{parentName:"p"},"Publishing Governor")," provides methods for controlling the public visibility of tournament information through publish state management. These methods work in conjunction with ",(0,l.yg)("a",{parentName:"p",href:"../concepts/timeItems"},"Time Items")," to track what's published and when."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"import { publishingGovernor } from 'tods-competition-factory';\n")),(0,l.yg)("admonition",{type:"tip"},(0,l.yg)("p",{parentName:"admonition"},"See ",(0,l.yg)("strong",{parentName:"p"},(0,l.yg)("a",{parentName:"strong",href:"../concepts/publishing"},"Publishing Concepts"))," for comprehensive coverage of publishing workflows, rationale, and best practices.")),(0,l.yg)("h2",{id:"overview"},"Overview"),(0,l.yg)("p",null,"Publishing operates at multiple levels of granularity:"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Tournament Level"),": Participants, Order of Play"),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Event Level"),": All draws, specific draws (flights), seeding"),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Draw Level"),": Entire draws, specific stages (MAIN, QUALIFYING, CONSOLATION)"),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Structure Level"),": Specific structures, round-by-round visibility")),(0,l.yg)("p",null,"All publishing methods:"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Update publish state via ",(0,l.yg)("a",{parentName:"li",href:"../concepts/timeItems"},"Time Items")),(0,l.yg)("li",{parentName:"ul"},"Trigger ",(0,l.yg)("a",{parentName:"li",href:"/docs/engines/subscriptions"},"subscription notifications")),(0,l.yg)("li",{parentName:"ul"},"Support ",(0,l.yg)("inlineCode",{parentName:"li"},"removePriorValues")," to clear previous publish state"),(0,l.yg)("li",{parentName:"ul"},"Enable fine-grained control over information release")),(0,l.yg)("hr",null),(0,l.yg)("h2",{id:"getpublishstate"},"getPublishState"),(0,l.yg)("p",null,"Returns publishing details for tournament, event(s), and/or draws, enabling queries about current publish state before making changes."),(0,l.yg)("h3",{id:"return-all-publish-state"},"Return All Publish State"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"const { publishState } = engine.getPublishState();\n\n// Tournament-level state\nconst participantsPublished = publishState.tournament.participants.published;\nconst orderOfPlayPublished = publishState.tournament.orderOfPlay.published;\n\n// Event-level state (accessed by eventId)\nconst eventState = publishState['eventId'].status;\nconst {\n  published, // boolean - is event published?\n  publishedDrawIds, // array of published draw IDs\n  drawDetails, // granular stage/structure details\n} = eventState;\n")),(0,l.yg)("h3",{id:"query-specific-event"},"Query Specific Event"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"const { publishState } = engine.getPublishState({ eventId });\nconst eventPublished = publishState.status.published;\nconst publishedDraws = publishState.status.publishedDrawIds;\n")),(0,l.yg)("h3",{id:"query-specific-draw"},"Query Specific Draw"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"const { publishState } = engine.getPublishState({ drawId });\nconst drawPublished = publishState.status.published;\n\n// When only specific stages or structures are published\nconst drawPublishDetail = publishState.status.drawDetail;\n// Example structure: { stages: ['MAIN'], structures: { [structureId]: { roundLimit: 2 } } }\n")),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"Use Cases"),":"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Verify current state before publishing"),(0,l.yg)("li",{parentName:"ul"},"Display publish status in admin UI"),(0,l.yg)("li",{parentName:"ul"},"Determine if re-publishing is needed"),(0,l.yg)("li",{parentName:"ul"},"Query embargo status")),(0,l.yg)("hr",null),(0,l.yg)("h2",{id:"publishevent"},"publishEvent"),(0,l.yg)("p",null,"Publishes event draws and structures with fine-grained control over visibility. Generates optimized ",(0,l.yg)("inlineCode",{parentName:"p"},"eventData")," payload and triggers ",(0,l.yg)("inlineCode",{parentName:"p"},"PUBLISH_EVENT")," subscription notifications."),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"Key Features"),":"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Publishes entire events or specific draws (flights)"),(0,l.yg)("li",{parentName:"ul"},"Stage-level control (MAIN, QUALIFYING, CONSOLATION)"),(0,l.yg)("li",{parentName:"ul"},"Structure and round-level granularity"),(0,l.yg)("li",{parentName:"ul"},"Embargo support for scheduled publication"),(0,l.yg)("li",{parentName:"ul"},"Privacy policy application"),(0,l.yg)("li",{parentName:"ul"},"Subscription notification with prepared payload")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"const { eventData } = engine.publishEvent({\n  eventId, // required - event to publish\n\n  // Draw selection (choose one approach)\n  drawIdsToAdd, // array - publish specific draws\n  drawIdsToRemove, // array - unpublish specific draws\n  drawDetails, // object - granular control (see below)\n\n  // Data preparation\n  eventDataParams, // optional - params for getEventData (not persisted)\n  policyDefinitions, // optional - privacy policies to apply\n\n  // State management\n  removePriorValues, // optional boolean - clear previous timeItems\n});\n")),(0,l.yg)("h3",{id:"publishing-patterns"},"Publishing Patterns"),(0,l.yg)("h4",{id:"publish-all-draws-in-event"},"Publish All Draws in Event"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"engine.publishEvent({ eventId });\n")),(0,l.yg)("h4",{id:"publish-specific-draws-flights"},"Publish Specific Draws (Flights)"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"// Shorthand\nengine.publishEvent({\n  eventId,\n  drawIdsToAdd: ['drawId1', 'drawId2'],\n});\n\n// Remove draws from publication\nengine.publishEvent({\n  eventId,\n  drawIdsToRemove: ['drawId3'],\n});\n")),(0,l.yg)("h4",{id:"publish-by-stage"},"Publish by Stage"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"import { stageConstants } from 'tods-competition-factory';\n\nengine.publishEvent({\n  eventId,\n  drawDetails: {\n    [drawId]: {\n      stagesToAdd: [stageConstants.QUALIFYING],\n      publishingDetail: { published: true },\n    },\n  },\n});\n")),(0,l.yg)("h4",{id:"round-by-round-publishing"},"Round-by-Round Publishing"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"// Publish only first round of a structure\nengine.publishEvent({\n  eventId,\n  drawDetails: {\n    [drawId]: {\n      structureDetails: {\n        [structureId]: {\n          roundLimit: 1,\n          published: true,\n        },\n      },\n    },\n  },\n});\n\n// Expand to include more rounds\nengine.publishEvent({\n  eventId,\n  drawDetails: {\n    [drawId]: {\n      structureDetails: {\n        [structureId]: {\n          roundLimit: 3, // Now shows rounds 1-3\n          published: true,\n        },\n      },\n    },\n  },\n});\n")),(0,l.yg)("h4",{id:"publishing-with-embargo"},"Publishing with Embargo"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"const embargoTime = new Date('2024-06-15T10:00:00Z').toISOString();\n\nengine.publishEvent({\n  eventId,\n  drawDetails: {\n    [drawId]: {\n      publishingDetail: {\n        published: true,\n        embargo: embargoTime, // Don't display until this time\n      },\n    },\n  },\n});\n")),(0,l.yg)("h4",{id:"publishing-with-privacy-policies"},"Publishing with Privacy Policies"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"import { policyConstants } from 'tods-competition-factory';\n\nconst privacyPolicy = {\n  participant: {\n    contacts: false,\n    addresses: false,\n    individualParticipants: {\n      contacts: false,\n      addresses: false,\n    },\n  },\n};\n\nconst { eventData } = engine.publishEvent({\n  eventId,\n  policyDefinitions: {\n    [policyConstants.POLICY_TYPE_PARTICIPANT]: privacyPolicy,\n  },\n});\n")),(0,l.yg)("h4",{id:"customizing-event-data-payload"},"Customizing Event Data Payload"),(0,l.yg)("admonition",{type:"important"},(0,l.yg)("p",{parentName:"admonition"},"Event data parameters are ",(0,l.yg)("strong",{parentName:"p"},"not persisted")," in publish state. Client applications must pass their own parameters when querying with ",(0,l.yg)("inlineCode",{parentName:"p"},"usePublishState: true"),".")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"// Server-side publishing\nconst { eventData } = engine.publishEvent({\n  eventId,\n  eventDataParams: {\n    allParticipantResults: true,\n    participantsProfile: {\n      withISO2: true,\n      withIOC: true,\n    },\n  },\n});\n\n// Client must pass same params when querying\nconst { eventData: clientData } = engine.getEventData({\n  eventId,\n  usePublishState: true,\n  allParticipantResults: true,\n  participantsProfile: { withISO2: true, withIOC: true },\n});\n")),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"See"),": ",(0,l.yg)("a",{parentName:"p",href:"../concepts/publishing#data-preparation-for-publishing"},"Publishing Concepts")," for details on eventData structure."),(0,l.yg)("hr",null),(0,l.yg)("h2",{id:"publisheventseeding"},"publishEventSeeding"),(0,l.yg)("p",null,"Publishes event seeding information separately from draw structures, enabling flexible control over when seeding becomes publicly visible."),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"Why Separate Seeding Publication"),":"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Prevent participants from knowing seeded positions before draws finalized"),(0,l.yg)("li",{parentName:"ul"},"Announce seeded players separately from draw structure"),(0,l.yg)("li",{parentName:"ul"},"Update seeding without re-publishing entire draw"),(0,l.yg)("li",{parentName:"ul"},"Different scales for different stages")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"engine.publishEventSeeding({\n  eventId, // required\n\n  // Scale selection\n  seedingScaleNames, // optional - array of scale names\n  stageSeedingScaleNames, // optional - { MAIN: 'scale1', QUALIFYING: 'scale2' }\n\n  // Draw selection\n  drawIds, // optional - publish specific draws only\n\n  // State management\n  removePriorValues, // optional boolean - clear previous timeItems\n});\n")),(0,l.yg)("h3",{id:"examples"},"Examples"),(0,l.yg)("h4",{id:"publish-all-seeding"},"Publish All Seeding"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"engine.publishEventSeeding({ eventId });\n")),(0,l.yg)("h4",{id:"publish-specific-scales"},"Publish Specific Scales"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"engine.publishEventSeeding({\n  eventId,\n  seedingScaleNames: ['U18', 'WTN'],\n});\n")),(0,l.yg)("h4",{id:"different-scales-per-stage"},"Different Scales per Stage"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"engine.publishEventSeeding({\n  eventId,\n  stageSeedingScaleNames: {\n    MAIN: 'U18',\n    QUALIFYING: 'U18Q',\n  },\n});\n")),(0,l.yg)("h4",{id:"publish-specific-flights"},"Publish Specific Flights"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"engine.publishEventSeeding({\n  eventId,\n  drawIds: ['flight1', 'flight2'],\n});\n")),(0,l.yg)("hr",null),(0,l.yg)("h2",{id:"publishorderofplay"},"publishOrderOfPlay"),(0,l.yg)("p",null,"Publishes scheduled matchUps (Order of Play), controlling visibility of which matches are scheduled for which courts and times."),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"Why Order of Play Publishing"),":"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Prepare schedules internally before announcing"),(0,l.yg)("li",{parentName:"ul"},"Make scheduling changes before public release"),(0,l.yg)("li",{parentName:"ul"},"Coordinate releases with media partners"),(0,l.yg)("li",{parentName:"ul"},"Publish each day's schedule separately")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"engine.publishOrderOfPlay({\n  scheduledDates, // optional - array of dates to publish\n  eventIds, // optional - array of events to publish\n  removePriorValues, // optional boolean - clear previous timeItems\n});\n")),(0,l.yg)("h3",{id:"examples-1"},"Examples"),(0,l.yg)("h4",{id:"publish-all-scheduled-matchups"},"Publish All Scheduled MatchUps"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"engine.publishOrderOfPlay();\n")),(0,l.yg)("h4",{id:"publish-specific-dates"},"Publish Specific Dates"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"engine.publishOrderOfPlay({\n  scheduledDates: ['2024-06-15', '2024-06-16'],\n});\n")),(0,l.yg)("h4",{id:"publish-specific-events"},"Publish Specific Events"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"engine.publishOrderOfPlay({\n  eventIds: ['singles-main', 'doubles-main'],\n});\n")),(0,l.yg)("h4",{id:"daily-publication"},"Daily Publication"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"// Each morning, publish that day's schedule\nconst today = new Date().toISOString().split('T')[0];\n\nengine.publishOrderOfPlay({\n  scheduledDates: [today],\n  removePriorValues: false, // Keep previous days published\n});\n")),(0,l.yg)("h4",{id:"replace-all-previous-publications"},"Replace All Previous Publications"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"engine.publishOrderOfPlay({\n  scheduledDates: ['2024-06-15'],\n  eventIds: ['singles-main'],\n  removePriorValues: true, // Clear all previous\n});\n")),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"Query Published Schedules"),":"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"const { dateMatchUps } = engine.competitionScheduleMatchUps({\n  usePublishState: true, // Only returns published matchUps\n});\n")),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"See"),": ",(0,l.yg)("a",{parentName:"p",href:"/docs/governors/query-governor#competitionschedulematchups"},"Query Governor - competitionScheduleMatchUps")),(0,l.yg)("hr",null),(0,l.yg)("h2",{id:"publishparticipants"},"publishParticipants"),(0,l.yg)("p",null,"Publishes the tournament participant list, controlling when participant information becomes publicly visible."),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"Why Participant Publishing"),":"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Accept entries internally before announcing participant list"),(0,l.yg)("li",{parentName:"ul"},"Control when participant information becomes public"),(0,l.yg)("li",{parentName:"ul"},"Coordinate announcements with promotional campaigns"),(0,l.yg)("li",{parentName:"ul"},"Staged announcements (wildcards separate from direct acceptances)")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"engine.publishParticipants({\n  removePriorValues, // optional boolean - clear previous timeItems\n});\n")),(0,l.yg)("h3",{id:"examples-2"},"Examples"),(0,l.yg)("h4",{id:"publish-participants"},"Publish Participants"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"engine.publishParticipants();\n")),(0,l.yg)("h4",{id:"replace-previous-publication"},"Replace Previous Publication"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"engine.publishParticipants({\n  removePriorValues: true,\n});\n")),(0,l.yg)("hr",null),(0,l.yg)("h2",{id:"unpublishevent"},"unPublishEvent"),(0,l.yg)("p",null,"Removes event from public visibility. Triggers ",(0,l.yg)("inlineCode",{parentName:"p"},"UNPUBLISH_EVENT")," subscription notification."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"engine.unPublishEvent({\n  eventId, // required\n  removePriorValues, // optional boolean, defaults to true\n});\n")),(0,l.yg)("h3",{id:"examples-3"},"Examples"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"// Unpublish event (removes timeItems)\nengine.unPublishEvent({ eventId });\n\n// Unpublish without removing timeItems\nengine.unPublishEvent({\n  eventId,\n  removePriorValues: false,\n});\n")),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"Use Cases"),":"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Draw corrections needed before re-publishing"),(0,l.yg)("li",{parentName:"ul"},"Event cancelled or postponed"),(0,l.yg)("li",{parentName:"ul"},"Major scheduling changes requiring republication"),(0,l.yg)("li",{parentName:"ul"},"Remove from public site while maintaining internal data")),(0,l.yg)("hr",null),(0,l.yg)("h2",{id:"unpublisheventseeding"},"unPublishEventSeeding"),(0,l.yg)("p",null,"Removes seeding information from public visibility."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"engine.unPublishEventSeeding({\n  eventId, // required\n  stages, // optional - array of stages to unpublish\n  removePriorValues, // optional boolean, defaults to true\n});\n")),(0,l.yg)("h3",{id:"examples-4"},"Examples"),(0,l.yg)("h4",{id:"unpublish-all-seeding"},"Unpublish All Seeding"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"engine.unPublishEventSeeding({ eventId });\n")),(0,l.yg)("h4",{id:"unpublish-specific-stages"},"Unpublish Specific Stages"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"engine.unPublishEventSeeding({\n  eventId,\n  stages: [stageConstants.MAIN, stageConstants.QUALIFYING],\n});\n")),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"Use Cases"),":"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Seeding corrections needed"),(0,l.yg)("li",{parentName:"ul"},"Change seeding methodology"),(0,l.yg)("li",{parentName:"ul"},"Remove seeding before draw changes")),(0,l.yg)("hr",null),(0,l.yg)("h2",{id:"unpublishorderofplay"},"unPublishOrderOfPlay"),(0,l.yg)("p",null,"Removes Order of Play from public visibility."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"engine.unPublishOrderOfPlay({\n  removePriorValues, // optional boolean, defaults to true\n});\n")),(0,l.yg)("h3",{id:"examples-5"},"Examples"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"// Unpublish all schedules\nengine.unPublishOrderOfPlay();\n\n// Keep timeItems\nengine.unPublishOrderOfPlay({\n  removePriorValues: false,\n});\n")),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"Use Cases"),":"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Major scheduling changes"),(0,l.yg)("li",{parentName:"ul"},"Venue changes affecting schedule"),(0,l.yg)("li",{parentName:"ul"},"Weather delays requiring reschedule"),(0,l.yg)("li",{parentName:"ul"},"Remove from public pending updates")),(0,l.yg)("hr",null),(0,l.yg)("h2",{id:"unpublishparticipants"},"unPublishParticipants"),(0,l.yg)("p",null,"Removes participant list from public visibility."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"engine.unPublishParticipants({\n  removePriorValues, // optional boolean, defaults to true\n});\n")),(0,l.yg)("h3",{id:"examples-6"},"Examples"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"// Unpublish participants\nengine.unPublishParticipants();\n")),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"Use Cases"),":"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Entry deadline extended"),(0,l.yg)("li",{parentName:"ul"},"Major withdrawals requiring list update"),(0,l.yg)("li",{parentName:"ul"},"Corrections to participant information")),(0,l.yg)("hr",null),(0,l.yg)("h2",{id:"integration-patterns"},"Integration Patterns"),(0,l.yg)("h3",{id:"subscription-based-publishing"},"Subscription-Based Publishing"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"import { topicConstants } from 'tods-competition-factory';\n\nconst subscriptions = {\n  [topicConstants.PUBLISH_EVENT]: async (payload) => {\n    const { eventData, eventId } = payload;\n    // Update public website\n    await fetch('https://public-site.com/api/events', {\n      method: 'POST',\n      body: JSON.stringify(eventData),\n    });\n  },\n\n  [topicConstants.PUBLISH_ORDER_OF_PLAY]: async (payload) => {\n    const { dateMatchUps } = payload;\n    // Update schedule displays\n    await updateScheduleDisplay(dateMatchUps);\n  },\n\n  [topicConstants.UNPUBLISH_EVENT]: async (payload) => {\n    const { eventId } = payload;\n    // Remove from public site\n    await removeFromPublicSite(eventId);\n  },\n};\n\nengine.devContext({ subscriptions });\n")),(0,l.yg)("h3",{id:"database-synchronization"},"Database Synchronization"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"[topicConstants.PUBLISH_ORDER_OF_PLAY]: async (payload) => {\n  const { dateMatchUps } = payload;\n  await database.updatePublishedSchedule(dateMatchUps);\n  cache.invalidate('schedules');\n}\n")),(0,l.yg)("h3",{id:"cache-management"},"Cache Management"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"[topicConstants.UNPUBLISH_EVENT]: (payload) => {\n  const { eventId } = payload;\n  cache.invalidate(`event:${eventId}`);\n  cache.invalidate('published-events-list');\n}\n")),(0,l.yg)("hr",null),(0,l.yg)("h2",{id:"related-documentation"},"Related Documentation"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},(0,l.yg)("a",{parentName:"strong",href:"../concepts/publishing"},"Publishing Concepts"))," - Comprehensive workflows and best practices"),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},(0,l.yg)("a",{parentName:"strong",href:"../concepts/timeItems"},"Time Items"))," - How publish state is stored"),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},(0,l.yg)("a",{parentName:"strong",href:"/docs/engines/subscriptions"},"Subscriptions"))," - Notification system"),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},(0,l.yg)("a",{parentName:"strong",href:"/docs/governors/query-governor"},"Query Governor"))," - Methods using publish state"),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},(0,l.yg)("a",{parentName:"strong",href:"../concepts/policies"},"Policies"))," - Privacy and display policies")))}c.isMDXComponent=!0}}]);