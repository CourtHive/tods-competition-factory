"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[6397],{6844(e,n,s){s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"concepts/publishing/publishing-workflows","title":"Workflows and Best Practices","description":"Common Workflows","source":"@site/docs/concepts/publishing/publishing-workflows.md","sourceDirName":"concepts/publishing","slug":"/concepts/publishing/publishing-workflows","permalink":"/competition-factory/docs/concepts/publishing/publishing-workflows","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Workflows and Best Practices"},"sidebar":"docs","previous":{"title":"Data and Subscriptions","permalink":"/competition-factory/docs/concepts/publishing/publishing-data-subscriptions"},"next":{"title":"Overview","permalink":"/competition-factory/docs/engines/state-engines"}}');var t=s(6070),r=s(8322);const a={title:"Workflows and Best Practices"},l=void 0,o={},c=[{value:"Common Workflows",id:"common-workflows",level:2},{value:"Progressive Draw Publication",id:"progressive-draw-publication",level:3},{value:"Multi-Stage Publication",id:"multi-stage-publication",level:3},{value:"Daily Order of Play",id:"daily-order-of-play",level:3},{value:"Coordinated Event and Seeding Release",id:"coordinated-event-and-seeding-release",level:3},{value:"Querying with Publish State",id:"querying-with-publish-state",level:2},{value:"Event Data",id:"event-data",level:3},{value:"Competition Schedule",id:"competition-schedule",level:3},{value:"Participants",id:"participants",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Clear Separation",id:"clear-separation",level:3},{value:"Test Publish State",id:"test-publish-state",level:3},{value:"Atomic Publications",id:"atomic-publications",level:3}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"common-workflows",children:"Common Workflows"}),"\n",(0,t.jsx)(n.h3,{id:"progressive-draw-publication",children:"Progressive Draw Publication"}),"\n",(0,t.jsx)(n.p,{children:"Gradually release draw information as tournament progresses:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"// Day 1: Publish first round only\nengine.publishEvent({\n  eventId,\n  drawDetails: {\n    [drawId]: {\n      structureDetails: {\n        [structureId]: { roundLimit: 1, published: true },\n      },\n    },\n  },\n});\n\n// Day 2: Expand to show rounds 1-2\nengine.publishEvent({\n  eventId,\n  drawDetails: {\n    [drawId]: {\n      structureDetails: {\n        [structureId]: { roundLimit: 2, published: true },\n      },\n    },\n  },\n});\n\n// Day 3: Publish entire draw\nengine.publishEvent({\n  eventId,\n  drawDetails: {\n    [drawId]: { publishingDetail: { published: true } },\n  },\n});\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"API Reference:"})," ",(0,t.jsx)(n.a,{href:"/docs/governors/publishing-governor#publishevent",children:"publishEvent"})]}),"\n",(0,t.jsx)(n.h3,{id:"multi-stage-publication",children:"Multi-Stage Publication"}),"\n",(0,t.jsx)(n.p,{children:"Publish qualifying first, main draw later:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"import { stageConstants } from 'tods-competition-factory';\n\n// Publish qualifying only\nengine.publishEvent({\n  eventId,\n  drawDetails: {\n    [drawId]: {\n      stagesToAdd: [stageConstants.QUALIFYING],\n    },\n  },\n});\n\n// Later: add main draw\nengine.publishEvent({\n  eventId,\n  drawDetails: {\n    [drawId]: {\n      stagesToAdd: [stageConstants.MAIN],\n    },\n  },\n});\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"API Reference:"})," ",(0,t.jsx)(n.a,{href:"/docs/governors/publishing-governor#publishevent",children:"publishEvent"})]}),"\n",(0,t.jsx)(n.h3,{id:"daily-order-of-play",children:"Daily Order of Play"}),"\n",(0,t.jsx)(n.p,{children:"Publish each day's schedule separately:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"// Each morning, publish that day's schedule\nconst today = new Date().toISOString().split('T')[0];\n\nengine.publishOrderOfPlay({\n  scheduledDates: [today],\n  removePriorValues: false, // Keep previous days published\n});\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"API Reference:"})," ",(0,t.jsx)(n.a,{href:"/docs/governors/publishing-governor#publishorderofplay",children:"publishOrderOfPlay"})]}),"\n",(0,t.jsx)(n.h3,{id:"coordinated-event-and-seeding-release",children:"Coordinated Event and Seeding Release"}),"\n",(0,t.jsx)(n.p,{children:"Separate seeding announcement from draw publication:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"// Step 1: Announce seeded players\nengine.publishEventSeeding({ eventId });\n// Subscription notification sent\n// Public site shows seeded players without draw\n\n// Step 2: Later, publish draw\nengine.publishEvent({ eventId });\n// Subscription notification sent\n// Public site shows complete draw with seeding\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"API Reference:"})," ",(0,t.jsx)(n.a,{href:"/docs/governors/publishing-governor#publisheventseeding",children:"publishEventSeeding"}),", ",(0,t.jsx)(n.a,{href:"/docs/governors/publishing-governor#publishevent",children:"publishEvent"})]}),"\n",(0,t.jsx)(n.h2,{id:"querying-with-publish-state",children:"Querying with Publish State"}),"\n",(0,t.jsxs)(n.p,{children:["Methods that respect publish state when ",(0,t.jsx)(n.code,{children:"usePublishState: true"}),":"]}),"\n",(0,t.jsx)(n.h3,{id:"event-data",children:"Event Data"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const { eventData } = engine.getEventData({\n  eventId,\n  usePublishState: true, // Filter to published draws/structures only\n});\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"API Reference:"})," ",(0,t.jsx)(n.a,{href:"/docs/governors/query-governor#geteventdata",children:"getEventData"})]}),"\n",(0,t.jsx)(n.h3,{id:"competition-schedule",children:"Competition Schedule"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const { dateMatchUps } = engine.competitionScheduleMatchUps({\n  usePublishState: true, // Only published dates and events\n});\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"API Reference:"})," ",(0,t.jsx)(n.a,{href:"/docs/governors/query-governor#competitionschedulematchups",children:"competitionScheduleMatchUps"})]}),"\n",(0,t.jsx)(n.h3,{id:"participants",children:"Participants"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const { participants } = engine.getParticipants({\n  usePublishState: true, // Respect privacy policies\n  policyDefinitions: privacyPolicy,\n});\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"API Reference:"})," ",(0,t.jsx)(n.a,{href:"/docs/governors/query-governor#getparticipants",children:"getParticipants"})]}),"\n",(0,t.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsx)(n.h3,{id:"clear-separation",children:"Clear Separation"}),"\n",(0,t.jsx)(n.p,{children:"Maintain clear separation between internal and public-facing queries:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"// Internal operations - full data access\nconst { matchUps } = engine.allTournamentMatchUps();\n\n// Public displays - filtered data\nconst { matchUps: publicMatchUps } = engine.allTournamentMatchUps({\n  usePublishState: true,\n});\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"API Reference:"})," ",(0,t.jsx)(n.a,{href:"/docs/governors/query-governor#alltournamentmatchups",children:"allTournamentMatchUps"})]}),"\n",(0,t.jsx)(n.h3,{id:"test-publish-state",children:"Test Publish State"}),"\n",(0,t.jsx)(n.p,{children:"Verify filtering works before going live:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"// Publish event\nengine.publishEvent({ eventId });\n\n// Query what public will see\nconst { eventData } = engine.getEventData({\n  eventId,\n  usePublishState: true,\n});\n\n// Verify expected structures/rounds visible\nassert(eventData.drawsData.length === expectedCount);\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"API Reference:"})," ",(0,t.jsx)(n.a,{href:"/docs/governors/publishing-governor#publishevent",children:"publishEvent"}),", ",(0,t.jsx)(n.a,{href:"/docs/governors/query-governor#geteventdata",children:"getEventData"})]}),"\n",(0,t.jsx)(n.h3,{id:"atomic-publications",children:"Atomic Publications"}),"\n",(0,t.jsxs)(n.p,{children:["Use ",(0,t.jsx)(n.code,{children:"removePriorValues: true"})," for clean state transitions:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"// Replace previous publication completely\nengine.publishOrderOfPlay({\n  scheduledDates: newDates,\n  removePriorValues: true, // Clean slate\n});\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"API Reference:"})," ",(0,t.jsx)(n.a,{href:"/docs/governors/publishing-governor#publishorderofplay",children:"publishOrderOfPlay"})]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8322(e,n,s){s.d(n,{R:()=>a,x:()=>l});var i=s(758);const t={},r=i.createContext(t);function a(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);