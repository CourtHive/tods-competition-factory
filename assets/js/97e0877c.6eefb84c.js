"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[2953],{7239(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"engines/global-state","title":"Global State","description":"devContext","source":"@site/docs/engines/global-state.md","sourceDirName":"engines","slug":"/engines/global-state","permalink":"/competition-factory/docs/engines/global-state","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Global State"},"sidebar":"docs","previous":{"title":"Custom Engines","permalink":"/competition-factory/docs/engines/custom-engines"},"next":{"title":"Overview","permalink":"/competition-factory/docs/scoring-engine/scoring-engine-overview"}}');var r=t(6070),s=t(8322);const a={title:"Global State"},i=void 0,c={},d=[{value:"devContext",id:"devcontext",level:2},{value:"getState",id:"getstate",level:2},{value:"removeTournamentRecord",id:"removetournamentrecord",level:2},{value:"setState",id:"setstate",level:2},{value:"setTournamentRecord",id:"settournamentrecord",level:2},{value:"setTournamentId",id:"settournamentid",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",hr:"hr",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"devcontext",children:"devContext"}),"\n",(0,r.jsxs)(n.p,{children:["Setting devContext(true) bypasses ",(0,r.jsxs)(n.strong,{children:["try "," catch (err) "]})," code block and in some cases enables enhanced logging"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"getDevContext(true);\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"getstate",children:"getState"}),"\n",(0,r.jsxs)(n.p,{children:["Returns a deep copy of ",(0,r.jsx)(n.code,{children:"tournamentRecords"})," which have been loaded, along with currently selected ",(0,r.jsx)(n.code,{children:"tournamentId"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const { tournamentId, tournamentRecords } = getState({\n  convertExtensions, // optional - convert extensions to '_' prefixed attributes\n  removeExtensions, // optional - strip all extensions out of tournamentRecord\n});\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"removetournamentrecord",children:"removeTournamentRecord"}),"\n",(0,r.jsx)(n.p,{children:"Removes a tournamentRecord from shared state."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"removeTournamentRecord(tournamentId);\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"setstate",children:"setState"}),"\n",(0,r.jsxs)(n.p,{children:["Loads tournament records into ",(0,r.jsx)(n.a,{href:"/docs/engines/global-state",children:"Global State"}),"; supports both an array of tournamentRecords and an object with tournamentId keys."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const tournamentRecords = [tournamentRecord];\n// or const tournamentRecords = { [tournamentId]: tournamentRecord }\n\nsetsState(tournamentRecords, deepCopy, deepCopyConfig);\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["By default a deep copy of the ",(0,r.jsx)(n.code,{children:"tournamentRecords"})," is made so that mutations do not affect the source objects. An optional boolean parameter, ",(0,r.jsx)(n.em,{children:"deepCopy"})," can be set to false to override this default behavior."]})}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"deepCopyConfig"})," is an optional configuration for ",(0,r.jsx)(n.code,{children:"makeDeepCopy"}),". In server configurations when ",(0,r.jsx)(n.code,{children:"deepCopy"})," is FALSE and ",(0,r.jsx)(n.code,{children:"tournamentRecords"})," are retrieved from Mongo, for instance, there are scenarios where nodes of the JSON structure contain prototypes which cannot be converted."]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const deepCopyConfig = {\n  ignore, // optional - either an array of attributes to ignore or a function which processes attributes to determine whether to ignore them\n  toJSON, // optional - an array of attributes to convert to JSON if the attribute in question is an object with .toJSON property\n  stringify, // optional - an array of attributes to stringify\n  modulate, // optional - function to process every attribute and return custom values, or undefined, which continues normal processing\n};\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"settournamentrecord",children:"setTournamentRecord"}),"\n",(0,r.jsxs)(n.p,{children:["Adds a tournamentRecord to shared engine state, or overwrite/replace an existing ",(0,r.jsx)(n.code,{children:"tournamentRecord"})," with the same ",(0,r.jsx)(n.code,{children:"tournamentId"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"setTournamentRecord(tournamentRecord);\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"settournamentid",children:"setTournamentId"}),"\n",(0,r.jsx)(n.p,{children:"Sets a tournamentRecord in shared state as the 'default' tournament for invoked functions."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"setTournamentId(tournamentId);\n"})}),"\n",(0,r.jsx)(n.hr,{})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8322(e,n,t){t.d(n,{R:()=>a,x:()=>i});var o=t(758);const r={},s=o.createContext(r);function a(e){const n=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);