"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[5067],{3805:(e,t,n)=>{n.d(t,{xA:()=>u,yg:()=>m});var a=n(758);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,i=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),d=c(n),h=l,m=d["".concat(s,".").concat(h)]||d[h]||p[h]||i;return n?a.createElement(m,r(r({ref:t},u),{},{components:n})):a.createElement(m,r({ref:t},u))}));function m(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var i=n.length,r=new Array(i);r[0]=h;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[d]="string"==typeof e?e:l,r[1]=o;for(var c=2;c<i;c++)r[c]=n[c];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},9285:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>p,frontMatter:()=>i,metadata:()=>o,toc:()=>c});var a=n(2232),l=(n(758),n(3805));const i={title:"Schedule Governor"},r=void 0,o={unversionedId:"governors/schedule-governor",id:"governors/schedule-governor",title:"Schedule Governor",description:"allocateTeamMatchUpCourts",source:"@site/docs/governors/schedule-governor.md",sourceDirName:"governors",slug:"/governors/schedule-governor",permalink:"/tods-competition-factory/docs/governors/schedule-governor",draft:!1,tags:[],version:"current",frontMatter:{title:"Schedule Governor"},sidebar:"docs",previous:{title:"Report Governor",permalink:"/tods-competition-factory/docs/governors/report-governor"},next:{title:"Score Governor",permalink:"/tods-competition-factory/docs/governors/score-governor"}},s={},c=[{value:"allocateTeamMatchUpCourts",id:"allocateteammatchupcourts",level:2},{value:"bulkRescheduleMatchUps",id:"bulkreschedulematchups",level:2},{value:"bulkScheduleTournamentMatchUps",id:"bulkscheduletournamentmatchups",level:2},{value:"bulkUpdatePublishedEventIds",id:"bulkupdatepublishedeventids",level:2},{value:"clearMatchUpSchedule",id:"clearmatchupschedule",level:2},{value:"clearScheduledMatchUps",id:"clearscheduledmatchups",level:2},{value:"matchUpScheduleChange",id:"matchupschedulechange",level:2},{value:"reorderUpcomingMatchUps",id:"reorderupcomingmatchups",level:2},{value:"removeMatchUpCourtAssignment",id:"removematchupcourtassignment",level:2},{value:"scheduleMatchUps",id:"schedulematchups",level:2},{value:"scheduleProfileRounds",id:"scheduleprofilerounds",level:2},{value:"setMatchUpDailyLimits",id:"setmatchupdailylimits",level:2},{value:"setSchedulingProfile",id:"setschedulingprofile",level:2},{value:"validateSchedulingProfile",id:"validateschedulingprofile",level:2}],u={toc:c},d="wrapper";function p(e){let{components:t,...n}=e;return(0,l.yg)(d,(0,a.A)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"import { scheduleGovernor } from 'tods-competition-factory';\n")),(0,l.yg)("h2",{id:"allocateteammatchupcourts"},"allocateTeamMatchUpCourts"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"let result = engine.allocateTeamMatchUpCourts({\n  removePriorValues, // optional boolean\n  matchUpId,\n  courtIds,\n  drawId,\n});\n")),(0,l.yg)("hr",null),(0,l.yg)("h2",{id:"bulkreschedulematchups"},"bulkRescheduleMatchUps"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"const {\n  rescheduled, // array of inContext matchUps which have been rescheduled\n  notRescheduled, // array of inContext matchUps which have NOT been rescheduled\n  allRescheduled, // boolean indicating whether all matchUps have been rescheduled\n  dryRun, // boolean - only report what would happen without making modifications\n} = engine.bulkRescheduleMatchUps({\n  matchUpIds, // array of matchUupIds for matchUps which are to be rescheduled\n  scheduleChange: {\n    daysChange: 1, // number of days +/-\n    minutesChange: 30, // number of minutes +/-\n  },\n});\n")),(0,l.yg)("hr",null),(0,l.yg)("h2",{id:"bulkscheduletournamentmatchups"},"bulkScheduleTournamentMatchUps"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"const schedule = {\n  scheduledTime: '08:00',\n  scheduledDate: '2021-01-01T00:00', // best practice to provide ISO date string\n  venueId,\n};\nconst matchUpDetails = [{ matchUpId, schedule }];\nengine.bulkScheduleTournamentMatchUps({\n  checkChronology, // optional boolean - returns warnings for scheduling errors; throws errors when combined with errorOnAnachronism\n  errorOnAnachronism, // optional boolean - throw error if chronological scheduduling error\n  removePriorValues, // optional boolean - remove all pre-existing scheduling timeItems from matchUps\n  matchUpDetails, // optional - for use when matchUps have different scheduling details\n  matchUpIds, // optional - used together with schedule when all matchUps will have the same schedule details applied\n  schedule, // optiona - used together with matchUpIds when all matchUps will ahve the same schedule details applied\n});\n")),(0,l.yg)("h2",{id:"bulkupdatepublishedeventids"},"bulkUpdatePublishedEventIds"),(0,l.yg)("p",null,"Returns a filtered array of publishedEventIds from all eventIds which are included in a bulkMatchUpStatusUpdate. publishedEventIds can be used to determine which events to re-publish."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"const { publishedEventIds } = engine.bulkUpdatePublishedEventIds({\n  outcomes,\n});\n")),(0,l.yg)("hr",null),(0,l.yg)("h2",{id:"clearmatchupschedule"},"clearMatchUpSchedule"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"engine.clearMatchUpSchedule({\n  scheduleAttributes, // optional array of schedule constants\n  matchUpId,\n  drawId, // optional optimizes matchUp lookup, triggers drawModificationNotice\n});\n")),(0,l.yg)("hr",null),(0,l.yg)("h2",{id:"clearscheduledmatchups"},"clearScheduledMatchUps"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"engine.clearScheduledMatchUps({\n  ignoreMatchUpStatuses, // optional - specify matchUpStatus values to be ignored; defaults to all completed matchUpStatuses\n  scheduleAttributes, // optional - specify which attributes should be considered; defaults to ['scheduledDate', 'scheduledTime']\n  scheduledDates, // optional - array of dates to be cleared; only matchUps with specified scheduledDate will be cleared\n  venueIds, // optional - array of venueIds; only matchUps at specified venues will be cleared\n});\n")),(0,l.yg)("hr",null),(0,l.yg)("h2",{id:"matchupschedulechange"},"matchUpScheduleChange"),(0,l.yg)("p",null,"Swaps the schedule details of two scheduled matchUps."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"engine.matchUpScheduleChange({\n  courtDayDate: dateSelected,\n  sourceMatchUpContextIds,\n  targetMatchUpContextIds,\n  sourceCourtId,\n  targetCourtId,\n});\n")),(0,l.yg)("hr",null),(0,l.yg)("h2",{id:"reorderupcomingmatchups"},"reorderUpcomingMatchUps"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"const matchUpContextIds = [{ tournamentId, drawId, matchUpId }];\nengine.reorderUpcomingMatchUps({\n  matchUpContextIds,\n  firstToLast, // boolean - direction of reorder\n});\n")),(0,l.yg)("hr",null),(0,l.yg)("h2",{id:"removematchupcourtassignment"},"removeMatchUpCourtAssignment"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"engine.removeMatchUpCourtAssignment({\n  tournamentId,\n  courtDayDate,\n  matchUpId,\n  drawId,\n});\n")),(0,l.yg)("hr",null),(0,l.yg)("h2",{id:"schedulematchups"},"scheduleMatchUps"),(0,l.yg)("p",null,"Auto schedule matchUps on a given date using the Garman formula."),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"Parameters:")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"scheduleDate")," - Date string in format ",(0,l.yg)("inlineCode",{parentName:"li"},"YYYY-MM-DD")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"matchUpIds")," - Array of matchUpIds to schedule; auto-sorted by draw size and roundNumbers if no schedulingProfile present"),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"venueIds")," - Optional - Defaults to all venues; if single venueId provided, all matchUps scheduled at that venue"),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"periodLength")," - Optional - ",(0,l.yg)("strong",{parentName:"li"},"Scheduling block size in minutes")," (default: 30)",(0,l.yg)("ul",{parentName:"li"},(0,l.yg)("li",{parentName:"ul"},"Defines time slot granularity: 15, 30, or 60 minutes typical"),(0,l.yg)("li",{parentName:"ul"},"Affects match grouping and start time precision"),(0,l.yg)("li",{parentName:"ul"},"See ",(0,l.yg)("a",{parentName:"li",href:"/docs/concepts/automated-scheduling#period-length-scheduling-block-size"},"Period Length documentation")," for detailed explanation"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"averageMatchUpMinutes")," - Optional - Average match duration (default: 90)"),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"recoveryMinutes")," - Optional - Participant recovery time between matches (default: 0)"),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"matchUpDailyLimits")," - Optional - Policy declaration: SINGLES, DOUBLES and total limits per participant"),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"startTime")," - Optional - Schedule start time; derived from court availability if not provided"),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"endTime")," - Optional - Schedule end time; derived from court availability if not provided"),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"checkPotentialRequestConflicts"),' - Boolean - Consider participant requests when matchUp participants are "potential" (default: true)')),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"engine.scheduleMatchUps({\n  scheduleDate: '2024-06-15',\n  matchUpIds,\n  venueIds,\n  periodLength: 30, // 30-minute scheduling blocks (recommended default)\n  averageMatchUpMinutes: 90,\n  recoveryMinutes: 0,\n  matchUpDailyLimits,\n  checkPotentialRequestConflicts: true,\n});\n")),(0,l.yg)("hr",null),(0,l.yg)("h2",{id:"scheduleprofilerounds"},"scheduleProfileRounds"),(0,l.yg)("p",null,"Auto-schedules all rounds which have been specified in a ",(0,l.yg)("inlineCode",{parentName:"p"},"schedulingProfile")," which has been saved to the tournamentRecord using ",(0,l.yg)("a",{parentName:"p",href:"#setschedulingprofile"},"engine.setSchedulingProfile"),". See ",(0,l.yg)("a",{parentName:"p",href:"/docs/concepts/scheduling-profile"},"Scheduling Profile"),"."),(0,l.yg)("admonition",{type:"note"},(0,l.yg)("p",{parentName:"admonition"},"SINGLES and DOUBLES ",(0,l.yg)("inlineCode",{parentName:"p"},"matchUps")," will be scheduled, but not TEAM ",(0,l.yg)("inlineCode",{parentName:"p"},"matchUps"),".")),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"Parameters:")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"periodLength")," - Optional - ",(0,l.yg)("strong",{parentName:"li"},"Scheduling block size in minutes")," (default: 30)",(0,l.yg)("ul",{parentName:"li"},(0,l.yg)("li",{parentName:"ul"},"Controls time slot granularity and match grouping"),(0,l.yg)("li",{parentName:"ul"},"Common values: 15 (short format), 30 (standard), 60 (long format)"),(0,l.yg)("li",{parentName:"ul"},"Affects court utilization efficiency and start time precision"),(0,l.yg)("li",{parentName:"ul"},"See ",(0,l.yg)("a",{parentName:"li",href:"/docs/concepts/automated-scheduling#period-length-scheduling-block-size"},"Period Length documentation")," for detailed guidance"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"scheduleDates")," - Optional - Array of specific dates to schedule from profile"),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"clearScheduleDates")," - Optional - Boolean (true = clear all) or array of dates to clear before scheduling"),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"dryRun")," - Boolean - Preview scheduling without making changes (default: false)"),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"pro")," - Boolean - Use grid scheduling instead of Garman (default: false)"),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"checkPotentialRequestConflicts"),' - Boolean - Consider participant requests when participants are "potential" (default: true)')),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"Returns:")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"scheduledDates")," - Dates where matchUps were successfully scheduled"),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"scheduledMatchUpIds")," - Array of matchUpIds that were scheduled"),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"noTimeMatchUpIds")," - Array of matchUpIds that couldn't be fit into available time"),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"overLimitMatchUpIds")," - MatchUps not scheduled due to participant daily limits"),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"requestConflicts")," - Array of ",(0,l.yg)("inlineCode",{parentName:"li"},"{ date, conflicts }")," objects for participant conflicts")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"const result = engine.scheduleProfileRounds({\n  periodLength: 30, // 30-minute blocks (recommended for most tournaments)\n  scheduleDates, // Optional - specific dates to schedule\n  clearScheduleDates, // Optional - clear before scheduling\n  dryRun: false, // Actually schedule (true = preview only)\n  pro: false, // Use Garman formula (true = grid scheduling)\n  checkPotentialRequestConflicts: true,\n});\n\nconst { scheduledDates, scheduledMatchUpIds, noTimeMatchUpIds, overLimitMatchUpIds, requestConflicts } = result;\n")),(0,l.yg)("hr",null),(0,l.yg)("h2",{id:"setmatchupdailylimits"},"setMatchUpDailyLimits"),(0,l.yg)("p",null,"Sets daily match limits for participants. This function adds an extension to the tournament record that is enforced by all scheduling functions to prevent over-scheduling players."),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"How it Works:")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Adds a tournament-level extension that is checked by scheduling functions"),(0,l.yg)("li",{parentName:"ul"},"Persists across scheduling operations until explicitly modified"),(0,l.yg)("li",{parentName:"ul"},"Enforced during both manual and automated scheduling (including ",(0,l.yg)("inlineCode",{parentName:"li"},"scheduleMatchUps()")," and ",(0,l.yg)("inlineCode",{parentName:"li"},"scheduleProfileRounds()"),")"),(0,l.yg)("li",{parentName:"ul"},"Can be scoped to specific tournament in multi-tournament scenarios"),(0,l.yg)("li",{parentName:"ul"},"Multiple calls will override previous values entirely")),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"Parameters:")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"dailyLimits")," - Object specifying limits:",(0,l.yg)("ul",{parentName:"li"},(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"SINGLES")," - Maximum singles matches per day per participant"),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"DOUBLES")," - Maximum doubles matches per day per participant"),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"total")," - Maximum total matches per day per participant (across all event types)"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"tournamentId")," - Optional - Scope to specific tournament (for multi-tournament records)")),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"Returns:")," Standard result object with success/error status"),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"Scheduling Behavior:")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"When scheduling operations encounter participants who would exceed daily limits, those matchUps are not scheduled"),(0,l.yg)("li",{parentName:"ul"},"Use ",(0,l.yg)("inlineCode",{parentName:"li"},"overLimitMatchUpIds")," in scheduling results to identify affected matches"),(0,l.yg)("li",{parentName:"ul"},"Daily limits can be combined with scheduling policies for comprehensive protection")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"// Set tournament-wide daily limits\nengine.setMatchUpDailyLimits({\n  dailyLimits: { SINGLES: 2, DOUBLES: 1, total: 3 },\n});\n\n// Scope to specific tournament\nengine.setMatchUpDailyLimits({\n  dailyLimits: { SINGLES: 1, DOUBLES: 1, total: 2 },\n  tournamentId: 'tournament-123',\n});\n\n// Use with automated scheduling\nengine.scheduleMatchUps({\n  scheduleDate: '2024-01-15',\n  matchUpIds,\n  venueIds,\n});\n// Returns: { overLimitMatchUpIds } for matches that couldn't be scheduled\n\n// Retrieve current daily limits\nconst { matchUpDailyLimits } = engine.getMatchUpDailyLimits();\nconst { SINGLES, DOUBLES, total } = matchUpDailyLimits;\n")),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"Related Functions:")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"getMatchUpDailyLimits()")," - Query current daily limit configuration (see Query Governor)"),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"scheduleMatchUps()")," - Auto-scheduling that respects daily limits"),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"scheduleProfileRounds()")," - Profile-based scheduling that respects daily limits"),(0,l.yg)("li",{parentName:"ul"},"See ",(0,l.yg)("a",{parentName:"li",href:"/docs/concepts/scheduling-policy"},"Scheduling Policy")," for policy-based configuration")),(0,l.yg)("hr",null),(0,l.yg)("h2",{id:"setschedulingprofile"},"setSchedulingProfile"),(0,l.yg)("p",null,"See ",(0,l.yg)("a",{parentName:"p",href:"/docs/concepts/scheduling-profile"},"Scheduling Profile"),"."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"engine.setSchedulingProfile({ schedulingProfile });\n")),(0,l.yg)("hr",null),(0,l.yg)("h2",{id:"validateschedulingprofile"},"validateSchedulingProfile"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"const { valid, error } = engine.validateSchedulingProfile({\n  schedulingProfile,\n});\n")))}p.isMDXComponent=!0}}]);