"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[534],{2469(n,e,o){o.r(e),o.d(e,{assets:()=>c,contentTitle:()=>r,default:()=>m,frontMatter:()=>i,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"tools/json-to-csv","title":"JSON2CSV","description":"Converts an array of JSON objects into CSV.","source":"@site/docs/tools/json-to-csv.mdx","sourceDirName":"tools","slug":"/tools/json-to-csv","permalink":"/tods-competition-factory/docs/tools/json-to-csv","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"JSON2CSV"},"sidebar":"docs","previous":{"title":"structureSort","permalink":"/tods-competition-factory/docs/tools/structure-sort"},"next":{"title":"Tools API Reference","permalink":"/tods-competition-factory/docs/tools/tools-api"}}');var s=o(6070),a=o(8439);const i={title:"JSON2CSV"},r=void 0,c={},l=[{value:"Example: Converting MatchUps to CSV",id:"example-converting-matchups-to-csv",level:2},{value:"Setup",id:"setup",level:3},{value:"Configuration",id:"configuration",level:3},{value:"Convert to CSV",id:"convert-to-csv",level:3},{value:"Result Format",id:"result-format",level:3},{value:"Common Use Cases",id:"common-use-cases",level:3}];function d(n){const e={admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(e.p,{children:["Converts an array of ",(0,s.jsx)(e.strong,{children:"JSON"})," objects into ",(0,s.jsx)(e.strong,{children:"CSV"}),".\nProvides custom mapping of column names and merging of column values (resolves to first found in priority order), as well as custom delimiter and column/row/key joiners.\nContext attributes can be added to all rows and column-specific value replacements may be defined."]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:"import { tools } from 'tods-competition-factory';\n\nconst config = {\n  includeTransformAccessors, // optional boolean - transform accessors are included with columnAccessors\n  removeEmptyColumns, // optional boolean - remove columns which contain no values\n  columnAccessors, // optional - array of column accessors to include [ 'includeThis', 'andThis' ]\n  columnTransform, // optional - multiple generated column names can resolve to a single custom column, e.g. { 'newColumnName': ['oldColumn1', 'oldColumn2' ]}\n  columnMap, // optional - simple mapping from generated columnName to custom columnName, e.g. { 'columnName': 'newColumnName' }\n  functionMap, // optional - transform values, e.g. { 'columnName': (value) => value }\n  valuesMap, // optional - map values for specified columns, e.g. { 'columnName': { 'value': 'mappedValue '}}\n  sortOrder // optional - e.g. ['columnName1', 'columnName2'] // determine order of csv columns\n  context, // optional - object defining values which should be added to all rows, e.g. { 'columnName': 'columnValue '}\n  delimiter, // optional - defaults to '\"'\n  columnJoiner, // optional - defines how CSV columns are joined; defaults to ','\n  rowJoiner, // optional - defines how CSV lines are joined; defaults to '\\r\\n'\n  keyJoiner, // optional - defines how flattened column names are constructed; defaults to '.'\n};\nconst arrayOfJSON = [{ a: 1 }, { b: 2 }];\nconst csv = tools.JSON2CSV(arrayOfJSON, config);\n"})}),"\n",(0,s.jsxs)(e.admonition,{type:"note",children:[(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"columnTransform"})," mapped array elements are sensitive to order and will resolve to the first matching value"]}),(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"columnMap"})," should not contain new columnName(s) that are ",(0,s.jsx)(e.code,{children:"columnTransform"})," keys"]})]}),"\n",(0,s.jsx)(e.h2,{id:"example-converting-matchups-to-csv",children:"Example: Converting MatchUps to CSV"}),"\n",(0,s.jsx)(e.p,{children:"The following example demonstrates converting tournament matchUps to CSV format. This pattern is useful for exporting match results, generating reports, or integrating with external systems."}),"\n",(0,s.jsx)(e.h3,{id:"setup",children:"Setup"}),"\n",(0,s.jsxs)(e.p,{children:["Generate tournament data with ",(0,s.jsx)(e.strong,{children:"SINGLES"})," and ",(0,s.jsx)(e.strong,{children:"DOUBLES"})," draws, complete all matches, and extract matchUps:"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:"import { mocksEngine, tournamentEngine, tools } from 'tods-competition-factory';\n\n// Generate tournament with completed matches\nconst drawProfiles = [\n  { drawSize: 8, eventType: 'DOUBLES', matchUpFormat: 'SET3-S:4/TB7-F:TB10' },\n  { drawSize: 8, drawType: 'ROUND_ROBIN' },\n];\n\nconst { tournamentRecord } = mocksEngine.generateTournamentRecord({\n  completeAllMatchUps: true,\n  drawProfiles,\n});\n\n// Get all matchUps from the tournament\nconst { matchUps } = tournamentEngine\n  .setState(tournamentRecord)\n  .allTournamentMatchUps();\n"})}),"\n",(0,s.jsx)(e.h3,{id:"configuration",children:"Configuration"}),"\n",(0,s.jsxs)(e.p,{children:["The config object extracts specific columns and transforms nested participant data. The ",(0,s.jsx)(e.code,{children:"columnTransform"})," uses priority-based resolution, falling back to ",(0,s.jsx)(e.code,{children:"participantName"})," when ",(0,s.jsx)(e.code,{children:"individualParticipants"})," (for doubles) are not present:"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:"const config = {\n  rowJoiner: '|',\n  delimiter: '',\n  includeTransformAccessors: true,\n  \n  // Basic matchUp properties to include\n  columnAccessors: ['matchUpType', 'matchUpFormat', 'endDate', 'roundName'],\n  \n  // Transform nested participant data into flat columns\n  // Arrays resolve to first found value (priority order)\n  columnTransform: {\n    scoreString: ['score.scoreStringSide1'],\n    \n    // Side 1 participants (handles both singles and doubles)\n    side1Participant1: [\n      'sides.0.participant.individualParticipants.0.participantName', // Doubles: first player\n      'sides.0.participant.participantName', // Singles: player name\n    ],\n    side1Participant2: [\n      'sides.0.participant.individualParticipants.1.participantName' // Doubles: second player\n    ],\n    \n    // Side 2 participants (handles both singles and doubles)\n    side2Participant1: [\n      'sides.1.participant.individualParticipants.0.participantName', // Doubles: first player\n      'sides.1.participant.participantName', // Singles: player name\n    ],\n    side2Participant2: [\n      'sides.1.participant.individualParticipants.1.participantName' // Doubles: second player\n    ],\n  },\n};\n"})}),"\n",(0,s.jsx)(e.h3,{id:"convert-to-csv",children:"Convert to CSV"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:"const csv = tools.JSON2CSV(matchUps, config);\n"})}),"\n",(0,s.jsx)(e.h3,{id:"result-format",children:"Result Format"}),"\n",(0,s.jsx)(e.p,{children:"The resulting CSV will have columns in this order:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"matchUpType|matchUpFormat|endDate|roundName|scoreString|side1Participant1|side1Participant2|side2Participant1|side2Participant2\nSINGLES|SET3-S:4/TB7-F:TB10|2024-01-15|Round 1|7-5 6-4|John Smith||Jane Doe|\nDOUBLES|SET3-S:4/TB7-F:TB10|2024-01-15|Round 1|6-3 7-6(5)|Alice Brown|Bob White|Carol Green|Dan Black\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Key Features:"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Singles matches leave participant2 columns empty"}),"\n",(0,s.jsx)(e.li,{children:"Doubles matches populate all four participant columns"}),"\n",(0,s.jsxs)(e.li,{children:["The ",(0,s.jsx)(e.code,{children:"|"})," delimiter is used for easy visual parsing"]}),"\n",(0,s.jsx)(e.li,{children:"Nested JSON paths are flattened into column names"}),"\n",(0,s.jsx)(e.li,{children:"Priority-based resolution handles both singles and doubles with a single config"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"common-use-cases",children:"Common Use Cases"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Export for spreadsheets:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:"const config = {\n  columnJoiner: ',',\n  delimiter: '\"',\n  rowJoiner: '\\n',\n  // ... column configuration\n};\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Custom column ordering:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:"const config = {\n  sortOrder: ['roundName', 'side1Participant1', 'side2Participant1', 'scoreString'],\n  // ... other configuration\n};\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Add context to all rows:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:"const config = {\n  context: {\n    tournamentName: 'US Open 2024',\n    eventName: 'Men\\'s Singles',\n  },\n  // ... other configuration\n};\n"})})]})}function m(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}},8439(n,e,o){o.d(e,{R:()=>i,x:()=>r});var t=o(758);const s={},a=t.createContext(s);function i(n){const e=t.useContext(a);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:i(n.components),t.createElement(a.Provider,{value:e},n.children)}}}]);