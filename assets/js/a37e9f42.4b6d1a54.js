"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[9384],{698(e,t,i){i.r(t),i.d(t,{assets:()=>r,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"policies/tallyPolicy","title":"Round Robin Tally Policy","description":"A Tally Policy controls how order is determined for Round Robin groups.","source":"@site/docs/policies/tallyPolicy.md","sourceDirName":"policies","slug":"/policies/tallyPolicy","permalink":"/competition-factory/docs/policies/tallyPolicy","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Round Robin Tally Policy"}}');var n=i(6070),s=i(8322);const o={title:"Round Robin Tally Policy"},l=void 0,r={},c=[{value:"Default Behavior",id:"default-behavior",level:2},{value:"Implementation Details",id:"implementation-details",level:2}];function d(e){const t={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(t.p,{children:["A ",(0,n.jsx)(t.strong,{children:"Tally Policy"})," controls how order is determined for Round Robin groups."]}),"\n",(0,n.jsxs)(t.p,{children:["See ",(0,n.jsx)(t.a,{href:"/docs/governors/policy-governor#attachpolicies",children:"engine.attachPolicies"}),"."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:"const roundRobinTally = {\n  groupOrderKey: 'matchUpsWon', // possible to group by tieMatchUpsWon, tieSinglesWon, tieDoublesWon, matchUpsWon, pointsWon, gamesWon, setsWon, gamesPct, setsPct, pointsPct, matchUpsPct\n  groupTotalGamesPlayed: false, // optional - when true will calculate % of games won based on total group games played rather than participant games played\n  groupTotalSetsPlayed: false, // optional - when true will calculate % of sets won based on total group sets played rather than participant sets played\n  headToHead: { disabled: false },\n  tallyDirectives: [\n    // these are the default values if no tallyDirectives provided; edit to suit\n    // groupTotals scopes the tally calculations to all sets or games or matches played by all participants\n    // idsFilter scopes the tally calculations to only tied participants\n    // with { idsFilter: false } the ratio is calculated from all group matchUps\n    // with { idsFilter: true } the ratio is calculated from matchUps including tied participants\n    // when { maxParticipants: 2 } is defined, the rule only applies when # of participants is <= maxParticipants\n    // any attribute/idsFilter combination can be selectively disabled for Head to Head calculations\n    { attribute: 'matchUpsPct', idsFilter: false, disbleHeadToHead: false },\n    { attribute: 'allDefaults', reversed: true, idsFilter: false }, // reversed: true => reverses default which is greatest to least\n    {\n      attribute: 'tieMatchUpsPct',\n      idsFilter: false,\n      disbleHeadToHead: false,\n    },\n    { attribute: 'setsPct', idsFilter: false, disbleHeadToHead: false },\n    { attribute: 'gamesPct', idsFilter: false, disbleHeadToHead: false },\n    { attribute: 'pointsPct', idsFilter: false, disbleHeadToHead: false },\n    { attribute: 'matchUpsPct', idsFilter: true, disbleHeadToHead: false },\n    { attribute: 'tieMatchUpsPct', idsFilter: true, disbleHeadToHead: false },\n    { attribute: 'setsPct', idsFilter: true, disbleHeadToHead: false },\n    { attribute: 'gamesPct', idsFilter: true, disbleHeadToHead: false },\n    { attribute: 'pointsPct', idsFilter: true, disbleHeadToHead: false },\n  ],\n  excludeMatchUpStatuses: [], // matchUpStatuses to exclude from calculations, e.g. ABANDONED, INCOMPLETE\n  setsCreditForDefaults: false, // whether or not to award e.g. 2 sets won for participant who wins by opponent DEFAULT\n  setsCreditForWalkovers: false, // whether or not to award e.g. 2 sets won for participant who wins by opponent WALKOVER\n  setsCreditForRetirements: false, // whether or not to award e.g. 2 sets won for participant who wins by opponent RETIREMENT\n  gamesCreditForDefaults: false, // whether or not to award e.g. 12 games won for participant who wins by opponent DEFAULT\n  gamesCreditForWalkovers: false, // whether or not to award e.g. 12 games won for participant who wins by opponent WALKOVER\n  gamesCreditForRetirements: false, // whether or not to award e.g. 2 sets won for participant who wins by opponent RETIREMENT\n  gamesCreditForTiebreakSets: true, // defaults to true; whether to count a tiebreak set as a game won, e.g. 6-2 2-6 [10-3]\n  GEMscore: ['matchUpsPct', 'tieMatchUpsPct', 'setsPct', 'gamesPct', 'pointsPct'],\n  precision: 3, // controls % rounding in tally results, e.g. precision of 3 returns .667 whereas precision 5 returns .66667\n};\n\nengine.attachPolicies({ policyDefinitions: { roundRobinTally } });\n"})}),"\n",(0,n.jsx)(t.h2,{id:"default-behavior",children:"Default Behavior"}),"\n",(0,n.jsx)(t.p,{children:"Round Robin group tally logic by default implements the following guidelines:"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:"The participant who wins the most matches is the winner."}),"\n",(0,n.jsx)(t.li,{children:"If two players are tied, then the winner of their head-to-head match is the winner."}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"If three or more participants are tied, tie are broken as follows:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"The head-to-head win-loss record in matches involving just the tied players;"}),"\n",(0,n.jsx)(t.li,{children:"The participant with the highest percentage of sets won of all sets completed;"}),"\n",(0,n.jsx)(t.li,{children:"The head-to-head win-loss record in matches involving the players who remain tied;"}),"\n",(0,n.jsx)(t.li,{children:"The participant with the highest percentage of games won of all games completed;"}),"\n",(0,n.jsx)(t.li,{children:"The head-to-head win-loss record in matches involving the players who remain tied;"}),"\n",(0,n.jsx)(t.li,{children:"The participant with the highest percentage of sets won of sets completed among players in the group under consideration;"}),"\n",(0,n.jsx)(t.li,{children:"The head-to-head win-loss record in matches involving the players who remain tied;"}),"\n",(0,n.jsx)(t.li,{children:"The participant with the highest percentage of games won of games completed among the players under consideration; and"}),"\n",(0,n.jsx)(t.li,{children:"The head-to-head win-loss record in matches involving the players who remain tied."}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"implementation-details",children:"Implementation Details"}),"\n",(0,n.jsxs)(t.p,{children:["After initial separation of participants by ",(0,n.jsx)(t.code,{children:"matchUpsWon"}),",\nthe implementation is configurable by supplying an array of ",(0,n.jsx)(t.code,{children:"tallyDirectives"})," in the ",(0,n.jsx)(t.strong,{children:"Tally Policy"}),"."]}),"\n",(0,n.jsxs)(t.p,{children:["The algorithm relies on the values availble in the calculated ",(0,n.jsx)(t.code,{children:"participantResults"})," and works as follows:"]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"separate participants into groups by a given attribute"}),"\n",(0,n.jsx)(t.li,{children:"a group with a single participant is 'resolved'"}),"\n",(0,n.jsx)(t.li,{children:"groups of two participants are resolved by head-to-head (if not disabled/if participants faced each other)"}),"\n",(0,n.jsx)(t.li,{children:"groups of three or more search for an attribute that will separate them into smaller groups"}),"\n",(0,n.jsxs)(t.li,{children:["participantResults scoped to the members of a group and recalculated when ",(0,n.jsx)(t.code,{children:"{ idsFilter: true }"})]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},8322(e,t,i){i.d(t,{R:()=>o,x:()=>l});var a=i(758);const n={},s=a.createContext(n);function o(e){const t=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),a.createElement(s.Provider,{value:t},e.children)}}}]);