"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[6586],{3805:(n,t,e)=>{e.d(t,{xA:()=>l,yg:()=>m});var o=e(758);function a(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function r(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,o)}return e}function i(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?r(Object(e),!0).forEach((function(t){a(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):r(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function s(n,t){if(null==n)return{};var e,o,a=function(n,t){if(null==n)return{};var e,o,a={},r=Object.keys(n);for(o=0;o<r.length;o++)e=r[o],t.indexOf(e)>=0||(a[e]=n[e]);return a}(n,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);for(o=0;o<r.length;o++)e=r[o],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(n,e)&&(a[e]=n[e])}return a}var p=o.createContext({}),c=function(n){var t=o.useContext(p),e=t;return n&&(e="function"==typeof n?n(t):i(i({},t),n)),e},l=function(n){var t=c(n.components);return o.createElement(p.Provider,{value:t},n.children)},u="mdxType",d={inlineCode:"code",wrapper:function(n){var t=n.children;return o.createElement(o.Fragment,{},t)}},y=o.forwardRef((function(n,t){var e=n.components,a=n.mdxType,r=n.originalType,p=n.parentName,l=s(n,["components","mdxType","originalType","parentName"]),u=c(e),y=a,m=u["".concat(p,".").concat(y)]||u[y]||d[y]||r;return e?o.createElement(m,i(i({ref:t},l),{},{components:e})):o.createElement(m,i({ref:t},l))}));function m(n,t){var e=arguments,a=t&&t.mdxType;if("string"==typeof n||a){var r=e.length,i=new Array(r);i[0]=y;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=n,s[u]="string"==typeof n?n:a,i[1]=s;for(var c=2;c<r;c++)i[c]=e[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,e)}y.displayName="MDXCreateElement"},7945:(n,t,e)=>{e.r(t),e.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var o=e(2232),a=(e(758),e(3805));const r={title:"Subscriptions"},i=void 0,s={unversionedId:"engines/subscriptions",id:"engines/subscriptions",title:"Subscriptions",description:"Subscriptions enable external methods to be called when certain events occur while the Competition Factory engines are mutating a tournament document.",source:"@site/docs/engines/subscriptions.md",sourceDirName:"engines",slug:"/engines/subscriptions",permalink:"/tods-competition-factory/docs/engines/subscriptions",draft:!1,tags:[],version:"current",frontMatter:{title:"Subscriptions"},sidebar:"docs",previous:{title:"Mutation Engines",permalink:"/tods-competition-factory/docs/engines/mutation-engines"},next:{title:"Custom Engines",permalink:"/tods-competition-factory/docs/engines/custom-engines"}},p={},c=[],l={toc:c},u="wrapper";function d({components:n,...t}){return(0,a.yg)(u,(0,o.A)({},l,t,{components:n,mdxType:"MDXLayout"}),(0,a.yg)("p",null,"Subscriptions enable external methods to be called when certain events occur while the Competition Factory engines are mutating a tournament document."),(0,a.yg)("p",null,"The payload for each subscription is an array of objects, with each element of the array having been produced by an ",(0,a.yg)("inlineCode",{parentName:"p"},"addNotice")," statement within engine methods. Subscription methods are called ",(0,a.yg)("strong",{parentName:"p"},(0,a.yg)("em",{parentName:"strong"},"after"))," an engine method completes, not during execution."),(0,a.yg)("admonition",{type:"info"},(0,a.yg)("p",{parentName:"admonition"},"All engine methods may be passed the additional parameter ",(0,a.yg)("inlineCode",{parentName:"p"},"{ delayNotify: true }"),", in which case subscription methods are ",(0,a.yg)("strong",{parentName:"p"},(0,a.yg)("em",{parentName:"strong"},"not"))," called until a subsequent engine method is invoked.")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-js"},"const subscriptions = {\n  [topicConstants.AUDIT]: (payload) => {},\n\n  [topicConstants.ADD_MATCHUPS]: (payload) => {},\n  [topicConstants.DELETED_MATCHUP_IDS]: (payload) => {},\n  [topicConstants.MODIFY_MATCHUP]: (payload) => {},\n\n  // factory will use generated or generate inContextMatchUp (for updating public site)\n  // this can be used on client but may not have all participantContext options\n  [topicConstants.UPDATE_INCONTEXT_MATCHUP]: (payload) => {},\n\n  [topicConstants.PUBLISH_EVENT]: (payload) => {},\n  [topicConstants.UNPUBLISH_EVENT]: (payload) => {},\n\n  [topicConstants.PUBLISH_EVENT_SEEDING]: (payload) => {},\n  [topicConstants.UNPUBLISH_EVENT_SEEDING]: (payload) => (),\n\n  [topicConstants.PUBLISH_ORDER_OF_PLAY]: (payload) => {},\n  [topicConstants.UNPUBLISH_ORDER_OF_PLAY]: (payload) => (),\n\n  [topicConstants.ADD_VENUE]: (payload) => {},\n  [topicConstants.MODIFY_VENUE]: (payload) => {},\n  [topicConstants.DELETE_VENUE]: (payload) => {},\n\n  [topicConstants.add_participants]: (payload) => {},\n  [topicConstants.MODIFY_PARTICIPANTS]: (payload) => {},\n  [topicConstants.DELETE_PARTICIPANTS]: (payload) => {},\n\n  [topicConstants.MODIFY_POSITION_ASSIGNMENTS]: (payload) => {},\n  [topicConstants.MODIFY_SEED_ASSIGNMENTS]: (payload) => {},\n\n  [topicConstants.ADD_DRAW_DEFINITION]: (payload) => {},\n  [topicConstants.MODIFY_DRAW_DEFINITION]: (payload) => {},\n  [topicConstants.DELETED_DRAW_IDS]: (payload) => {},\n\n  [topicConstants.MODIFY_TOURNAMENT_DETAIL]: (payload) => {},\n  [topicContants.ADD_SCALE_ITEMS]: (payload) => {},\n  [topicConstants.DATA_ISSUE]: (payload) => {},\n\n  // to notify of all mutations { methods, params }\n  [topicConstants.MUTATIONS]: (payload) => {},\n};\n")),(0,a.yg)("p",null,"Subscriptions are defined once for all engines."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-js"},"import { globalState: { setSubcriptions } } from 'tods-competition-factory';\n\nsetSubscriptions(subscriptions);\n")))}d.isMDXComponent=!0}}]);