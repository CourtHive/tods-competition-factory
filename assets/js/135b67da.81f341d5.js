"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[9898],{5606(e,n,t){t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"governors/entries-governor","title":"Entries Governor","description":"addDrawEntries","source":"@site/docs/governors/entries-governor.md","sourceDirName":"governors","slug":"/governors/entries-governor","permalink":"/tods-competition-factory/docs/governors/entries-governor","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Entries Governor"},"sidebar":"docs","previous":{"title":"Draws Governor","permalink":"/tods-competition-factory/docs/governors/draws-governor"},"next":{"title":"Event Governor","permalink":"/tods-competition-factory/docs/governors/event-governor"}}');var r=t(6070),s=t(8439);const a={title:"Entries Governor"},o=void 0,d={},l=[{value:"addDrawEntries",id:"adddrawentries",level:2},{value:"addEventEntries",id:"addevententries",level:2},{value:"Category Validation",id:"category-validation",level:3},{value:"addEventEntryPairs",id:"addevententrypairs",level:2},{value:"checkValidEntries",id:"checkvalidentries",level:2},{value:"destroyGroupEntry",id:"destroygroupentry",level:2},{value:"destroyPairEntry",id:"destroypairentry",level:2},{value:"modifyEntriesStatus",id:"modifyentriesstatus",level:2},{value:"modifyEventEntries",id:"modifyevententries",level:2},{value:"setEntryPosition",id:"setentryposition",level:2},{value:"setEntryPositions",id:"setentrypositions",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"import { entriesGovernor } from 'tods-competition-factory';\n"})}),"\n",(0,r.jsx)(n.h2,{id:"adddrawentries",children:"addDrawEntries"}),"\n",(0,r.jsxs)(n.p,{children:["Bulk add an array of ",(0,r.jsx)(n.code,{children:"participantIds"})," to a specific ",(0,r.jsx)(n.strong,{children:"stage"})," of a draw with a specific ",(0,r.jsx)(n.strong,{children:"entryStatus"}),". Will fail if ",(0,r.jsx)(n.code,{children:"participantIds"})," are not already present in ",(0,r.jsx)(n.code,{children:"event.entries"}),". Use ",(0,r.jsx)(n.code,{children:"addEventEntries"})," to add to both ",(0,r.jsx)(n.code,{children:"event"})," and ",(0,r.jsx)(n.code,{children:"drawDefinition"})," at the same time."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"engine.addDrawEntries({\n  suppressDuplicateEntries, // do not throw error on duplicates; instead notify to DATA_ISSUE subscribers\n  ignoreStageSpace, // optional boolean to disable checking available positions\n  entryStageSequence, // optional - applies to qualifying\n  autoEntryPositions, // optional - keeps entries ordered by entryStage/entryStatus and auto-increments\n  entryStatus: ALTERNATE, // optional\n  entryStage: MAIN, // optional\n  participantIds,\n  eventId,\n  drawId,\n});\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"addevententries",children:"addEventEntries"}),"\n",(0,r.jsxs)(n.p,{children:["Adds ",(0,r.jsx)(n.code,{children:"participantIds"})," to ",(0,r.jsx)(n.code,{children:"event.entries"}),"; optionally pass drawId to add participantIds to ",(0,r.jsx)(n.code,{children:"flightProfile.flight[].drawEntries"})," at the same time."]}),"\n",(0,r.jsx)(n.p,{children:"Supports optional validation of participant eligibility against event category constraints (age ranges, rating requirements)."}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["Will ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.em,{children:"not"})})," throw an error if unable to add entries into specified ",(0,r.jsx)(n.code,{children:"flightProfile.flight[].drawEntries"}),",\nwhich can occur if a ",(0,r.jsx)(n.code,{children:"drawDefinition"})," has already been generated and an attempt is made to add\na participant with ",(0,r.jsx)(n.code,{children:"entryStatus: DIRECT_ACCEPTANCE"}),"."]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"engine.addEventEntries({\n  suppressDuplicateEntries, // do not throw error on duplicates; instead notify to DATA_ISSUE subscribers\n  entryStatus: ALTERNATE, // optional; defaults to DIRECT_ACCEPTANCE\n  entryStage: MAIN, // optional; defaults to MAIN\n  autoEntryPositions, // optional - keeps entries ordered by entryStage/entryStatus and auto-increments\n  enforceCategory, // optional - validate against event category (age/rating); defaults to false\n  enforceGender, // optional - validate gender; defaults to true\n  participantIds,\n  eventId,\n  drawId, // optional - will add participantIds to specified flightProfile.flight[].drawEntries and drawDefinition.entries (if possible)\n});\n"})}),"\n",(0,r.jsx)(n.h3,{id:"category-validation",children:"Category Validation"}),"\n",(0,r.jsxs)(n.p,{children:["When ",(0,r.jsx)(n.code,{children:"enforceCategory: true"}),", validates participants against event category constraints:"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Age Validation"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Participant must be valid throughout entire event period (start to end date)"}),"\n",(0,r.jsxs)(n.li,{children:["Requires ",(0,r.jsx)(n.code,{children:"person.birthDate"})," if age restrictions exist"]}),"\n",(0,r.jsxs)(n.li,{children:["Combined age categories (e.g., ",(0,r.jsx)(n.code,{children:"C50-70"}),") are automatically skipped for individuals"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Rating Validation"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Participant must have rating matching ",(0,r.jsx)(n.code,{children:"category.ratingType"})]}),"\n",(0,r.jsxs)(n.li,{children:["Rating value must fall within ",(0,r.jsx)(n.code,{children:"ratingMin"}),"/",(0,r.jsx)(n.code,{children:"ratingMax"})," range"]}),"\n",(0,r.jsx)(n.li,{children:"Uses most recent rating from participant's scale items"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Rejection Response"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const result = engine.addEventEntries({\n  participantIds: ['player1', 'player2', 'player3'],\n  enforceCategory: true,\n  eventId,\n});\n\nif (result.error) {\n  // result.context.categoryRejections contains detailed rejection information\n  result.context.categoryRejections.forEach((rejection) => {\n    console.log(`${rejection.participantName}:`);\n    rejection.rejectionReasons.forEach((reason) => {\n      console.log(`  - ${reason.reason}`);\n      console.log(`    Details:`, reason.details);\n    });\n  });\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"See:"})," ",(0,r.jsx)(n.a,{href:"/docs/concepts/events/entries#category-validation",children:"Entries - Category Validation"})," for comprehensive documentation and examples."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"addevententrypairs",children:"addEventEntryPairs"}),"\n",(0,r.jsxs)(n.p,{children:["Add ",(0,r.jsx)(n.strong,{children:"PAIR"})," participant to an event. Creates new ",(0,r.jsx)(n.code,{children:"{ participantType: PAIR }"})," participants if the combination of ",(0,r.jsx)(n.code,{children:"individualParticipantIds"})," does not already exist."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"engine.addEventEntryPairs({\n  allowDuplicateParticipantIdPairs, // optional - boolean - allow multiple pair participants with the same individualParticipantIds\n  uuids, // optional - array of UUIDs to use for newly created pairs\n  entryStatus: ALTERNATE, // optional\n  entryStage: QUALIFYING, // optional\n  participantIdPairs,\n  eventId,\n});\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"checkvalidentries",children:"checkValidEntries"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const { error, success } = engine.checkValidEntries({\n  consideredEntries, // optional array of entries to check\n  enforceGender, // optional boolean - defaults to true\n  eventId, // required\n});\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"destroygroupentry",children:"destroyGroupEntry"}),"\n",(0,r.jsxs)(n.p,{children:['Removes a "grouping" entry from a event and adds the ',(0,r.jsx)(n.code,{children:"individualParticipantIds"})," to entries. Grouping entries are ",(0,r.jsx)(n.code,{children:"participantType"})," ",(0,r.jsx)(n.strong,{children:"TEAM"})," and ",(0,r.jsx)(n.strong,{children:"PAIR"}),", both of which include ",(0,r.jsx)(n.code,{children:"individualParticipantIds"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"engine.destroyGroupEntry({\n  participantId,\n  eventId,\n\n  entryStatus, // optional - new entryStatus for individualParticipantIds\n  removeGroupParticipant, // optional - removes group participant from tournament participants\n});\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"destroypairentry",children:"destroyPairEntry"}),"\n",(0,r.jsxs)(n.p,{children:["Removes a ",(0,r.jsx)(n.code,{children:"{ participantType: PAIR }"})," entry from an event and adds the individualParticipantIds to entries as entryStatus: UNGROUPED"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"engine.destroyPairEntry({\n  participantId,\n  eventId,\n});\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"modifyentriesstatus",children:"modifyEntriesStatus"}),"\n",(0,r.jsx)(n.p,{children:"Modify the entryStatus of participants already in an event or flight/draw. Does not allow participants assigned positions in structures to have an entryStatus of WITHDRAWN."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const result = engine.modifyEntriesStatus({\n  autoEntryPositions, // optional - keeps entries ordered by entryStage/entryStatus and auto-increments\n  participantIds, // ids of participants whose entryStatus will be modified\n  entryStatus, // new entryStatus\n  entryStage, // optional - e.g. QUALIFYING\n  eventSync, // optional - if there is only a single drawDefinition in event, keep event.entries in sync\n  extension, // optional - { name, value } - add if value; removes if value is undefined\n  eventId, // id of event where the modification(s) will occur\n  drawId, // optional - scope to a specific flight/draw\n  stage, // optional - scope to a specific stage\n});\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"modifyevententries",children:"modifyEventEntries"}),"\n",(0,r.jsx)(n.p,{children:"Modify the entries for an event. For DOUBLES events automatically create PAIR participants if not already present."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"engine.modifyEventEntries({\n  entryStatus = DIRECT_ACCEPTANCE,\n  unpairedParticipantIds = [],\n  participantIdPairs = [],\n  entryStage = MAIN,\n  eventId,\n})\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"setentryposition",children:"setEntryPosition"}),"\n",(0,r.jsx)(n.p,{children:"Set entry position a single event entry"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"engine.setEntryPosition({\n  entryPosition,\n  participantId,\n  eventId, // optional if drawId is provided\n  drawId, // optional if eventId is provided\n});\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"setentrypositions",children:"setEntryPositions"}),"\n",(0,r.jsx)(n.p,{children:"Set entry position for multiple event entries."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"engine.setEntryPositions({\n  entryPositions, // array of [{ entryPosition: 1, participantId: 'participantid' }]\n  eventId, // optional if drawId is provided\n  drawId, // optional if eventId is provided\n});\n"})}),"\n",(0,r.jsx)(n.hr,{})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8439(e,n,t){t.d(n,{R:()=>a,x:()=>o});var i=t(758);const r={},s=i.createContext(r);function a(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);