"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[1146],{6918(n,i,e){e.r(i),e.d(i,{assets:()=>a,contentTitle:()=>r,default:()=>p,frontMatter:()=>s,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"policies/consolationPolicy","title":"Voluntary Consolation Policy","description":"The Voluntary Consolation Policy (POLICYTYPEVOLUNTARY_CONSOLATION) controls eligibility for voluntary consolation draws based on participant performance in the main draw. This allows tournament directors to set criteria for which players can opt into consolation events.","source":"@site/docs/policies/consolationPolicy.md","sourceDirName":"policies","slug":"/policies/consolationPolicy","permalink":"/competition-factory/docs/policies/consolationPolicy","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Voluntary Consolation Policy"},"sidebar":"docs","previous":{"title":"Progression Policy","permalink":"/competition-factory/docs/policies/progressionPolicy"},"next":{"title":"Competitive Bands Policy","permalink":"/competition-factory/docs/policies/competitiveBands"}}');var t=e(6070),l=e(8322);const s={title:"Voluntary Consolation Policy"},r=void 0,a={},c=[{value:"Policy Structure",id:"policy-structure",level:2},{value:"Basic Examples",id:"basic-examples",level:2},{value:"Limit to First-Round Losers",id:"limit-to-first-round-losers",level:3},{value:"Limit to Early-Round Losers",id:"limit-to-early-round-losers",level:3},{value:"No Winners Allowed",id:"no-winners-allowed",level:3},{value:"Retrieving Eligible Participants",id:"retrieving-eligible-participants",level:2},{value:"Real-World Examples",id:"real-world-examples",level:2},{value:"32-Draw With 16-Player Consolation",id:"32-draw-with-16-player-consolation",level:3},{value:"Progressive Consolation Eligibility",id:"progressive-consolation-eligibility",level:3},{value:"Policy Application",id:"policy-application",level:2},{value:"Drawing From Eligible Pool",id:"drawing-from-eligible-pool",level:3},{value:"Notes",id:"notes",level:2},{value:"Related Methods",id:"related-methods",level:2}];function d(n){const i={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.p,{children:["The ",(0,t.jsx)(i.strong,{children:"Voluntary Consolation Policy"})," (",(0,t.jsx)(i.code,{children:"POLICY_TYPE_VOLUNTARY_CONSOLATION"}),") controls eligibility for voluntary consolation draws based on participant performance in the main draw. This allows tournament directors to set criteria for which players can opt into consolation events."]}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"Policy Type:"})," ",(0,t.jsx)(i.code,{children:"voluntaryConsolation"})]}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.strong,{children:"When to Use:"})}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Limiting consolation entry to early-round losers"}),"\n",(0,t.jsx)(i.li,{children:"Preventing strong players from dominating consolation"}),"\n",(0,t.jsx)(i.li,{children:"Setting maximum wins before consolation ineligibility"}),"\n",(0,t.jsx)(i.li,{children:"Defining finishing round limits for consolation entry"}),"\n",(0,t.jsx)(i.li,{children:"Ensuring competitive balance in consolation draws"}),"\n"]}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h2,{id:"policy-structure",children:"Policy Structure"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-ts",children:"{\n  voluntaryConsolation: {\n    policyName?: string;             // Optional policy identifier\n    winsLimit?: number;              // Max wins in main draw before ineligible\n    finishingRoundLimit?: number;    // Min finishing round for eligibility\n  }\n}\n"})}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.strong,{children:"Attributes:"})}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"winsLimit"}),": Maximum number of wins a participant can have in the main draw and still be eligible for consolation. Default: no limit."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"finishingRoundLimit"}),": Minimum ",(0,t.jsx)(i.code,{children:"finishingRound"})," value required for eligibility. Participants who advance beyond this round are ineligible. Default: no limit."]}),"\n"]}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h2,{id:"basic-examples",children:"Basic Examples"}),"\n",(0,t.jsx)(i.h3,{id:"limit-to-first-round-losers",children:"Limit to First-Round Losers"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-js",children:"import { POLICY_TYPE_VOLUNTARY_CONSOLATION } from 'tods-competition-factory';\n\n// Only first-round losers can enter consolation\nconst firstRoundOnlyPolicy = {\n  [POLICY_TYPE_VOLUNTARY_CONSOLATION]: {\n    policyName: 'First Round Losers Only',\n    winsLimit: 0,              // No wins allowed\n    finishingRoundLimit: 1      // Must lose in round 1\n  }\n};\n\ntournamentEngine.attachPolicies({\n  policyDefinitions: firstRoundOnlyPolicy,\n  drawId: 'main-draw-id'\n});\n"})}),"\n",(0,t.jsx)(i.h3,{id:"limit-to-early-round-losers",children:"Limit to Early-Round Losers"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-js",children:"// Players who win 1 or fewer matches can enter\nconst earlyLosersPolicy = {\n  [POLICY_TYPE_VOLUNTARY_CONSOLATION]: {\n    policyName: 'Early Round Losers',\n    winsLimit: 1,               // Maximum 1 win\n    finishingRoundLimit: 2      // Lost in round 1 or 2\n  }\n};\n"})}),"\n",(0,t.jsx)(i.h3,{id:"no-winners-allowed",children:"No Winners Allowed"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-js",children:"// Only players with zero wins\nconst noWinnersPolicy = {\n  [POLICY_TYPE_VOLUNTARY_CONSOLATION]: {\n    policyName: 'No Winners',\n    winsLimit: 0\n    // finishingRoundLimit not specified - any round OK as long as no wins\n  }\n};\n"})}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h2,{id:"retrieving-eligible-participants",children:"Retrieving Eligible Participants"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-js",children:"// Get list of participants eligible for voluntary consolation\nconst { eligibleParticipants } = tournamentEngine.getEligibleVoluntaryConsolationParticipants({\n  drawId: 'main-draw-id'\n});\n\nconsole.log(eligibleParticipants.length); // e.g., 16\neligibleParticipants.forEach(participant => {\n  console.log(`${participant.participantName}: ${participant.matchUpsWon} wins`);\n});\n\n// With custom policy parameters (override attached policy)\nconst { eligibleParticipants } = tournamentEngine.getEligibleVoluntaryConsolationParticipants({\n  drawId: 'main-draw-id',\n  winsLimit: 1,\n  finishingRoundLimit: 2\n});\n"})}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h2,{id:"real-world-examples",children:"Real-World Examples"}),"\n",(0,t.jsx)(i.h3,{id:"32-draw-with-16-player-consolation",children:"32-Draw With 16-Player Consolation"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-js",children:"// Generate main draw\nconst { drawDefinition } = tournamentEngine.generateDrawDefinition({\n  drawSize: 32,\n  drawType: SINGLE_ELIMINATION,\n  eventId: 'event-1'\n});\n\n// Attach voluntary consolation policy\ntournamentEngine.attachPolicies({\n  policyDefinitions: {\n    [POLICY_TYPE_VOLUNTARY_CONSOLATION]: {\n      winsLimit: 0,           // First-round losers only\n      finishingRoundLimit: 1\n    }\n  },\n  drawId: drawDefinition.drawId\n});\n\n// After first round completes, get eligible participants\nconst { eligibleParticipants } = \n  tournamentEngine.getEligibleVoluntaryConsolationParticipants({\n    drawId: drawDefinition.drawId\n  });\n\n// Should return 16 first-round losers\nconsole.log(eligibleParticipants.length); // 16\n"})}),"\n",(0,t.jsx)(i.h3,{id:"progressive-consolation-eligibility",children:"Progressive Consolation Eligibility"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-js",children:"// Different consolation stages for different losers\nconst policies = {\n  // Feed consolation: first-round losers\n  feedConsolation: {\n    [POLICY_TYPE_VOLUNTARY_CONSOLATION]: {\n      policyName: 'Feed Consolation',\n      winsLimit: 0,\n      finishingRoundLimit: 1\n    }\n  },\n  \n  // Playoff consolation: second-round losers\n  playoffConsolation: {\n    [POLICY_TYPE_VOLUNTARY_CONSOLATION]: {\n      policyName: 'Playoff Consolation',\n      winsLimit: 1,\n      finishingRoundLimit: 2\n    }\n  }\n};\n\n// Attach to different consolation structures\ntournamentEngine.attachPolicies({\n  policyDefinitions: policies.feedConsolation,\n  drawId: 'feed-consolation-draw-id'\n});\n\ntournamentEngine.attachPolicies({\n  policyDefinitions: policies.playoffConsolation,\n  drawId: 'playoff-consolation-draw-id'\n});\n"})}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h2,{id:"policy-application",children:"Policy Application"}),"\n",(0,t.jsx)(i.h3,{id:"drawing-from-eligible-pool",children:"Drawing From Eligible Pool"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-js",children:"// Get eligible participants\nconst { eligibleParticipants } = \n  tournamentEngine.getEligibleVoluntaryConsolationParticipants({\n    drawId: 'main-draw-id'\n  });\n\n// Generate consolation draw with eligible participants\nconst participantIds = eligibleParticipants.map(p => p.participantId);\n\nconst { drawDefinition: consolationDraw } = \n  tournamentEngine.generateDrawDefinition({\n    drawSize: participantIds.length,\n    drawType: SINGLE_ELIMINATION,\n    eventId: 'consolation-event-id',\n    seedingProfile: WATERFALL,\n    automated: true,\n    participants: eligibleParticipants\n  });\n"})}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h2,{id:"notes",children:"Notes"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["Policy is checked when calling ",(0,t.jsx)(i.code,{children:"getEligibleVoluntaryConsolationParticipants"})]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"winsLimit"}),": Counts only completed wins in main draw"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"finishingRoundLimit"}),": Based on ",(0,t.jsx)(i.code,{children:"finishingRound"})," attribute of matchUps"]}),"\n",(0,t.jsx)(i.li,{children:"Participants not yet eliminated are excluded (still active in main draw)"}),"\n",(0,t.jsx)(i.li,{children:"Participants already in consolation draw are excluded"}),"\n",(0,t.jsx)(i.li,{children:"Walkover matches count as wins for the winner"}),"\n",(0,t.jsx)(i.li,{children:"Retired matches count as wins for the winner"}),"\n",(0,t.jsx)(i.li,{children:"Both parameters are optional - omit for no restriction"}),"\n",(0,t.jsx)(i.li,{children:"Policy can be overridden by passing parameters directly to eligibility method"}),"\n",(0,t.jsx)(i.li,{children:"Typically attached at draw level (main draw)"}),"\n",(0,t.jsx)(i.li,{children:"Used during consolation draw generation to determine eligible pool"}),"\n"]}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h2,{id:"related-methods",children:"Related Methods"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"getEligibleVoluntaryConsolationParticipants"})," - Query eligible participants"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"generateDrawDefinition"})," - Create consolation draws with eligibility filters"]}),"\n",(0,t.jsxs)(i.li,{children:["See ",(0,t.jsx)(i.a,{href:"/docs/concepts/draw-types#pre-defined-draw-types",children:"Draw Types"})," for consolation draw generation"]}),"\n"]})]})}function p(n={}){const{wrapper:i}={...(0,l.R)(),...n.components};return i?(0,t.jsx)(i,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}},8322(n,i,e){e.d(i,{R:()=>s,x:()=>r});var o=e(758);const t={},l=o.createContext(t);function s(n){const i=o.useContext(l);return o.useMemo(function(){return"function"==typeof n?n(i):{...i,...n}},[i,n])}function r(n){let i;return i=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:s(n.components),o.createElement(l.Provider,{value:i},n.children)}}}]);