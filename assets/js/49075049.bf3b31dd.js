"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[6947],{527(n,e,t){t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"concepts/matchup-context","title":"MatchUp Context & Hydration","description":"Overview","source":"@site/docs/concepts/matchup-context.mdx","sourceDirName":"concepts","slug":"/concepts/matchup-context","permalink":"/competition-factory/docs/concepts/matchup-context","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"MatchUp Context & Hydration"},"sidebar":"docs","previous":{"title":"MatchUps Overview","permalink":"/competition-factory/docs/concepts/matchup-overview"},"next":{"title":"matchUp filtering","permalink":"/competition-factory/docs/concepts/matchup-filtering"}}');var r=t(6070),o=t(8322);const s={title:"MatchUp Context & Hydration"},i=void 0,c={},l=[{value:"Overview",id:"overview",level:2},{value:"Key Concepts",id:"key-concepts",level:3},{value:"Default Behavior",id:"default-behavior",level:2},{value:"Context Attributes Added",id:"context-attributes-added",level:2},{value:"Tournament/Event/Draw Context",id:"tournamenteventdraw-context",level:3},{value:"Round Information",id:"round-information",level:3},{value:"Scheduling Context",id:"scheduling-context",level:3},{value:"Participant Hydration",id:"participant-hydration",level:3},{value:"Next MatchUps (Progression)",id:"next-matchups-progression",level:2},{value:"Example: Final Match Progression",id:"example-final-match-progression",level:3},{value:"Extensions Handling",id:"extensions-handling",level:2},{value:"Extension Name Conversion",id:"extension-name-conversion",level:3},{value:"Context Filters",id:"context-filters",level:2},{value:"Performance Considerations",id:"performance-considerations",level:2},{value:"When to Disable Context",id:"when-to-disable-context",level:3},{value:"Deep Copy Overhead",id:"deep-copy-overhead",level:3},{value:"Participant Context Control",id:"participant-context-control",level:2},{value:"Additional Context Parameters",id:"additional-context-parameters",level:2},{value:"Custom Context Data",id:"custom-context-data",level:3},{value:"Tournament Record Context",id:"tournament-record-context",level:3},{value:"Practical Examples",id:"practical-examples",level:2},{value:"Display Match Information",id:"display-match-information",level:3},{value:"Results with Full Context",id:"results-with-full-context",level:3},{value:"Build Draw Bracket",id:"build-draw-bracket",level:3},{value:"Related Documentation",id:"related-documentation",level:2}];function d(n){const e={a:"a",br:"br",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Context"})," (or ",(0,r.jsx)(e.strong,{children:"hydration"}),") is the process of enriching matchUp objects with additional information from their containing structures (draws, events, tournaments). By default, all matchUp retrieval methods return hydrated matchUps with contextual data that makes them easier to work with in applications."]}),"\n",(0,r.jsx)(e.h3,{id:"key-concepts",children:"Key Concepts"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Hydration"}),": Adding contextual information not stored directly on the matchUp",(0,r.jsx)(e.br,{}),"\n",(0,r.jsx)(e.strong,{children:"inContext"}),": Parameter controlling whether context is added (default: ",(0,r.jsx)(e.code,{children:"true"}),")",(0,r.jsx)(e.br,{}),"\n",(0,r.jsx)(e.strong,{children:"Deep Copies"}),": All returned matchUps are deep copies, safe to modify",(0,r.jsx)(e.br,{}),"\n",(0,r.jsx)(e.strong,{children:"Extensions"}),": Custom data automatically converted to underscore-prefixed attributes",(0,r.jsx)(e.br,{}),"\n",(0,r.jsx)(e.strong,{children:"Participant Hydration"}),": Participants attached to matchUp sides"]}),"\n",(0,r.jsx)(e.h2,{id:"default-behavior",children:"Default Behavior"}),"\n",(0,r.jsxs)(e.p,{children:["By default, ",(0,r.jsx)(e.strong,{children:"all matchUp retrieval methods return hydrated matchUps"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"// These are equivalent:\nconst { matchUps: m1 } = tournamentEngine.allTournamentMatchUps();\nconst { matchUps: m2 } = tournamentEngine.allTournamentMatchUps({ inContext: true });\n\n// Matchups include context\nconsole.log(m1[0].tournamentName); // \u2713 Available\nconsole.log(m1[0].eventName); // \u2713 Available\nconsole.log(m1[0].roundName); // \u2713 Available\n\n// To get raw matchUps without context:\nconst { matchUps: raw } = tournamentEngine.allTournamentMatchUps({\n  inContext: false,\n});\nconsole.log(raw[0].tournamentName); // \u2717 undefined\n"})}),"\n",(0,r.jsx)(e.h2,{id:"context-attributes-added",children:"Context Attributes Added"}),"\n",(0,r.jsx)(e.h3,{id:"tournamenteventdraw-context",children:"Tournament/Event/Draw Context"}),"\n",(0,r.jsx)(e.p,{children:"Every hydrated matchUp includes identifiers and names from its hierarchy:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"{\n  matchUpId: 'match-123',\n\n  // Tournament context\n  tournamentId: 'tournament-456',\n  tournamentName: 'Summer Championships',\n\n  // Event context\n  eventId: 'event-789',\n  eventName: 'Men\\'s Singles',\n  eventType: 'SINGLES',\n\n  // Draw context\n  drawId: 'draw-012',\n  drawName: 'Main Draw',\n\n  // Structure context\n  structureId: 'structure-345',\n  structureName: 'Qualifying',\n  structureOrder: 1,\n  structureAbbreviation: 'Q'\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"round-information",children:"Round Information"}),"\n",(0,r.jsx)(e.p,{children:"Round details help understand match position in draw:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"{\n  roundNumber: 2,\n  roundName: 'Round of 16',\n  roundPosition: 3,\n\n  // For team events\n  roundOrder: 1,\n\n  // Playoff rounds (consolation/playoff structures)\n  finishingPositionRange: {\n    winner: [9, 16],\n    loser: [17, 32]\n  }\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"scheduling-context",children:"Scheduling Context"}),"\n",(0,r.jsx)(e.p,{children:"When scheduled, matchUps include venue and court information:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"{\n  schedule: {\n    scheduledDate: '2024-06-15',\n    scheduledTime: '14:00',\n    courtId: 'court-5',\n    courtName: 'Court 5',\n    venueId: 'venue-123',\n    startTime: '2024-06-15T14:05:00Z',\n    endTime: '2024-06-15T15:45:00Z'\n  },\n\n  // Additional venue context\n  venueName: 'Stadium',\n  venueAbbreviation: 'STD',\n\n  // Order of play\n  courtOrder: 2,  // Second match on this court\n  scheduleTime: '14:00'\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"participant-hydration",children:"Participant Hydration"}),"\n",(0,r.jsx)(e.p,{children:"Participants are automatically attached to matchUp sides:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"{\n  sides: [\n    {\n      sideNumber: 1,\n      participantId: 'player-1',\n\n      // Hydrated participant\n      participant: {\n        participantId: 'player-1',\n        participantType: 'INDIVIDUAL',\n        participantRole: 'COMPETITOR',\n        person: {\n          personId: 'person-1',\n          standardFamilyName: 'Federer',\n          standardGivenName: 'Roger',\n          nationalityCode: 'SUI',\n        },\n      },\n    },\n    {\n      sideNumber: 2,\n      participantId: 'player-2',\n      participant: {\n        participantId: 'player-2',\n        participantType: 'INDIVIDUAL',\n        person: {\n          standardFamilyName: 'Nadal',\n          standardGivenName: 'Rafael',\n          nationalityCode: 'ESP',\n        },\n      },\n    },\n  ];\n}\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"See:"})," ",(0,r.jsx)(e.a,{href:"./participant-context",children:"Participant Context"})," for participant hydration options."]}),"\n",(0,r.jsx)(e.h2,{id:"next-matchups-progression",children:"Next MatchUps (Progression)"}),"\n",(0,r.jsxs)(e.p,{children:["The ",(0,r.jsx)(e.code,{children:"nextMatchUps"})," parameter adds winner/loser progression information:"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"const { matchUps } = tournamentEngine.allDrawMatchUps({\n  drawId: 'draw-123',\n  nextMatchUps: true,\n});\n\nmatchUps.forEach((matchUp) => {\n  // Winner progression\n  if (matchUp.winnerTo) {\n    console.log('Winner advances to:');\n    console.log(`  MatchUp: ${matchUp.winnerTo.matchUpId}`);\n    console.log(`  Round: ${matchUp.winnerTo.roundNumber}`);\n    console.log(`  Position: ${matchUp.winnerTo.roundPosition}`);\n  }\n\n  // Loser progression (feed-in/consolation)\n  if (matchUp.loserTo) {\n    console.log('Loser feeds to:');\n    console.log(`  MatchUp: ${matchUp.loserTo.matchUpId}`);\n    console.log(`  Round: ${matchUp.loserTo.roundNumber}`);\n  }\n});\n"})}),"\n",(0,r.jsx)(e.h3,{id:"example-final-match-progression",children:"Example: Final Match Progression"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"{\n  matchUpId: 'semifinal-1',\n  roundName: 'Semifinals',\n\n  winnerTo: {\n    matchUpId: 'final',\n    roundNumber: 4,\n    roundName: 'Final',\n    roundPosition: 1\n  },\n\n  loserTo: {\n    matchUpId: 'bronze-medal',\n    roundNumber: 4,\n    roundName: 'Bronze Medal Match',\n    roundPosition: 1\n  }\n}\n"})}),"\n",(0,r.jsx)(e.h2,{id:"extensions-handling",children:"Extensions Handling"}),"\n",(0,r.jsx)(e.p,{children:"Extensions (custom data) are automatically converted to underscore-prefixed attributes:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"// Original matchUp has extension\n{\n  matchUpId: 'match-123',\n  extensions: [\n    {\n      name: 'courtPreference',\n      value: 'Stadium Court'\n    },\n    {\n      name: 'broadcastMatch',\n      value: true\n    }\n  ]\n}\n\n// When hydrated, extensions become attributes\nconst { matchUps } = tournamentEngine.allTournamentMatchUps();\n\nconsole.log(matchUps[0]._courtPreference);  // 'Stadium Court'\nconsole.log(matchUps[0]._broadcastMatch);   // true\n\n// Original extensions array still present\nconsole.log(matchUps[0].extensions);  // Array of extension objects\n"})}),"\n",(0,r.jsx)(e.h3,{id:"extension-name-conversion",children:"Extension Name Conversion"}),"\n",(0,r.jsx)(e.p,{children:"Extension names are converted to camelCase with underscore prefix:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"// Extension name \u2192 Attribute name\n'courtPreference'      \u2192 _courtPreference\n'broadcast_match'      \u2192 _broadcastMatch\n'estimated-duration'   \u2192 _estimatedDuration\n'PRIORITY_LEVEL'       \u2192 _priorityLevel\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"See:"})," ",(0,r.jsx)(e.a,{href:"./extensions",children:"Extensions"})," for detailed extension documentation."]}),"\n",(0,r.jsx)(e.h2,{id:"context-filters",children:"Context Filters"}),"\n",(0,r.jsxs)(e.p,{children:["Use ",(0,r.jsx)(e.code,{children:"contextFilters"})," to retrieve matchUps based on contextual attributes:"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"const { matchUps } = tournamentEngine.allTournamentMatchUps({\n  contextFilters: {\n    // Schedule-based filters\n    scheduledDate: '2024-06-15',\n    scheduledDates: ['2024-06-15', '2024-06-16'],\n    venueIds: ['venue-123'],\n    courtIds: ['court-1', 'court-2'],\n\n    // Structure filters\n    stages: ['QUALIFYING', 'MAIN'],\n    structureIds: ['structure-1'],\n\n    // Round filters\n    roundNumbers: [1, 2],\n\n    // Event filters\n    eventIds: ['event-123'],\n\n    // Draw filters\n    drawIds: ['draw-456'],\n  },\n});\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"See:"})," ",(0,r.jsx)(e.a,{href:"./matchup-filtering",children:"MatchUp Filtering"})," for comprehensive filtering options."]}),"\n",(0,r.jsx)(e.h2,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,r.jsx)(e.h3,{id:"when-to-disable-context",children:"When to Disable Context"}),"\n",(0,r.jsx)(e.p,{children:"Disable context when:"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Processing large numbers of matchUps for internal calculations"}),"\n",(0,r.jsx)(e.li,{children:"Only need core matchUp data (IDs, scores, status)"}),"\n",(0,r.jsx)(e.li,{children:"Implementing high-frequency operations"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"// Fast: minimal data\nconst { matchUps } = tournamentEngine.allTournamentMatchUps({\n  inContext: false,\n});\n\n// Full featured: more memory/processing\nconst { matchUps } = tournamentEngine.allTournamentMatchUps({\n  inContext: true,\n});\n"})}),"\n",(0,r.jsx)(e.h3,{id:"deep-copy-overhead",children:"Deep Copy Overhead"}),"\n",(0,r.jsx)(e.p,{children:"All hydrated matchUps are deep copies, ensuring data integrity but using more memory:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"// Get hydrated matchUps\nconst { matchUps } = tournamentEngine.allTournamentMatchUps();\n\n// Safe to modify without affecting tournament state\nmatchUps[0].customProperty = 'value'; // \u2713 Safe\ndelete matchUps[0].roundName; // \u2713 Safe\n\n// Tournament state unchanged\nconst { matchUps: fresh } = tournamentEngine.allTournamentMatchUps();\nconsole.log(fresh[0].customProperty); // undefined\nconsole.log(fresh[0].roundName); // Still present\n"})}),"\n",(0,r.jsx)(e.h2,{id:"participant-context-control",children:"Participant Context Control"}),"\n",(0,r.jsx)(e.p,{children:"Control how participants are hydrated within matchUps:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"const { matchUps } = tournamentEngine.allTournamentMatchUps({\n  // Include full participant details (default)\n  inContext: true,\n\n  // Exclude specific PII\n  policyDefinitions: {\n    participant: {\n      excludePersonDetails: ['addresses', 'contacts'],\n    },\n  },\n});\n\n// Participants included but privacy respected\nmatchUps[0].sides.forEach((side) => {\n  console.log(side.participant.person.standardFamilyName); // \u2713 Available\n  console.log(side.participant.person.addresses); // \u2717 undefined\n});\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"See:"})," ",(0,r.jsx)(e.a,{href:"./participant-context",children:"Participant Context"})," for complete hydration options."]}),"\n",(0,r.jsx)(e.h2,{id:"additional-context-parameters",children:"Additional Context Parameters"}),"\n",(0,r.jsx)(e.h3,{id:"custom-context-data",children:"Custom Context Data"}),"\n",(0,r.jsx)(e.p,{children:"Pass additional contextual data to retrieval methods:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"const { matchUps } = tournamentEngine.allTournamentMatchUps({\n  context: {\n    myCustomField: 'value',\n    applicationData: { key: 'value' },\n  },\n});\n\n// Custom context available on all matchUps\nmatchUps.forEach((matchUp) => {\n  console.log(matchUp.myCustomField); // 'value'\n  console.log(matchUp.applicationData); // { key: 'value' }\n});\n"})}),"\n",(0,r.jsx)(e.h3,{id:"tournament-record-context",children:"Tournament Record Context"}),"\n",(0,r.jsx)(e.p,{children:"When working with tournament records directly, context can be passed:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"import { getMatchUps } from 'tods-competition-factory';\n\nconst matchUps = getMatchUps({\n  tournamentRecord,\n  inContext: true,\n  context: {\n    additionalData: 'value',\n  },\n});\n"})}),"\n",(0,r.jsx)(e.h2,{id:"practical-examples",children:"Practical Examples"}),"\n",(0,r.jsx)(e.h3,{id:"display-match-information",children:"Display Match Information"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"const { matchUps } = tournamentEngine.allTournamentMatchUps({\n  matchUpFilters: {\n    matchUpStatuses: ['TO_BE_PLAYED'],\n  },\n  contextFilters: {\n    scheduledDate: '2024-06-15',\n  },\n});\n\nmatchUps.forEach((matchUp) => {\n  console.log(`${matchUp.tournamentName}`);\n  console.log(`  ${matchUp.eventName} - ${matchUp.roundName}`);\n  console.log(`  ${matchUp.courtName} at ${matchUp.scheduleTime}`);\n\n  matchUp.sides.forEach((side) => {\n    const name = side.participant?.person?.standardFamilyName || 'TBD';\n    console.log(`    ${name}`);\n  });\n});\n"})}),"\n",(0,r.jsx)(e.h3,{id:"results-with-full-context",children:"Results with Full Context"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"const { matchUps } = tournamentEngine.allTournamentMatchUps({\n  matchUpFilters: {\n    matchUpStatuses: ['COMPLETED'],\n  },\n});\n\nmatchUps.forEach((matchUp) => {\n  const winner = matchUp.sides.find((s) => s.sideNumber === matchUp.winningSide);\n  const loser = matchUp.sides.find((s) => s.sideNumber !== matchUp.winningSide);\n\n  console.log(`${matchUp.eventName} ${matchUp.roundName}`);\n  console.log(`  ${winner.participant.person.standardFamilyName} d.`);\n  console.log(`  ${loser.participant.person.standardFamilyName}`);\n  console.log(`  ${matchUp.score.scoreStringSide1}`);\n\n  // Custom extension data\n  if (matchUp._broadcastMatch) {\n    console.log('  [BROADCAST MATCH]');\n  }\n});\n"})}),"\n",(0,r.jsx)(e.h3,{id:"build-draw-bracket",children:"Build Draw Bracket"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"const { matchUps } = tournamentEngine.allDrawMatchUps({\n  drawId: 'draw-123',\n  nextMatchUps: true,\n});\n\n// Group by round\nconst rounds = matchUps.reduce((acc, matchUp) => {\n  const round = matchUp.roundNumber;\n  if (!acc[round]) acc[round] = [];\n  acc[round].push(matchUp);\n  return acc;\n}, {});\n\n// Display bracket structure\nObject.entries(rounds)\n  .sort(([a], [b]) => a - b)\n  .forEach(([roundNum, matches]) => {\n    console.log(`\\n${matches[0].roundName}:`);\n    matches.forEach((matchUp) => {\n      console.log(`  Match ${matchUp.roundPosition}`);\n      matchUp.sides.forEach((side) => {\n        const name = side.participant?.person?.standardFamilyName || 'BYE';\n        console.log(`    ${name}`);\n      });\n      if (matchUp.winnerTo) {\n        console.log(`    \u2192 Winner to Round ${matchUp.winnerTo.roundNumber}`);\n      }\n    });\n  });\n"})}),"\n",(0,r.jsx)(e.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:(0,r.jsx)(e.a,{href:"./matchup-overview",children:"MatchUp Overview"})})," - Core matchUp concepts and types"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:(0,r.jsx)(e.a,{href:"./matchup-filtering",children:"MatchUp Filtering"})})," - Comprehensive filtering options"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:(0,r.jsx)(e.a,{href:"./participant-context",children:"Participant Context"})})," - Participant hydration details"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:(0,r.jsx)(e.a,{href:"./extensions",children:"Extensions"})})," - Custom data and extensions"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:(0,r.jsx)(e.a,{href:"/docs/governors/query-governor#alltournamentmatchups",children:"Query Governor"})})," - Complete API reference"]}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(d,{...n})}):d(n)}},8322(n,e,t){t.d(e,{R:()=>s,x:()=>i});var a=t(758);const r={},o=a.createContext(r);function s(n){const e=a.useContext(o);return a.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:s(n.components),a.createElement(o.Provider,{value:e},n.children)}}}]);