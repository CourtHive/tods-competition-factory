"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[6586],{3395(n,t,o){o.r(t),o.d(t,{assets:()=>r,contentTitle:()=>c,default:()=>l,frontMatter:()=>i,metadata:()=>e,toc:()=>p});const e=JSON.parse('{"id":"engines/subscriptions","title":"Subscriptions","description":"Subscriptions enable external methods to be called when certain events occur while the Competition Factory engines are mutating a tournament document.","source":"@site/docs/engines/subscriptions.md","sourceDirName":"engines","slug":"/engines/subscriptions","permalink":"/competition-factory/docs/engines/subscriptions","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Subscriptions"},"sidebar":"docs","previous":{"title":"Mutation Engines","permalink":"/competition-factory/docs/engines/mutation-engines"},"next":{"title":"Custom Engines","permalink":"/competition-factory/docs/engines/custom-engines"}}');var s=o(6070),a=o(8439);const i={title:"Subscriptions"},c=void 0,r={},p=[];function d(n){const t={admonition:"admonition",code:"code",em:"em",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"Subscriptions enable external methods to be called when certain events occur while the Competition Factory engines are mutating a tournament document."}),"\n",(0,s.jsxs)(t.p,{children:["The payload for each subscription is an array of objects, with each element of the array having been produced by an ",(0,s.jsx)(t.code,{children:"addNotice"})," statement within engine methods. Subscription methods are called ",(0,s.jsx)(t.strong,{children:(0,s.jsx)(t.em,{children:"after"})})," an engine method completes, not during execution."]}),"\n",(0,s.jsx)(t.admonition,{type:"info",children:(0,s.jsxs)(t.p,{children:["All engine methods may be passed the additional parameter ",(0,s.jsx)(t.code,{children:"{ delayNotify: true }"}),", in which case subscription methods are ",(0,s.jsx)(t.strong,{children:(0,s.jsx)(t.em,{children:"not"})})," called until a subsequent engine method is invoked."]})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:"const subscriptions = {\n  [topicConstants.AUDIT]: (payload) => {},\n\n  [topicConstants.ADD_MATCHUPS]: (payload) => {},\n  [topicConstants.DELETED_MATCHUP_IDS]: (payload) => {},\n  [topicConstants.MODIFY_MATCHUP]: (payload) => {},\n\n  // factory will use generated or generate inContextMatchUp (for updating public site)\n  // this can be used on client but may not have all participantContext options\n  [topicConstants.UPDATE_INCONTEXT_MATCHUP]: (payload) => {},\n\n  [topicConstants.PUBLISH_EVENT]: (payload) => {},\n  [topicConstants.UNPUBLISH_EVENT]: (payload) => {},\n\n  [topicConstants.PUBLISH_EVENT_SEEDING]: (payload) => {},\n  [topicConstants.UNPUBLISH_EVENT_SEEDING]: (payload) => (),\n\n  [topicConstants.PUBLISH_ORDER_OF_PLAY]: (payload) => {},\n  [topicConstants.UNPUBLISH_ORDER_OF_PLAY]: (payload) => (),\n\n  [topicConstants.ADD_VENUE]: (payload) => {},\n  [topicConstants.MODIFY_VENUE]: (payload) => {},\n  [topicConstants.DELETE_VENUE]: (payload) => {},\n\n  [topicConstants.add_participants]: (payload) => {},\n  [topicConstants.MODIFY_PARTICIPANTS]: (payload) => {},\n  [topicConstants.DELETE_PARTICIPANTS]: (payload) => {},\n\n  [topicConstants.MODIFY_POSITION_ASSIGNMENTS]: (payload) => {},\n  [topicConstants.MODIFY_SEED_ASSIGNMENTS]: (payload) => {},\n\n  [topicConstants.ADD_DRAW_DEFINITION]: (payload) => {},\n  [topicConstants.MODIFY_DRAW_DEFINITION]: (payload) => {},\n  [topicConstants.DELETED_DRAW_IDS]: (payload) => {},\n\n  [topicConstants.MODIFY_TOURNAMENT_DETAIL]: (payload) => {},\n  [topicContants.ADD_SCALE_ITEMS]: (payload) => {},\n  [topicConstants.DATA_ISSUE]: (payload) => {},\n\n  // to notify of all mutations { methods, params }\n  [topicConstants.MUTATIONS]: (payload) => {},\n};\n"})}),"\n",(0,s.jsx)(t.p,{children:"Subscriptions are defined once for all engines."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:"import { globalState: { setSubcriptions } } from 'tods-competition-factory';\n\nsetSubscriptions(subscriptions);\n"})})]})}function l(n={}){const{wrapper:t}={...(0,a.R)(),...n.components};return t?(0,s.jsx)(t,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}},8439(n,t,o){o.d(t,{R:()=>i,x:()=>c});var e=o(758);const s={},a=e.createContext(s);function i(n){const t=e.useContext(a);return e.useMemo(function(){return"function"==typeof n?n(t):{...t,...n}},[t,n])}function c(n){let t;return t=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:i(n.components),e.createElement(a.Provider,{value:t},n.children)}}}]);