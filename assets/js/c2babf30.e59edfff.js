"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[2670],{1313(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"policies/maxParticipants","title":"maxParticipants Attribute - Threshold-Based Tiebreaking","description":"The maxParticipants attribute in round robin tally directives implements a universal pattern found across sports: different tie-breaking rules apply based on how many teams are tied.","source":"@site/docs/policies/maxParticipants.md","sourceDirName":"policies","slug":"/policies/maxParticipants","permalink":"/competition-factory/docs/policies/maxParticipants","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{}}');var a=i(6070),s=i(8322);const r={},l="maxParticipants Attribute - Threshold-Based Tiebreaking",c={},d=[{value:"Overview",id:"overview",level:2},{value:"Why This Exists",id:"why-this-exists",level:2},{value:"Mathematical Reality: Circular Ties",id:"mathematical-reality-circular-ties",level:3},{value:"Sports Precedents",id:"sports-precedents",level:2},{value:"1. Edmonton U15AA Invitational Hockey Tournament",id:"1-edmonton-u15aa-invitational-hockey-tournament",level:3},{value:"2. Play K Sports Baseball",id:"2-play-k-sports-baseball",level:3},{value:"3. Ripken Baseball Tournaments",id:"3-ripken-baseball-tournaments",level:3},{value:"4. USA Pickleball Tournaments",id:"4-usa-pickleball-tournaments",level:3},{value:"5. EMFC 3v3 Soccer Challenge Cup",id:"5-emfc-3v3-soccer-challenge-cup",level:3},{value:"6. DSBN Volleyball Tournaments",id:"6-dsbn-volleyball-tournaments",level:3},{value:"7. Major Sports Organizations",id:"7-major-sports-organizations",level:3},{value:"Implementation in Policies",id:"implementation-in-policies",level:2},{value:"Example 1: Tournament of Champions (TOC) Policy",id:"example-1-tournament-of-champions-toc-policy",level:3},{value:"Example 2: Custom Hockey Tournament Policy",id:"example-2-custom-hockey-tournament-policy",level:3},{value:"Example 3: Baseball Tournament Policy",id:"example-3-baseball-tournament-policy",level:3},{value:"When to Use maxParticipants",id:"when-to-use-maxparticipants",level:2},{value:"\u2705 <strong>Use maxParticipants for:</strong>",id:"-use-maxparticipants-for",level:3},{value:"\u274c <strong>Don&#39;t use maxParticipants for:</strong>",id:"-dont-use-maxparticipants-for",level:3},{value:"Circular Tie Scenarios",id:"circular-tie-scenarios",level:2},{value:"Example 1: 3-Team Circular Tie",id:"example-1-3-team-circular-tie",level:3},{value:"Example 2: 4-Team Partial Circular Tie",id:"example-2-4-team-partial-circular-tie",level:3},{value:"Testing maxParticipants",id:"testing-maxparticipants",level:2},{value:"Test 1: Verify 2-team behavior",id:"test-1-verify-2-team-behavior",level:3},{value:"Test 2: Verify 3+-team skipping",id:"test-2-verify-3-team-skipping",level:3},{value:"Test 3: Compare outcomes",id:"test-3-compare-outcomes",level:3},{value:"Implementation Details",id:"implementation-details",level:2},{value:"Source Code",id:"source-code",level:3},{value:"Common Patterns",id:"common-patterns",level:2},{value:"Pattern 1: Two-Stage Head-to-Head",id:"pattern-1-two-stage-head-to-head",level:3},{value:"Pattern 2: Skip Head-to-Head for Large Ties",id:"pattern-2-skip-head-to-head-for-large-ties",level:3},{value:"Pattern 3: Threshold-Based Escalation",id:"pattern-3-threshold-based-escalation",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Always Provide Fallback",id:"1-always-provide-fallback",level:3},{value:"2. Document Tournament-Specific Rules",id:"2-document-tournament-specific-rules",level:3},{value:"3. Consider Circular Tie Probability",id:"3-consider-circular-tie-probability",level:3},{value:"Conclusion",id:"conclusion",level:2}];function o(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"maxparticipants-attribute---threshold-based-tiebreaking",children:"maxParticipants Attribute - Threshold-Based Tiebreaking"})}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"maxParticipants"})," attribute in round robin tally directives implements a universal pattern found across sports: ",(0,a.jsx)(n.strong,{children:"different tie-breaking rules apply based on how many teams are tied"}),"."]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Purpose:"})," Apply a tally directive ONLY when the number of tied participants does not exceed a specified threshold."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Common usage:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"{\n  attribute: 'matchUpsPct',\n  idsFilter: true,\n  maxParticipants: 2  // Only apply when exactly 2 teams are tied\n}\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Behavior:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Rule applies when: ",(0,a.jsx)(n.code,{children:"tiedParticipants.length <= maxParticipants"})]}),"\n",(0,a.jsxs)(n.li,{children:["Rule is skipped when: ",(0,a.jsx)(n.code,{children:"tiedParticipants.length > maxParticipants"})]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"why-this-exists",children:"Why This Exists"}),"\n",(0,a.jsx)(n.h3,{id:"mathematical-reality-circular-ties",children:"Mathematical Reality: Circular Ties"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"With 2 teams tied:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"Team A beat Team B\n\u2192 Clear winner: Team A places higher\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"With 3+ teams tied (circular tie possible):"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"Team A beat Team B (1-0 head-to-head)\nTeam B beat Team C (1-0 head-to-head)\nTeam C beat Team A (1-0 head-to-head)\n\nHead-to-head records among tied teams:\n- Team A: 1 win, 1 loss (50%)\n- Team B: 1 win, 1 loss (50%)\n- Team C: 1 win, 1 loss (50%)\n\n\u2192 Head-to-head CANNOT break the tie!\n"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Solution:"})," When 3+ teams are tied, skip head-to-head and use the next tiebreaker (games won, sets won, etc.)."]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"sports-precedents",children:"Sports Precedents"}),"\n",(0,a.jsx)(n.p,{children:"This pattern appears universally across sports, with explicit threshold-based rules:"}),"\n",(0,a.jsx)(n.h3,{id:"1-edmonton-u15aa-invitational-hockey-tournament",children:"1. Edmonton U15AA Invitational Hockey Tournament"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Explicitly separate sections:"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:'"Two Teams Tied":'})}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Head-to-head result"}),"\n",(0,a.jsx)(n.li,{children:"Most wins"}),"\n",(0,a.jsx)(n.li,{children:"Goal average (goals for divided by goals against)"}),"\n",(0,a.jsx)(n.li,{children:"Fewest penalty minutes"}),"\n",(0,a.jsx)(n.li,{children:"Coin toss"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:'"Three or More Teams Tied":'})}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Performance among tied teams only (wins, goal average)"}),"\n",(0,a.jsx)(n.li,{children:"If still tied, performance in all group games"}),"\n",(0,a.jsx)(n.li,{children:"Coin toss"}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Critical rule:"})," ",(0,a.jsx)(n.em,{children:'"At no time will teams using this formula go back to the two-team tiebreaker."'})]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Source:"})," ",(0,a.jsx)(n.a,{href:"https://www.printyourbrackets.com/tiebreaker-in-round-robin-tournaments.html",children:"printyourbrackets.com"})]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"2-play-k-sports-baseball",children:"2. Play K Sports Baseball"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Explicit threshold condition:"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:'"Head-to-head (only when two (2) teams are tied, and only when they have played each other). Once three (3) teams are tied in a pool, then we go to the next tie breakers."'}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Tiebreaker sequence:"})}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["Head-to-head record (",(0,a.jsx)(n.strong,{children:"only when 2 teams tied"}),")"]}),"\n",(0,a.jsx)(n.li,{children:"Runs allowed"}),"\n",(0,a.jsx)(n.li,{children:"Run differential (capped)"}),"\n",(0,a.jsx)(n.li,{children:"Coin flip"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Implementation as policy:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"{\n  tallyDirectives: [\n    { attribute: 'matchUpsPct', idsFilter: true, maxParticipants: 2 },\n    { attribute: 'pointsLost', idsFilter: false, reversed: true },\n    { attribute: 'pointsDifferential', idsFilter: false },\n  ]\n}\n"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Source:"})," ",(0,a.jsx)(n.a,{href:"https://tarrant.apaleagues.com/Uploads/tarrant/2025_AlohaChallengeRules_TarrantCounty.pdf",children:"tarrant.apaleagues.com"})]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"3-ripken-baseball-tournaments",children:"3. Ripken Baseball Tournaments"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Separate sections with different procedures:"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:'"2 Team Tie Breaker":'})}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Head to head"}),"\n",(0,a.jsx)(n.li,{children:"Fewest runs allowed"}),"\n",(0,a.jsx)(n.li,{children:"Run differential (capped at 7 per game)"}),"\n",(0,a.jsx)(n.li,{children:"Coin flip"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:'"3 or more Team Tie Breaker":'})}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Head to head among all tied teams"}),"\n",(0,a.jsx)(n.li,{children:"Fewest runs allowed among tied teams"}),"\n",(0,a.jsx)(n.li,{children:"Run differential among tied teams (capped)"}),"\n",(0,a.jsx)(n.li,{children:"If still tied, compare overall stats"}),"\n",(0,a.jsx)(n.li,{children:"Coin flip"}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Note:"})," Head-to-head must be evaluated differently when 3+ teams (among tied teams only)."]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Source:"})," ",(0,a.jsx)(n.a,{href:"https://www.districtsixbridge.org/wp-content/uploads/2018/12/Round-Robin-Fact-Sheet-.pdf",children:"districtsixbridge.org"})]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"4-usa-pickleball-tournaments",children:"4. USA Pickleball Tournaments"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Different procedures based on tie size:"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Two teams tied:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Direct head-to-head result determines placement"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Three or more teams tied:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Results among tied teams evaluated first"}),"\n",(0,a.jsx)(n.li,{children:"Then game/point differentials among tied teams"}),"\n",(0,a.jsx)(n.li,{children:"Then overall group performance"}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Source:"})," ",(0,a.jsx)(n.a,{href:"https://rules.usapickleball.org/view/rule-changes-view-all/entry/527/",children:"rules.usapickleball.org"})]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"5-emfc-3v3-soccer-challenge-cup",children:"5. EMFC 3v3 Soccer Challenge Cup"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Head-to-head conditioned on tie size:"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Two teams tied:"})}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Head-to-head result"}),"\n",(0,a.jsx)(n.li,{children:"Goal differential"}),"\n",(0,a.jsx)(n.li,{children:"Goals scored"}),"\n",(0,a.jsx)(n.li,{children:"Coin toss"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Three or more teams tied:"})}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Performance among tied teams"}),"\n",(0,a.jsx)(n.li,{children:"Goal differential among tied teams"}),"\n",(0,a.jsx)(n.li,{children:"Overall group statistics"}),"\n",(0,a.jsx)(n.li,{children:"Coin toss"}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"6-dsbn-volleyball-tournaments",children:"6. DSBN Volleyball Tournaments"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Explicit participant threshold:"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Two teams tied:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Winner of head-to-head match places higher"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Three or more teams tied:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Set ratio among tied teams"}),"\n",(0,a.jsx)(n.li,{children:"Point ratio among tied teams"}),"\n",(0,a.jsx)(n.li,{children:"Overall group performance"}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"7-major-sports-organizations",children:"7. Major Sports Organizations"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"FIFA World Cup:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"2 teams: Direct head-to-head"}),"\n",(0,a.jsx)(n.li,{children:"3+ teams: Mini-table among tied teams"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"UEFA Champions League:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"2 teams: Head-to-head points/goal difference"}),"\n",(0,a.jsx)(n.li,{children:"3+ teams: Mini-league calculation"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"NFL:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"2 teams: Head-to-head record"}),"\n",(0,a.jsx)(n.li,{children:'3+ teams: "Head-to-head sweep" (only if one team beat ALL others)'}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"USTA Team Tennis:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"2 teams: Head-to-head result"}),"\n",(0,a.jsx)(n.li,{children:"3+ teams: Match/set/game percentages among tied teams"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"ITF Davis Cup:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"2 teams: Direct tie breaker"}),"\n",(0,a.jsx)(n.li,{children:"3+ teams: Results within tied subgroup"}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"implementation-in-policies",children:"Implementation in Policies"}),"\n",(0,a.jsx)(n.h3,{id:"example-1-tournament-of-champions-toc-policy",children:"Example 1: Tournament of Champions (TOC) Policy"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"export const POLICY_ROUND_ROBIN_TALLY_TOC = {\n  [POLICY_TYPE_ROUND_ROBIN_TALLY]: {\n    policyName: 'TOC Round Robin Tally',\n    groupOrderKey: 'matchUpsPct',\n    tallyDirectives: [\n      // Head-to-head ONLY if 2 teams tied\n      { \n        attribute: 'matchUpsPct', \n        idsFilter: true, \n        maxParticipants: 2 \n      },\n      // Games percentage (all ties)\n      { attribute: 'gamesPct', idsFilter: false },\n      // Total games won (all ties)\n      { attribute: 'gamesWon', idsFilter: false },\n      // Fewest games lost (all ties)\n      { attribute: 'gamesLost', idsFilter: false, reversed: true },\n    ],\n  },\n};\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Behavior:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"2 teams tied:"})," Uses head-to-head record"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"3+ teams tied:"})," Skips head-to-head, uses games percentage immediately"]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"example-2-custom-hockey-tournament-policy",children:"Example 2: Custom Hockey Tournament Policy"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"const hockeyTournamentPolicy = {\n  [POLICY_TYPE_ROUND_ROBIN_TALLY]: {\n    policyName: 'Hockey Tournament',\n    groupOrderKey: 'matchUpsWon',\n    tallyDirectives: [\n      // Two teams tied: head-to-head\n      { \n        attribute: 'matchUpsPct', \n        idsFilter: true, \n        maxParticipants: 2 \n      },\n      // Three+ teams tied: goal average among tied teams\n      { \n        attribute: 'goalAverage', // Custom attribute\n        idsFilter: true  // Among tied teams only\n      },\n      // Still tied: overall goal average\n      { \n        attribute: 'goalAverage', \n        idsFilter: false \n      },\n      // Still tied: fewest penalty minutes\n      { \n        attribute: 'penaltyMinutes', \n        idsFilter: false, \n        reversed: true \n      },\n    ],\n  },\n};\n"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"example-3-baseball-tournament-policy",children:"Example 3: Baseball Tournament Policy"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"const baseballTournamentPolicy = {\n  [POLICY_TYPE_ROUND_ROBIN_TALLY]: {\n    policyName: 'Baseball Tournament',\n    groupOrderKey: 'matchUpsWon',\n    tallyDirectives: [\n      // Two teams: direct head-to-head\n      { \n        attribute: 'matchUpsPct', \n        idsFilter: true, \n        maxParticipants: 2 \n      },\n      // Three+: fewest runs allowed among tied teams\n      { \n        attribute: 'pointsLost', \n        idsFilter: true, \n        reversed: true \n      },\n      // Run differential (capped) among tied teams\n      { \n        attribute: 'pointsDifferential', \n        idsFilter: true \n      },\n      // Overall runs allowed\n      { \n        attribute: 'pointsLost', \n        idsFilter: false, \n        reversed: true \n      },\n    ],\n  },\n};\n"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"when-to-use-maxparticipants",children:"When to Use maxParticipants"}),"\n",(0,a.jsxs)(n.h3,{id:"-use-maxparticipants-for",children:["\u2705 ",(0,a.jsx)(n.strong,{children:"Use maxParticipants for:"})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"1. Head-to-head rules (idsFilter: true)"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"{ \n  attribute: 'matchUpsPct', \n  idsFilter: true,     // Compare only tied teams\n  maxParticipants: 2   // Only when exactly 2 tied\n}\n"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Why:"})," Head-to-head comparison is only meaningful when one team clearly beat the other. With 3+, circular ties are possible."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"2. Direct comparison attributes"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"{ \n  attribute: 'matchUpsWon', \n  idsFilter: true, \n  maxParticipants: 2 \n}\n"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Why:"})," Similar to head-to-head - direct comparison works best with 2 teams."]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsxs)(n.h3,{id:"-dont-use-maxparticipants-for",children:["\u274c ",(0,a.jsx)(n.strong,{children:"Don't use maxParticipants for:"})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"1. Percentage-based rules"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"{ \n  attribute: 'gamesPct', \n  idsFilter: false \n  // No maxParticipants needed\n}\n"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Why:"})," Percentages work equally well with 2 or 200 teams."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"2. Absolute count rules"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"{ \n  attribute: 'gamesWon', \n  idsFilter: false \n  // No maxParticipants needed\n}\n"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Why:"})," Total games won is comparable regardless of number of tied teams."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"3. Reversed (fewest) rules"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"{ \n  attribute: 'gamesLost', \n  idsFilter: false, \n  reversed: true \n  // No maxParticipants needed\n}\n"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Why:"})," Fewest games lost works with any number of teams."]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"circular-tie-scenarios",children:"Circular Tie Scenarios"}),"\n",(0,a.jsx)(n.h3,{id:"example-1-3-team-circular-tie",children:"Example 1: 3-Team Circular Tie"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Round robin results:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"Match 1: Team A 6-2 Team B  (A wins)\nMatch 2: Team B 6-3 Team C  (B wins)\nMatch 3: Team C 6-4 Team A  (C wins)\n\nStandings:\n- Team A: 1-1 (won vs B, lost vs C)\n- Team B: 1-1 (won vs C, lost vs A)\n- Team C: 1-1 (won vs A, lost vs B)\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Without maxParticipants:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"tallyDirectives: [\n  { attribute: 'matchUpsPct', idsFilter: true }\n]\n\n// All teams: 50% head-to-head (1-1)\n// Cannot break tie \u2192 stuck or requires additional logic\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"With maxParticipants:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"tallyDirectives: [\n  { attribute: 'matchUpsPct', idsFilter: true, maxParticipants: 2 },\n  { attribute: 'gamesPct', idsFilter: false }\n]\n\n// 3 teams tied \u2192 skip head-to-head\n// Use games percentage:\n// - Team A: 6-2 + 4-6 = 10-8 (55.6%)\n// - Team B: 2-6 + 6-3 = 8-9 (47.1%)\n// - Team C: 3-6 + 6-4 = 9-10 (47.4%)\n// \n// Result: A (1st), C (2nd), B (3rd) \u2713\n"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"example-2-4-team-partial-circular-tie",children:"Example 2: 4-Team Partial Circular Tie"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Round robin results (6 total matches):"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"Team A: 3-0 (beat B, C, D)\nTeam B: 1-2 (beat C, lost to A and D)\nTeam C: 1-2 (beat D, lost to A and B)\nTeam D: 1-2 (beat B, lost to A and C)\n\nStandings: B, C, D all 1-2 (tied for 2nd)\n\nHead-to-head among tied teams:\n- B beat C (but lost to D)\n- C beat D (but lost to B)\n- D beat B (but lost to C)\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"With maxParticipants: 2"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"// 3 teams tied \u2192 skip head-to-head\n// Proceed to games percentage among B, C, D\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Without maxParticipants:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"// Would try head-to-head: B, C, D all 1-1\n// Stuck in circular tie\n"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"testing-maxparticipants",children:"Testing maxParticipants"}),"\n",(0,a.jsx)(n.h3,{id:"test-1-verify-2-team-behavior",children:"Test 1: Verify 2-team behavior"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"it('maxParticipants: 2 applies head-to-head when exactly 2 teams tied', () => {\n  // Create scenario where exactly 2 teams are tied\n  // Verify head-to-head determines order\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"test-2-verify-3-team-skipping",children:"Test 2: Verify 3+-team skipping"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"it('maxParticipants: 2 skips head-to-head when 3+ teams tied', () => {\n  // Create circular tie scenario (A>B>C>A)\n  // Verify head-to-head is skipped\n  // Verify next directive is used\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"test-3-compare-outcomes",children:"Test 3: Compare outcomes"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"it('maxParticipants changes outcomes in circular ties', () => {\n  // With maxParticipants: should break tie using games\n  // Without maxParticipants: should be stuck at head-to-head\n});\n"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"implementation-details",children:"Implementation Details"}),"\n",(0,a.jsx)(n.h3,{id:"source-code",children:"Source Code"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsxs)(n.strong,{children:["From ",(0,a.jsx)(n.code,{children:"getGroupOrder.ts"}),":"]})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"// Line 286-287\nconst keepDirective = !(\n  isNumeric(directive.maxParticipants) && \n  participantIds?.length > directive.maxParticipants\n);\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Behavior:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"keepDirective = true"}),": Apply this directive"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"keepDirective = false"}),": Skip this directive, try next one"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"When does it skip?"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["When ",(0,a.jsx)(n.code,{children:"maxParticipants"})," is defined (numeric)"]}),"\n",(0,a.jsxs)(n.li,{children:["AND number of tied participants exceeds ",(0,a.jsx)(n.code,{children:"maxParticipants"})]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"common-patterns",children:"Common Patterns"}),"\n",(0,a.jsx)(n.h3,{id:"pattern-1-two-stage-head-to-head",children:"Pattern 1: Two-Stage Head-to-Head"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"{\n  tallyDirectives: [\n    // Stage 1: Direct head-to-head (2 teams only)\n    { \n      attribute: 'matchUpsPct', \n      idsFilter: true, \n      maxParticipants: 2 \n    },\n    \n    // Stage 2: Head-to-head among all tied (3+ teams)\n    { \n      attribute: 'matchUpsPct', \n      idsFilter: true \n    },\n    \n    // Stage 3: Overall group performance\n    { \n      attribute: 'matchUpsPct', \n      idsFilter: false \n    },\n  ]\n}\n"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Used by:"})," FIFA, UEFA, many tournament formats"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"pattern-2-skip-head-to-head-for-large-ties",children:"Pattern 2: Skip Head-to-Head for Large Ties"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"{\n  tallyDirectives: [\n    // Only use head-to-head if 2-3 teams\n    { \n      attribute: 'matchUpsPct', \n      idsFilter: true, \n      maxParticipants: 3 \n    },\n    \n    // 4+ teams: use games percentage\n    { \n      attribute: 'gamesPct', \n      idsFilter: false \n    },\n  ]\n}\n"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Rationale:"})," With 4+ teams, likelihood of circular ties increases significantly."]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"pattern-3-threshold-based-escalation",children:"Pattern 3: Threshold-Based Escalation"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"{\n  tallyDirectives: [\n    // 2 teams: simple head-to-head\n    { \n      attribute: 'matchUpsPct', \n      idsFilter: true, \n      maxParticipants: 2 \n    },\n    \n    // 3-4 teams: games among tied teams\n    { \n      attribute: 'gamesPct', \n      idsFilter: true, \n      maxParticipants: 4 \n    },\n    \n    // 5+ teams: overall games\n    { \n      attribute: 'gamesPct', \n      idsFilter: false \n    },\n  ]\n}\n"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Used by:"})," Large tournaments with multiple groups"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,a.jsx)(n.h3,{id:"1-always-provide-fallback",children:"1. Always Provide Fallback"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"// \u2713 GOOD: Has fallback when maxParticipants filters out rule\n{\n  tallyDirectives: [\n    { attribute: 'matchUpsPct', idsFilter: true, maxParticipants: 2 },\n    { attribute: 'gamesPct', idsFilter: false }, // Fallback\n  ]\n}\n\n// \u2717 BAD: No fallback if 3+ teams tied\n{\n  tallyDirectives: [\n    { attribute: 'matchUpsPct', idsFilter: true, maxParticipants: 2 },\n    // No other rules! What happens with 3+ teams?\n  ]\n}\n"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"2-document-tournament-specific-rules",children:"2. Document Tournament-Specific Rules"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"const myTournamentPolicy = {\n  [POLICY_TYPE_ROUND_ROBIN_TALLY]: {\n    policyName: 'Spring Championship 2024',\n    // Document why maxParticipants is used\n    // \"Per tournament rules section 5.2: Head-to-head only applies \n    //  when exactly two teams are tied\"\n    tallyDirectives: [\n      { attribute: 'matchUpsPct', idsFilter: true, maxParticipants: 2 },\n      { attribute: 'gamesPct', idsFilter: false },\n    ],\n  },\n};\n"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"3-consider-circular-tie-probability",children:"3. Consider Circular Tie Probability"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Small groups (4 teams):"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Circular ties less common"}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"maxParticipants: 2"})," usually sufficient"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Large groups (8+ teams):"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Circular ties more likely"}),"\n",(0,a.jsxs)(n.li,{children:["Consider ",(0,a.jsx)(n.code,{children:"maxParticipants: 3"})," or removing head-to-head entirely"]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"maxParticipants"})," attribute implements a ",(0,a.jsx)(n.strong,{children:"universal sports rule pattern"}),": different tie-breaking procedures apply based on how many teams are tied. This is not arbitrary - it reflects the mathematical reality that head-to-head comparisons work for 2 teams but can produce circular ties with 3+ teams."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Key takeaways:"})}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\u2705 Use ",(0,a.jsx)(n.code,{children:"maxParticipants: 2"})," for head-to-head rules"]}),"\n",(0,a.jsx)(n.li,{children:"\u2705 Always provide fallback directives"}),"\n",(0,a.jsx)(n.li,{children:"\u2705 Matches real-world sports tournament rules"}),"\n",(0,a.jsx)(n.li,{children:"\u2705 Prevents futile calculations on circular ties"}),"\n",(0,a.jsx)(n.li,{children:"\u2705 Well-precedented across hockey, baseball, soccer, volleyball, pickleball, tennis, and football"}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Sports precedents:"})," Edmonton Hockey, Play K Baseball, Ripken Baseball, USA Pickleball, FIFA, UEFA, NFL, USTA, ITF, Olympics, and many more."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(o,{...e})}):o(e)}},8322(e,n,i){i.d(n,{R:()=>r,x:()=>l});var t=i(758);const a={},s=t.createContext(a);function r(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);