"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[1242],{7722(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"concepts/date-time-handling","title":"Date and Time Handling","description":"Overview","source":"@site/docs/concepts/date-time-handling.md","sourceDirName":"concepts","slug":"/concepts/date-time-handling","permalink":"/competition-factory/docs/concepts/date-time-handling","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Date and Time Handling"},"sidebar":"docs","previous":{"title":"Conflict Reporting","permalink":"/competition-factory/docs/concepts/scheduling-conflicts"},"next":{"title":"Overview","permalink":"/competition-factory/docs/concepts/publishing/publishing-overview"}}');var s=t(6070),a=t(8322);const r={title:"Date and Time Handling"},d=void 0,l={},o=[{value:"Overview",id:"overview",level:2},{value:"Date Formats Used",id:"date-formats-used",level:3},{value:"Where Dates Appear",id:"where-dates-appear",level:3},{value:"Date &amp; Time Utilities",id:"date--time-utilities",level:2},{value:"Core Functions",id:"core-functions",level:3},{value:"Date Range Generation",id:"date-range-generation",level:3},{value:"Embargo Validation",id:"embargo-validation",level:3},{value:"Timezone Utilities",id:"timezone-utilities",level:2},{value:"Validating Timezones",id:"validating-timezones",level:3},{value:"Getting UTC Offsets",id:"getting-utc-offsets",level:3},{value:"Converting Between Wall-Clock Time and UTC",id:"converting-between-wall-clock-time-and-utc",level:3},{value:"Creating Embargo Strings from Local Time",id:"creating-embargo-strings-from-local-time",level:3},{value:"Practical Pattern: Tournament-Aware Embargo",id:"practical-pattern-tournament-aware-embargo",level:3},{value:"Date Handling Across the Factory",id:"date-handling-across-the-factory",level:2},{value:"Tournament Dates",id:"tournament-dates",level:3},{value:"Active Dates",id:"active-dates",level:3},{value:"Scheduling",id:"scheduling",level:3},{value:"Time Items",id:"time-items",level:3},{value:"Future: Temporal API",id:"future-temporal-api",level:2},{value:"Related Documentation",id:"related-documentation",level:2}];function c(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(n.p,{children:["The Competition Factory handles dates and times across several domains: tournament scheduling, match timing, embargo enforcement, and timezone conversion. All temporal data uses ",(0,s.jsx)(n.strong,{children:"ISO 8601"})," format, and the factory is ",(0,s.jsx)(n.strong,{children:"zero-dependency"})," \u2014 every date, time, and timezone operation is built on platform APIs (",(0,s.jsx)(n.code,{children:"Date"}),", ",(0,s.jsx)(n.code,{children:"Intl.DateTimeFormat"}),") with no external libraries."]}),"\n",(0,s.jsx)(n.h3,{id:"date-formats-used",children:"Date Formats Used"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Context"}),(0,s.jsx)(n.th,{children:"Format"}),(0,s.jsx)(n.th,{children:"Example"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Tournament dates, scheduled dates"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"YYYY-MM-DD"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"'2024-06-15'"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Timestamps (embargo, createdAt, start/end times)"}),(0,s.jsx)(n.td,{children:"ISO 8601 with timezone"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"'2024-06-15T10:00:00Z'"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Time-of-day (scheduling)"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"HH:MM"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"'14:30'"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"IANA timezone identifiers"}),(0,s.jsx)(n.td,{children:"Region/City"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"'America/New_York'"})})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"where-dates-appear",children:"Where Dates Appear"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Tournament Record:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"startDate"})," / ",(0,s.jsx)(n.code,{children:"endDate"})," \u2014 tournament date range (",(0,s.jsx)(n.code,{children:"YYYY-MM-DD"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"localTimeZone"})," \u2014 IANA timezone identifier for the tournament venue"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"activeDates"})," \u2014 specific dates within the range when play occurs"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Time Items:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"itemDate"})," \u2014 effective date (",(0,s.jsx)(n.code,{children:"YYYY-MM-DD"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"createdAt"})," \u2014 creation timestamp (ISO 8601 with timezone)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"itemValue"})," \u2014 often contains timestamps for scheduling events"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Publishing / Embargo:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"embargo"})," \u2014 ISO 8601 timestamp with timezone (",(0,s.jsx)(n.code,{children:"Z"})," or ",(0,s.jsx)(n.code,{children:"\xb1HH:MM"})," offset required)"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Scheduling:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"scheduledDate"})," \u2014 match date (",(0,s.jsx)(n.code,{children:"YYYY-MM-DD"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"scheduledTime"})," \u2014 match time (",(0,s.jsx)(n.code,{children:"HH:MM"}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"date--time-utilities",children:"Date & Time Utilities"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"dateTime"})," object on ",(0,s.jsx)(n.code,{children:"tools"})," provides functions for working with dates and times:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"import { tools } from 'tods-competition-factory';\n"})}),"\n",(0,s.jsx)(n.h3,{id:"core-functions",children:"Core Functions"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Function"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"dateTime.formatDate(date, separator?, order?)"})}),(0,s.jsx)(n.td,{children:"Format a Date object to string"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"dateTime.extractDate(dateTimeString)"})}),(0,s.jsxs)(n.td,{children:["Extract ",(0,s.jsx)(n.code,{children:"YYYY-MM-DD"})," from a datetime string"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"dateTime.extractTime(dateTimeString)"})}),(0,s.jsxs)(n.td,{children:["Extract ",(0,s.jsx)(n.code,{children:"HH:MM"})," from a datetime string"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"dateTime.addDays(date, days)"})}),(0,s.jsx)(n.td,{children:"Add days to a date"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"dateTime.addWeek(date)"})}),(0,s.jsx)(n.td,{children:"Add 7 days to a date"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"dateTime.addMinutesToTimeString(time, minutes)"})}),(0,s.jsxs)(n.td,{children:["Add minutes to an ",(0,s.jsx)(n.code,{children:"HH:MM"})," string"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"dateTime.sameDay(date1, date2)"})}),(0,s.jsx)(n.td,{children:"Check if two dates are the same calendar day"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"dateTime.isISODateString(value)"})}),(0,s.jsx)(n.td,{children:"Validate ISO 8601 date/datetime string"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"dateTime.isValidEmbargoDate(value)"})}),(0,s.jsxs)(n.td,{children:["Validate ISO 8601 datetime ",(0,s.jsx)(n.strong,{children:"with timezone"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"dateTime.isDate(value)"})}),(0,s.jsx)(n.td,{children:"Check if value is a Date object"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"dateTime.isTimeString(value)"})}),(0,s.jsxs)(n.td,{children:["Validate ",(0,s.jsx)(n.code,{children:"HH:MM"})," format"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"dateTime.timeStringMinutes(time)"})}),(0,s.jsxs)(n.td,{children:["Convert ",(0,s.jsx)(n.code,{children:"HH:MM"})," to total minutes"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"dateTime.offsetDate(dateString)"})}),(0,s.jsx)(n.td,{children:"Create a Date from an ISO date string"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"dateTime.offsetTime(isoString?)"})}),(0,s.jsx)(n.td,{children:"Get timezone offset in milliseconds"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"dateTime.getUTCdateString(dateOrString)"})}),(0,s.jsxs)(n.td,{children:["Get ",(0,s.jsx)(n.code,{children:"YYYY-MM-DD"})," in UTC"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"dateTime.timeUTC(dateOrString?)"})}),(0,s.jsx)(n.td,{children:"Get UTC timestamp in milliseconds"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"date-range-generation",children:"Date Range Generation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"import { tools } from 'tods-competition-factory';\n\nconst dates = tools.generateDateRange('2024-06-10', '2024-06-15');\n// ['2024-06-10', '2024-06-11', '2024-06-12', '2024-06-13', '2024-06-14', '2024-06-15']\n"})}),"\n",(0,s.jsx)(n.h3,{id:"embargo-validation",children:"Embargo Validation"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"isValidEmbargoDate"})," ensures a value is a valid ISO 8601 datetime string that includes timezone context. This is enforced automatically by all publishing methods, but is also available for pre-validation:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"tools.dateTime.isValidEmbargoDate('2024-06-15T10:00:00Z'); // true \u2014 UTC\ntools.dateTime.isValidEmbargoDate('2024-06-15T10:00:00+05:30'); // true \u2014 offset\ntools.dateTime.isValidEmbargoDate('2024-06-15T10:00:00'); // false \u2014 no timezone\ntools.dateTime.isValidEmbargoDate('2024-06-15'); // false \u2014 date only\ntools.dateTime.isValidEmbargoDate(42); // false \u2014 not a string\n"})}),"\n",(0,s.jsxs)(n.p,{children:["See ",(0,s.jsx)(n.a,{href:"/docs/concepts/publishing/publishing-embargo",children:"Embargo and Scheduled Rounds"})," for the full embargo documentation."]}),"\n",(0,s.jsx)(n.h2,{id:"timezone-utilities",children:"Timezone Utilities"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"timeZone"})," object on ",(0,s.jsx)(n.code,{children:"tools"})," provides timezone-aware operations using ",(0,s.jsx)(n.code,{children:"Intl.DateTimeFormat"}),". These functions handle DST transitions correctly and work in all modern JavaScript runtimes."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"import { tools } from 'tods-competition-factory';\n"})}),"\n",(0,s.jsx)(n.h3,{id:"validating-timezones",children:"Validating Timezones"}),"\n",(0,s.jsxs)(n.p,{children:["Tournament records can specify a ",(0,s.jsx)(n.code,{children:"localTimeZone"})," (IANA timezone identifier). The factory validates this value on creation using ",(0,s.jsx)(n.code,{children:"isValidIANATimeZone"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"tools.timeZone.isValidIANATimeZone('America/New_York'); // true\ntools.timeZone.isValidIANATimeZone('Europe/London'); // true\ntools.timeZone.isValidIANATimeZone('UTC'); // true\ntools.timeZone.isValidIANATimeZone('EST'); // runtime-dependent\ntools.timeZone.isValidIANATimeZone('Not/A/Zone'); // false\n"})}),"\n",(0,s.jsxs)(n.p,{children:["When creating a tournament record with an invalid ",(0,s.jsx)(n.code,{children:"localTimeZone"}),", the factory returns an ",(0,s.jsx)(n.code,{children:"INVALID_TIME_ZONE"})," error:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"const result = engine.createTournamentRecord({\n  tournamentName: 'Example Open',\n  localTimeZone: 'Invalid/Zone',\n});\n// result.error === INVALID_TIME_ZONE\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getting-utc-offsets",children:"Getting UTC Offsets"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"getTimeZoneOffsetMinutes"})," returns the UTC offset in minutes for a timezone at a specific instant, correctly accounting for DST:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"// Winter: EST is UTC-5 (-300 minutes)\ntools.timeZone.getTimeZoneOffsetMinutes('America/New_York', new Date('2024-01-15T12:00:00Z'));\n// -300\n\n// Summer: EDT is UTC-4 (-240 minutes)\ntools.timeZone.getTimeZoneOffsetMinutes('America/New_York', new Date('2024-06-15T12:00:00Z'));\n// -240\n\n// Fixed offset (no DST)\ntools.timeZone.getTimeZoneOffsetMinutes('Asia/Kolkata'); // 330 (UTC+5:30, always)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"converting-between-wall-clock-time-and-utc",children:"Converting Between Wall-Clock Time and UTC"}),"\n",(0,s.jsx)(n.p,{children:'These functions convert between "local time at a venue" and absolute UTC timestamps.'}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Wall-clock to UTC:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"// \"3:00 AM in New York on June 20\" \u2192 UTC\ntools.timeZone.wallClockToUTC('2024-06-20', '03:00', 'America/New_York');\n// '2024-06-20T07:00:00.000Z' (EDT = UTC-4)\n\n// Same time in winter \u2192 different UTC\ntools.timeZone.wallClockToUTC('2024-01-15', '03:00', 'America/New_York');\n// '2024-01-15T08:00:00.000Z' (EST = UTC-5)\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"UTC to wall-clock:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"// UTC \u2192 \"what time is it in New York?\"\ntools.timeZone.utcToWallClock('2024-06-20T07:00:00.000Z', 'America/New_York');\n// { date: '2024-06-20', time: '03:00' }\n\n// Day boundary: UTC June 21 03:00 \u2192 still June 20 in New York\ntools.timeZone.utcToWallClock('2024-06-21T03:00:00.000Z', 'America/New_York');\n// { date: '2024-06-20', time: '23:00' }\n"})}),"\n",(0,s.jsx)(n.h3,{id:"creating-embargo-strings-from-local-time",children:"Creating Embargo Strings from Local Time"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"toEmbargoUTC"})," is a convenience function that converts wall-clock time to a validated UTC embargo string, ready to pass to any publishing method:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"const embargo = tools.timeZone.toEmbargoUTC('2024-06-15', '08:00', 'America/New_York');\n// '2024-06-15T12:00:00.000Z'\n\n// The result always passes isValidEmbargoDate\ntools.dateTime.isValidEmbargoDate(embargo); // true\n\n// Use directly\nengine.publishOrderOfPlay({\n  scheduledDates: ['2024-06-15'],\n  embargo,\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"practical-pattern-tournament-aware-embargo",children:"Practical Pattern: Tournament-Aware Embargo"}),"\n",(0,s.jsxs)(n.p,{children:["Combine ",(0,s.jsx)(n.code,{children:"localTimeZone"})," from the tournament record with ",(0,s.jsx)(n.code,{children:"toEmbargoUTC"})," for a complete workflow:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"// Get the tournament's timezone\nconst { tournamentInfo } = engine.getTournamentInfo();\nconst { localTimeZone } = tournamentInfo;\n// e.g. 'America/New_York'\n\n// Admin says \"make the draw visible at 9 AM local time on June 15\"\nconst embargo = tools.timeZone.toEmbargoUTC('2024-06-15', '09:00', localTimeZone);\n\nengine.publishEvent({\n  eventId,\n  drawDetails: {\n    [drawId]: {\n      publishingDetail: { published: true, embargo },\n    },\n  },\n});\n\n// Later, display the embargo in local time for the admin\nconst { date, time } = tools.timeZone.utcToWallClock(embargo, localTimeZone);\nconsole.log(`Embargo lifts at ${time} on ${date} (${localTimeZone})`);\n// \"Embargo lifts at 09:00 on 2024-06-15 (America/New_York)\"\n"})}),"\n",(0,s.jsx)(n.h2,{id:"date-handling-across-the-factory",children:"Date Handling Across the Factory"}),"\n",(0,s.jsx)(n.h3,{id:"tournament-dates",children:"Tournament Dates"}),"\n",(0,s.jsxs)(n.p,{children:["Tournament records track dates as ",(0,s.jsx)(n.code,{children:"YYYY-MM-DD"})," strings. Validation is applied on creation and when modifying dates:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"// startDate, endDate, and activeDates are validated as ISO date strings\nengine.createTournamentRecord({\n  tournamentName: 'Summer Open',\n  startDate: '2024-06-10',\n  endDate: '2024-06-16',\n  activeDates: ['2024-06-10', '2024-06-12', '2024-06-14', '2024-06-16'], // optional\n  localTimeZone: 'America/New_York', // validated as IANA timezone\n});\n\n// Modifying dates validates and adjusts event dates accordingly\nengine.setTournamentDates({\n  startDate: '2024-06-11',\n  endDate: '2024-06-15',\n  activeDates: ['2024-06-11', '2024-06-13', '2024-06-15'], // optional\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"active-dates",children:"Active Dates"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"activeDates"})," is an optional array of ",(0,s.jsx)(n.code,{children:"YYYY-MM-DD"})," date strings representing the specific dates within a tournament's (or event's) date range when play actually occurs. This is useful for tournaments that span a date range but don't play every day \u2014 for example, a week-long tournament with rest days."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Omitted or ",(0,s.jsx)(n.code,{children:"undefined"})]}),": all dates in the ",(0,s.jsx)(n.code,{children:"startDate"}),"\u2013",(0,s.jsx)(n.code,{children:"endDate"})," range are implicitly active"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Non-empty array"}),": only the listed dates are active play dates"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Validation"}),": every date must be a valid date string and must fall within ",(0,s.jsx)(n.code,{children:"startDate"}),"/",(0,s.jsx)(n.code,{children:"endDate"}),"; returns ",(0,s.jsx)(n.code,{children:"INVALID_DATE"})," on failure"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Derivation"}),": when ",(0,s.jsx)(n.code,{children:"createTournamentRecord"})," is called with ",(0,s.jsx)(n.code,{children:"activeDates"})," but without ",(0,s.jsx)(n.code,{children:"startDate"})," and/or ",(0,s.jsx)(n.code,{children:"endDate"}),", the missing boundaries are derived from the earliest and latest active dates. This ensures the tournament record always has valid ",(0,s.jsx)(n.code,{children:"startDate"}),"/",(0,s.jsx)(n.code,{children:"endDate"})," for scheduling, court availability, and other subsystems that depend on them."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Falsy filtering"}),": falsy values (empty strings, ",(0,s.jsx)(n.code,{children:"null"}),") are automatically filtered out before validation"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"activeDates"})," can be set at creation time via ",(0,s.jsx)(n.code,{children:"createTournamentRecord"})," or later via ",(0,s.jsx)(n.code,{children:"setTournamentDates"}),". Events also support ",(0,s.jsx)(n.code,{children:"activeDates"})," via ",(0,s.jsx)(n.code,{children:"setEventDates"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"// Set activeDates at creation \u2014 startDate/endDate provided explicitly\nengine.createTournamentRecord({\n  startDate: '2024-06-10',\n  endDate: '2024-06-16',\n  activeDates: ['2024-06-10', '2024-06-12', '2024-06-14', '2024-06-16'],\n});\n\n// Set activeDates at creation \u2014 startDate/endDate derived automatically\n// startDate becomes '2024-06-10', endDate becomes '2024-06-16'\nengine.createTournamentRecord({\n  activeDates: ['2024-06-10', '2024-06-12', '2024-06-14', '2024-06-16'],\n});\n\n// Update activeDates later\nengine.setTournamentDates({\n  activeDates: ['2024-06-10', '2024-06-11', '2024-06-14', '2024-06-16'],\n});\n\n// Set event-level activeDates\nengine.setEventDates({\n  eventId,\n  activeDates: ['2024-06-10', '2024-06-14'],\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"scheduling",children:"Scheduling"}),"\n",(0,s.jsxs)(n.p,{children:["Match scheduling uses ",(0,s.jsx)(n.code,{children:"YYYY-MM-DD"})," for dates and ",(0,s.jsx)(n.code,{children:"HH:MM"})," for times. The scheduling system stores these as ",(0,s.jsx)(n.a,{href:"/docs/concepts/timeItems",children:"Time Items"})," with full timestamps:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"engine.addMatchUpScheduleItems({\n  matchUpId,\n  drawId,\n  schedule: {\n    scheduledDate: '2024-06-15',\n    scheduledTime: '14:30',\n    courtId: 'court-5',\n  },\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"time-items",children:"Time Items"}),"\n",(0,s.jsxs)(n.p,{children:["All temporal records use ISO 8601 format. ",(0,s.jsx)(n.code,{children:"createdAt"})," is auto-generated with timezone context:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"{\n  itemType: 'SCHEDULE.TIME.START',\n  itemValue: '2024-06-15T14:05:00Z',      // Always includes timezone\n  itemDate: '2024-06-15',                   // YYYY-MM-DD\n  createdAt: '2024-06-15T14:05:00.000Z',   // Auto-generated\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["See ",(0,s.jsx)(n.a,{href:"/docs/concepts/timeItems",children:"Time Items"})," for the complete temporal data reference."]}),"\n",(0,s.jsx)(n.h2,{id:"future-temporal-api",children:"Future: Temporal API"}),"\n",(0,s.jsxs)(n.p,{children:["The factory's zero-dependency approach to date/time handling is built on ",(0,s.jsx)(n.code,{children:"Date"})," and ",(0,s.jsx)(n.code,{children:"Intl.DateTimeFormat"})," \u2014 APIs available in every JavaScript runtime. The ",(0,s.jsx)(n.a,{href:"https://tc39.es/proposal-temporal/docs/",children:"TC39 Temporal proposal"})," is expected to reach Stage 4 and ship in major runtimes by 2027, providing first-class support for timezone-aware dates, wall-clock times, and duration arithmetic directly in the language."]}),"\n",(0,s.jsxs)(n.p,{children:["When Temporal becomes widely available, the factory's timezone utilities will be updated to use ",(0,s.jsx)(n.code,{children:"Temporal.ZonedDateTime"})," and ",(0,s.jsx)(n.code,{children:"Temporal.PlainDate"})," internally, providing:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"More precise DST transition handling at boundary cases"}),"\n",(0,s.jsx)(n.li,{children:"Native duration and calendar arithmetic"}),"\n",(0,s.jsxs)(n.li,{children:["Cleaner API surface without the quirks of the legacy ",(0,s.jsx)(n.code,{children:"Date"})," object"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["This transition will be ",(0,s.jsx)(n.strong,{children:"non-breaking"})," \u2014 the factory's public API (",(0,s.jsx)(n.code,{children:"wallClockToUTC"}),", ",(0,s.jsx)(n.code,{children:"utcToWallClock"}),", ",(0,s.jsx)(n.code,{children:"toEmbargoUTC"}),", etc.) will remain the same, with Temporal powering the implementation under the hood. The zero-dependency philosophy is maintained: Temporal is a language built-in, not a library."]}),"\n",(0,s.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"/docs/concepts/timeItems",children:"Time Items"})})," \u2014 Temporal records on CODES document elements"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"/docs/concepts/publishing/publishing-embargo",children:"Embargo and Scheduled Rounds"})})," \u2014 Time-based visibility gates"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"/docs/concepts/scheduling-overview",children:"Scheduling Overview"})})," \u2014 Match scheduling concepts"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"/docs/tools/tools-api",children:"Tools API"})})," \u2014 Complete function reference for ",(0,s.jsx)(n.code,{children:"dateTime"})," and ",(0,s.jsx)(n.code,{children:"timeZone"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8322(e,n,t){t.d(n,{R:()=>r,x:()=>d});var i=t(758);const s={},a=i.createContext(s);function r(e){const n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);