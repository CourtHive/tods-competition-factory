"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[8825],{4732(e,n,t){t.r(n),t.d(n,{assets:()=>h,contentTitle:()=>c,default:()=>f,frontMatter:()=>d,metadata:()=>i,toc:()=>p});const i=JSON.parse('{"id":"concepts/events/flights","title":"Flights","description":"Overview","source":"@site/docs/concepts/events/flights.mdx","sourceDirName":"concepts/events","slug":"/concepts/events/flights","permalink":"/competition-factory/docs/concepts/events/flights","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Flights"},"sidebar":"docs","previous":{"title":"Entries","permalink":"/competition-factory/docs/concepts/events/entries"},"next":{"title":"Draw Generation","permalink":"/competition-factory/docs/concepts/draws-overview"}}');var l=t(6070),s=t(8439),r=t(758),a=t(5802);function o(){const e=(0,r.useRef)(null),n=(0,r.useRef)(null),[i,s]=(0,r.useState)(null),[o,d]=(0,r.useState)(null);return(0,r.useEffect)(()=>{t.e(6745).then(t.bind(t,6745)).then(({getFlightProfileModal:t})=>{if(e.current){e.current.innerHTML="";const i=document.createElement("div");i.style.marginBottom="1em",i.style.color="#666",i.innerHTML="Configure flight profiles to automatically segment participants into multiple draws based on ratings or rankings. Choose the number of flights, distribution method, naming convention, and rating scale.";const l=document.createElement("button");l.className="button button--primary button--lg",l.textContent="\u2708\ufe0f Configure Flight Profile",l.style.marginBottom="1em",l.onclick=()=>{t({editorConfig:{eventType:"SINGLES",labels:{title:"Flight Profile Configuration"}},callback:e=>{const t={...e,scaleAttributes:{...e.scaleAttributes,eventType:"SINGLES"}};if(s(t),d(null),n.current&&t){n.current.innerHTML="";const e=document.createElement("div");e.style.marginBottom="1em",e.style.padding="1em",e.style.backgroundColor="#f0f0f0",e.style.borderRadius="4px",e.innerHTML=`\n                    <strong style="font-size: 1.2em;">Flight Profile Configuration</strong><br/>\n                    <span style="color: #666;">\n                      Flights: ${t.flightsCount||"N/A"} | \n                      Split Method: ${t.splitMethod||"N/A"}\n                    </span>\n                  `,n.current.appendChild(e),(0,a.N)(n.current,t,{expanded:2})}}})},e.current.appendChild(i),e.current.appendChild(l)}}).catch(e=>{console.error("Failed to load courthive-components:",e),d("Failed to load flight profile editor")})},[]),(0,l.jsxs)("div",{style:{marginBottom:"2em"},children:[(0,l.jsx)("div",{ref:e}),o&&(0,l.jsx)("div",{style:{color:"red",padding:"1em",backgroundColor:"#fee"},children:o}),(0,l.jsx)("div",{ref:n})]})}const d={title:"Flights"},c=void 0,h={},p=[{value:"Overview",id:"overview",level:2},{value:"Interactive Flight Profile Editor",id:"interactive-flight-profile-editor",level:2},{value:"Generating Flight Profiles",id:"generating-flight-profiles",level:2},{value:"Split Methods",id:"split-methods",level:2},{value:"WATERFALL (default)",id:"waterfall-default",level:3},{value:"LEVEL_BASED",id:"level_based",level:3},{value:"SHUTTLE",id:"shuttle",level:3},{value:"Creating Draws from Flight Profiles",id:"creating-draws-from-flight-profiles",level:2},{value:"Flight Management",id:"flight-management",level:2},{value:"Delete Individual Flight",id:"delete-individual-flight",level:3},{value:"Delete Entire Flight Profile",id:"delete-entire-flight-profile",level:3},{value:"Update Existing Profile",id:"update-existing-profile",level:3},{value:"Complete Example",id:"complete-example",level:2},{value:"Scale Attributes",id:"scale-attributes",level:2},{value:"Available Scale Types",id:"available-scale-types",level:3},{value:"Specifying Rating Systems",id:"specifying-rating-systems",level:3},{value:"Related Topics",id:"related-topics",level:2}];function g(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsx)(n.p,{children:"Flights allow you to automatically segment participants into multiple draws based on their ratings or rankings, all within the same event and category. Flight profiles define how participants should be distributed across multiple competitions."}),"\n",(0,l.jsx)(n.h2,{id:"interactive-flight-profile-editor",children:"Interactive Flight Profile Editor"}),"\n",(0,l.jsx)(n.p,{children:"Try the interactive flight profile editor to see how flight configurations work:"}),"\n",(0,l.jsx)(o,{}),"\n",(0,l.jsx)(n.h2,{id:"generating-flight-profiles",children:"Generating Flight Profiles"}),"\n",(0,l.jsx)(n.p,{children:"A flight profile defines how participants should be distributed across multiple flights:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"const { flightProfile } = tournamentEngine.generateFlightProfile({\n  eventId,\n  flightsCount: 3, // Create 3 separate flights\n  attachFlightProfile: true, // Attach profile to event immediately\n  scaleAttributes: {\n    scaleType: 'RATING', // or 'RANKING'\n    eventType: 'SINGLES',\n    scaleName: 'WTN', // Optional: specific rating system\n    accessor: 'wtnRating', // Optional: specific property to return as value\n  },\n  splitMethod: 'WATERFALL', // Distribution method\n});\n"})}),"\n",(0,l.jsx)(n.h2,{id:"split-methods",children:"Split Methods"}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"splitMethod"})," determines how participants are distributed across flights:"]}),"\n",(0,l.jsx)(n.h3,{id:"waterfall-default",children:"WATERFALL (default)"}),"\n",(0,l.jsx)(n.p,{children:"Distributes participants evenly like dealing cards."}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Example with rankings 1-15 into 3 flights:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Flight 1: [1, 4, 7, 10, 13]"}),"\n",(0,l.jsx)(n.li,{children:"Flight 2: [2, 5, 8, 11, 14]"}),"\n",(0,l.jsx)(n.li,{children:"Flight 3: [3, 6, 9, 12, 15]"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"When to use:"})," Creates balanced flights with mixed skill levels across all flights."]}),"\n",(0,l.jsx)(n.h3,{id:"level_based",children:"LEVEL_BASED"}),"\n",(0,l.jsx)(n.p,{children:"Groups participants by skill tiers."}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Example with rankings 1-15 into 3 flights:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Flight 1: [1, 2, 3, 4, 5]"}),"\n",(0,l.jsx)(n.li,{children:"Flight 2: [6, 7, 8, 9, 10]"}),"\n",(0,l.jsx)(n.li,{children:"Flight 3: [11, 12, 13, 14, 15]"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"When to use:"})," Creates skill-segregated competition where top players compete separately from lower-ranked players."]}),"\n",(0,l.jsx)(n.h3,{id:"shuttle",children:"SHUTTLE"}),"\n",(0,l.jsx)(n.p,{children:"Snake/serpentine distribution pattern."}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Example with rankings 1-15 into 3 flights:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Flight 1: [1, 6, 7, 12, 13]"}),"\n",(0,l.jsx)(n.li,{children:"Flight 2: [2, 5, 8, 11, 14]"}),"\n",(0,l.jsx)(n.li,{children:"Flight 3: [3, 4, 9, 10, 15]"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"When to use:"})," Balances overall skill level across flights using a back-and-forth pattern."]}),"\n",(0,l.jsx)(n.h2,{id:"creating-draws-from-flight-profiles",children:"Creating Draws from Flight Profiles"}),"\n",(0,l.jsx)(n.p,{children:"After generating a flight profile, create the actual draw definitions:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:'// Get the flight profile (if not already attached)\nconst { flightProfile } = tournamentEngine.getFlightProfile({ eventId });\n\n// Generate draw definitions for each flight\nflightProfile.flights.forEach((flight) => {\n  const { drawDefinition } = tournamentEngine.generateDrawDefinition({\n    drawEntries: flight.drawEntries, // Pre-assigned entries\n    drawName: flight.drawName, // e.g., "Flight 1", "Flight 2"\n    drawId: flight.drawId, // Unique identifier from profile\n    drawSize: 16, // Or calculate from drawEntries.length\n    automated: true, // Auto-place participants\n    eventId,\n  });\n\n  tournamentEngine.addDrawDefinition({\n    drawDefinition,\n    eventId,\n    flight, // Pass flight object for integrity check\n  });\n});\n'})}),"\n",(0,l.jsx)(n.h2,{id:"flight-management",children:"Flight Management"}),"\n",(0,l.jsx)(n.h3,{id:"delete-individual-flight",children:"Delete Individual Flight"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"tournamentEngine.deleteFlightAndFlightDraw({\n  drawId: flight.drawId,\n  eventId,\n});\n"})}),"\n",(0,l.jsx)(n.h3,{id:"delete-entire-flight-profile",children:"Delete Entire Flight Profile"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"// Removes profile and all associated draws\ntournamentEngine.deleteFlightProfileAndFlightDraws({ eventId });\n"})}),"\n",(0,l.jsx)(n.h3,{id:"update-existing-profile",children:"Update Existing Profile"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"// Generate new profile with deleteExisting flag\nconst { flightProfile } = tournamentEngine.generateFlightProfile({\n  deleteExisting: true, // Remove previous profile\n  flightsCount: 4, // Change number of flights\n  eventId,\n});\n"})}),"\n",(0,l.jsx)(n.h2,{id:"complete-example",children:"Complete Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"import { tournamentEngine } from 'tods-competition-factory';\n\n// 1. Create event\nconst event = {\n  eventName: 'Adult Mixed Doubles',\n  eventType: 'DOUBLES',\n  category: {\n    categoryName: 'Adult Open Mixed',\n    ageCategoryCode: '18O',\n  },\n};\n\nconst {\n  event: { eventId },\n} = tournamentEngine.addEvent({ event });\n\n// 2. Enter all participants\ntournamentEngine.addEventEntries({\n  eventId,\n  participantIds: allPairIds,\n  entryStatus: 'DIRECT_ACCEPTANCE',\n});\n\n// 3. Generate flight profile based on ratings\nconst { flightProfile } = tournamentEngine.generateFlightProfile({\n  attachFlightProfile: true, // Attach immediately\n  flightsCount: 3, // Championship, First Flight, Second Flight\n  splitMethod: 'LEVEL_BASED', // Top players in first flight\n  scaleAttributes: {\n    scaleType: 'RATING',\n    eventType: 'DOUBLES',\n    scaleName: 'NTRP',\n  },\n  eventId,\n});\n\n// 4. Generate draws for each flight\nflightProfile.flights.forEach((flight) => {\n  const { drawDefinition } = tournamentEngine.generateDrawDefinition({\n    drawEntries: flight.drawEntries,\n    drawName: flight.drawName,\n    drawId: flight.drawId,\n    drawSize: 8,\n    automated: true,\n    eventId,\n  });\n\n  tournamentEngine.addDrawDefinition({\n    drawDefinition,\n    eventId,\n    flight,\n  });\n});\n"})}),"\n",(0,l.jsx)(n.h2,{id:"scale-attributes",children:"Scale Attributes"}),"\n",(0,l.jsxs)(n.p,{children:["When using ",(0,l.jsx)(n.code,{children:"scaleAttributes"}),", participants without ratings/rankings are randomly distributed across flights."]}),"\n",(0,l.jsx)(n.h3,{id:"available-scale-types",children:"Available Scale Types"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"RATING"})," - Uses rating systems (WTN, UTR, NTRP, etc.)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"RANKING"})," - Uses ranking positions"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"specifying-rating-systems",children:"Specifying Rating Systems"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"scaleAttributes: {\n  scaleType: 'RATING',\n  eventType: 'SINGLES',\n  scaleName: 'WTN', // Specific rating system\n}\n"})}),"\n",(0,l.jsx)(n.h2,{id:"related-topics",children:"Related Topics"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"./events-overview",children:"Events Overview"})," - Event structure and management"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"./entries",children:"Entries"})," - Managing participant entries"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"./categories",children:"Categories"})," - Event eligibility criteria"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"/docs/governors/event-governor",children:"Event Governor"})," - Event management API"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"/docs/concepts/scaleItems",children:"Scale Items"})," - Participant ratings and rankings"]}),"\n"]})]})}function f(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(g,{...e})}):g(e)}},5802(e,n,t){t.d(n,{N:()=>l});class i{constructor(e,n,t={}){this.container=e,this.options={expanded:t.expanded??1,theme:t.theme??"light"},this.render(n)}render(e){this.container.innerHTML="",this.container.style.fontFamily='Monaco, Menlo, "Ubuntu Mono", monospace',this.container.style.fontSize="13px",this.container.style.lineHeight="1.5",this.injectStyles();const n=this.createNode(e,0,"");this.container.appendChild(n)}injectStyles(){const e="json-viewer-styles";if(document.getElementById(e))return;const n=document.createElement("style");n.id=e,n.textContent="\n      .json-viewer-container {\n        background: #f8f8f8;\n        padding: 12px;\n        border-radius: 4px;\n        overflow: auto;\n        max-height: 600px;\n      }\n      \n      .json-viewer-line {\n        display: flex;\n        align-items: flex-start;\n        margin: 2px 0;\n      }\n      \n      .json-viewer-toggle {\n        cursor: pointer;\n        user-select: none;\n        width: 16px;\n        flex-shrink: 0;\n        color: #666;\n        font-weight: bold;\n      }\n      \n      .json-viewer-toggle:hover {\n        color: #1976d2;\n      }\n      \n      .json-viewer-key {\n        color: #881391;\n        font-weight: 500;\n        margin-right: 6px;\n      }\n      \n      .json-viewer-string {\n        color: #c41a16;\n      }\n      \n      .json-viewer-number {\n        color: #1c00cf;\n      }\n      \n      .json-viewer-boolean {\n        color: #0d22aa;\n        font-weight: bold;\n      }\n      \n      .json-viewer-null {\n        color: #808080;\n        font-style: italic;\n      }\n      \n      .json-viewer-bracket {\n        color: #000;\n        font-weight: bold;\n      }\n      \n      .json-viewer-children {\n        margin-left: 20px;\n        border-left: 1px solid #ddd;\n        padding-left: 8px;\n      }\n      \n      .json-viewer-collapsed {\n        display: none;\n      }\n      \n      .json-viewer-summary {\n        color: #999;\n        font-style: italic;\n        margin-left: 6px;\n      }\n      \n      .json-viewer-comma {\n        color: #000;\n      }\n    ",document.head.appendChild(n)}createNode(e,n,t,i=!0){const l=document.createElement("div");return null===e?l.appendChild(this.createLine(t,this.span("null","json-viewer-null"),i)):"string"==typeof e?l.appendChild(this.createLine(t,this.span(`"${e}"`,"json-viewer-string"),i)):"number"==typeof e?l.appendChild(this.createLine(t,this.span(String(e),"json-viewer-number"),i)):"boolean"==typeof e?l.appendChild(this.createLine(t,this.span(String(e),"json-viewer-boolean"),i)):Array.isArray(e)?l.appendChild(this.createComplexNode(e,n,t,!0,i)):"object"==typeof e&&l.appendChild(this.createComplexNode(e,n,t,!1,i)),l}createLine(e,n,t){const i=document.createElement("div");i.className="json-viewer-line";const l=document.createElement("span");if(l.className="json-viewer-toggle",l.textContent=" ",i.appendChild(l),e){const n=this.span(`${e}: `,"json-viewer-key");i.appendChild(n)}return i.appendChild(n),t||i.appendChild(this.span(",","json-viewer-comma")),i}createComplexNode(e,n,t,i,l){const s=document.createElement("div"),r=document.createElement("div");r.className="json-viewer-line";const a=document.createElement("span");a.className="json-viewer-toggle";const o=n<this.options.expanded;if(a.textContent=o?"\u25bc":"\u25b6",r.appendChild(a),t){const e=this.span(`${t}: `,"json-viewer-key");r.appendChild(e)}const d=i?"[":"{";r.appendChild(this.span(d,"json-viewer-bracket"));const c=document.createElement("span");if(c.className="json-viewer-summary",i)c.textContent=` ${e.length} items `;else{const n=Object.keys(e);c.textContent=` ${n.length} keys `}o||r.appendChild(c);const h=document.createElement("span");if(h.className="json-viewer-bracket",h.textContent=i?"]":"}",o||r.appendChild(h),!l){const e=this.span(",","json-viewer-comma");o||r.appendChild(e)}s.appendChild(r);const p=document.createElement("div");p.className="json-viewer-children",o||p.classList.add("json-viewer-collapsed");const g=i?e.map((e,n)=>[n,e]):Object.entries(e);g.forEach(([e,t],l)=>{const s=i?"":String(e),r=l===g.length-1;p.appendChild(this.createNode(t,n+1,s,r))}),s.appendChild(p);const f=document.createElement("div");f.className="json-viewer-line",o||f.classList.add("json-viewer-collapsed");const m=document.createElement("span");return m.className="json-viewer-toggle",m.textContent=" ",f.appendChild(m),f.appendChild(this.span(i?"]":"}","json-viewer-bracket")),l||f.appendChild(this.span(",","json-viewer-comma")),s.appendChild(f),a.addEventListener("click",()=>{const e="\u25bc"===a.textContent;if(a.textContent=e?"\u25b6":"\u25bc",e)p.classList.add("json-viewer-collapsed"),f.classList.add("json-viewer-collapsed"),r.appendChild(c),r.appendChild(h),l||r.appendChild(this.span(",","json-viewer-comma"));else{p.classList.remove("json-viewer-collapsed"),f.classList.remove("json-viewer-collapsed"),c.parentNode&&c.remove(),h.parentNode&&h.remove();const e=r.querySelector(".json-viewer-comma");e&&e.remove()}}),s}span(e,n){const t=document.createElement("span");return t.className=n,t.textContent=e,t}update(e){this.render(e)}}function l(e,n,t){return e.className="json-viewer-container",new i(e,n,t)}},8439(e,n,t){t.d(n,{R:()=>r,x:()=>a});var i=t(758);const l={},s=i.createContext(l);function r(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);