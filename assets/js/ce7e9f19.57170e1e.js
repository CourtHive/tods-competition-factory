"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[8560],{3805:(e,n,o)=>{o.d(n,{xA:()=>p,yg:()=>m});var r=o(758);function a(e,n,o){return n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}function t(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.push.apply(o,r)}return o}function i(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?t(Object(o),!0).forEach((function(n){a(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}function l(e,n){if(null==e)return{};var o,r,a=function(e,n){if(null==e)return{};var o,r,a={},t=Object.keys(e);for(r=0;r<t.length;r++)o=t[r],n.indexOf(o)>=0||(a[o]=e[o]);return a}(e,n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);for(r=0;r<t.length;r++)o=t[r],n.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}var s=r.createContext({}),d=function(e){var n=r.useContext(s),o=n;return e&&(o="function"==typeof e?e(n):i(i({},n),e)),o},p=function(e){var n=d(e.components);return r.createElement(s.Provider,{value:n},e.children)},u="mdxType",g={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},c=r.forwardRef((function(e,n){var o=e.components,a=e.mdxType,t=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=d(o),c=a,m=u["".concat(s,".").concat(c)]||u[c]||g[c]||t;return o?r.createElement(m,i(i({ref:n},p),{},{components:o})):r.createElement(m,i({ref:n},p))}));function m(e,n){var o=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var t=o.length,i=new Array(t);i[0]=c;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l[u]="string"==typeof e?e:a,i[1]=l;for(var d=2;d<t;d++)i[d]=o[d];return r.createElement.apply(null,i)}return r.createElement.apply(null,o)}c.displayName="MDXCreateElement"},7469:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>s,contentTitle:()=>i,default:()=>g,frontMatter:()=>t,metadata:()=>l,toc:()=>d});var r=o(2232),a=(o(758),o(3805));const t={},i="Feed-In Policy",l={unversionedId:"policies/feedInPolicy",id:"policies/feedInPolicy",title:"Feed-In Policy",description:"Overview",source:"@site/docs/policies/feedInPolicy.md",sourceDirName:"policies",slug:"/policies/feedInPolicy",permalink:"/tods-competition-factory/docs/policies/feedInPolicy",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Seeding Policy",permalink:"/tods-competition-factory/docs/policies/seedingPolicy"},next:{title:"Scheduling Policy",permalink:"/tods-competition-factory/docs/policies/scheduling"}},s={},d=[{value:"Overview",id:"overview",level:2},{value:"Policy Structure",id:"policy-structure",level:2},{value:"Attributes",id:"attributes",level:2},{value:"<code>feedFromMainFinal</code>",id:"feedfrommainfinal",level:3},{value:"<code>roundGroupedOrder</code>",id:"roundgroupedorder",level:3},{value:"<code>roundFeedProfiles</code>",id:"roundfeedprofiles",level:3},{value:"Default Behavior (No Policy Specified)",id:"default-behavior-no-policy-specified",level:2},{value:"Usage Examples",id:"usage-examples",level:2},{value:"Basic Usage - Standard Feed-In Championship",id:"basic-usage---standard-feed-in-championship",level:3},{value:"FMLC (First Match Loser Consolation)",id:"fmlc-first-match-loser-consolation",level:3},{value:"64-Draw with Custom Grouping",id:"64-draw-with-custom-grouping",level:3},{value:"128-Draw Professional Tournament",id:"128-draw-professional-tournament",level:3},{value:"256-Draw with Complex Grouping",id:"256-draw-with-complex-grouping",level:3},{value:"Feed-In to Specific Round",id:"feed-in-to-specific-round",level:3},{value:"Using with Other Policies",id:"using-with-other-policies",level:3},{value:"Real-World Scenarios",id:"real-world-scenarios",level:2},{value:"Scenario 1: Professional 64-Draw Feed-In Championship",id:"scenario-1-professional-64-draw-feed-in-championship",level:3},{value:"Scenario 2: Club Tournament FMLC (First MATCH Losers Get Second Chance)",id:"scenario-2-club-tournament-fmlc-first-match-losers-get-second-chance",level:3},{value:"Scenario 3: College Conference Championship (128 Draw)",id:"scenario-3-college-conference-championship-128-draw",level:3},{value:"Scenario 4: Club Tournament Feed-In (32 Draw)",id:"scenario-4-club-tournament-feed-in-32-draw",level:3},{value:"Notes",id:"notes",level:2},{value:"Feed Direction Impact",id:"feed-direction-impact",level:3},{value:"Grouped Order Strategy",id:"grouped-order-strategy",level:3},{value:"Link Structure",id:"link-structure",level:3},{value:"Round Matching",id:"round-matching",level:3},{value:"Performance Considerations",id:"performance-considerations",level:3},{value:"Validation Rules",id:"validation-rules",level:3},{value:"Common Pitfalls",id:"common-pitfalls",level:3},{value:"Integration with Other Policies",id:"integration-with-other-policies",level:2},{value:"Related Methods",id:"related-methods",level:2},{value:"Query Methods",id:"query-methods",level:3},{value:"<code>getStructureLinks()</code>",id:"getstructurelinks",level:4},{value:"<code>getAllStructureMatchUps()</code>",id:"getallstructurematchups",level:4},{value:"Mutation Methods",id:"mutation-methods",level:3},{value:"<code>generateDrawDefinition()</code>",id:"generatedrawdefinition",level:4},{value:"Related Concepts",id:"related-concepts",level:2},{value:"Summary",id:"summary",level:2}],p={toc:d},u="wrapper";function g({components:e,...n}){return(0,a.yg)(u,(0,r.A)({},p,n,{components:e,mdxType:"MDXLayout"}),(0,a.yg)("h1",{id:"feed-in-policy"},"Feed-In Policy"),(0,a.yg)("h2",{id:"overview"},"Overview"),(0,a.yg)("p",null,"The ",(0,a.yg)("strong",{parentName:"p"},"Feed-In Policy")," controls how losers from a main draw structure feed into a consolation structure in feed-in draw types. This policy determines the direction (TOP_DOWN or BOTTOM_UP) and grouping order for feeding players from one structure to another, critical for maintaining competitive balance in consolation draws."),(0,a.yg)("p",null,"Feed-in policies are used in draw types like:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"FEED_IN_CHAMPIONSHIP")," - Full feed-in consolation (all rounds except final)"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"FIRST_MATCH_LOSER_CONSOLATION")," - Players who lose their first MATCH (could be round 1 or 2 if they had a BYE)"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"FIRST_ROUND_LOSER_CONSOLATION")," - Players who lose in round 1 only (regardless of BYEs)"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"MODIFIED_FEED_IN_CHAMPIONSHIP")," - Modified feed-in pattern"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"FEED_IN_CHAMPIONSHIP_TO_SF/QF/R16")," - Feed-in to specific round")),(0,a.yg)("hr",null),(0,a.yg)("h2",{id:"policy-structure"},"Policy Structure"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-typescript"},"{\n  feedIn: {\n    feedFromMainFinal?: boolean;\n    roundGroupedOrder?: number[][];\n    roundFeedProfiles?: ('TOP_DOWN' | 'BOTTOM_UP')[];\n  }\n}\n")),(0,a.yg)("hr",null),(0,a.yg)("h2",{id:"attributes"},"Attributes"),(0,a.yg)("h3",{id:"feedfrommainfinal"},(0,a.yg)("inlineCode",{parentName:"h3"},"feedFromMainFinal")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Type:")," ",(0,a.yg)("inlineCode",{parentName:"p"},"boolean")," (optional)",(0,a.yg)("br",{parentName:"p"}),"\n",(0,a.yg)("strong",{parentName:"p"},"Default:")," ",(0,a.yg)("inlineCode",{parentName:"p"},"false"),(0,a.yg)("br",{parentName:"p"}),"\n",(0,a.yg)("strong",{parentName:"p"},"Purpose:")," Controls whether losers from the main draw final feed into the consolation"),(0,a.yg)("p",null,"When ",(0,a.yg)("inlineCode",{parentName:"p"},"true"),":"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Loser of main draw final feeds into consolation structure"),(0,a.yg)("li",{parentName:"ul"},"Used for FIRST_MATCH_LOSER_CONSOLATION (FMLC) draws"),(0,a.yg)("li",{parentName:"ul"},"Creates link from final round of main to consolation")),(0,a.yg)("p",null,"When ",(0,a.yg)("inlineCode",{parentName:"p"},"false")," (default):"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Main draw final loser does NOT feed to consolation"),(0,a.yg)("li",{parentName:"ul"},"Standard feed-in championship behavior"),(0,a.yg)("li",{parentName:"ul"},"Only pre-final round losers feed to consolation")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Examples:")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"import { POLICY_TYPE_FEED_IN } from 'tods-competition-factory';\n\n// Standard feed-in (default) - works for all draw sizes\nconst standardFeedIn = {\n  [POLICY_TYPE_FEED_IN]: {\n    feedFromMainFinal: false,\n  },\n};\n")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Visual Comparison:")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"FEED_IN_CHAMPIONSHIP:\nMain Draw                    Consolation Draw\nRound 1 losers \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2192  Consolation Round 1\nRound 2 losers \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2192  Consolation Round 2\nRound 3 losers \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2192  Consolation Round 3\nSemifinal losers \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2192  Consolation Round 4\nFinal loser      (2nd place, no consolation)\n\n\nFIRST_MATCH_LOSER_CONSOLATION (FMLC):\nMain Draw                    Consolation Draw\nRound 1 losers \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2192   Consolation\nRound 2 losers (had R1 BYE)\u2192 Consolation (FIRST_MATCHUP condition)\nRound 2 losers (played R1)   (Eliminated, no consolation)\nRound 3+ winners         \u2192   Continue in MAIN\nFinal loser      (2nd place, no consolation)\n\nCRITICAL: If player had BYE in R1, their first MATCH is R2\n         \u2192 R2 loss counts as first match loss \u2192 feeds to consolation\n         If player played in R1 and wins, then loses R2\n         \u2192 R2 loss is NOT first match \u2192 eliminated, no consolation\n\n\nFIRST_ROUND_LOSER_CONSOLATION (FRLC):\nMain Draw                    Consolation Draw\nRound 1 losers \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2192   Consolation\nRound 2+ losers              (Eliminated, no consolation)\n\nCRITICAL: ONLY round 1 losers go to consolation\n         Even if player had R1 BYE, they don't feed until they actually LOSE\n\n\n16-Player FMLC with 2 BYEs:\nRound 1: 7 matches (14 players) \u2192 7 losers to consolation\n         2 BYEs (players advance without playing)\nRound 2: BYE holders play their FIRST MATCH\n         \u2192 If they lose: consolation (first match loser)\n         \u2192 If they win: continue in main\nRound 2: R1 winners play their SECOND MATCH\n         \u2192 If they lose: eliminated (NOT first match loser)\n\n\n4-Player Draw with feedFromMainFinal: false (skipRounds = 1):\nPlayers A, B, C, D\n\u251c\u2500 MAIN: Only final (A vs B)\n\u2514\u2500 CONSOLATION: C and D (didn't play round 1)\n\n\n4-Player Draw with feedFromMainFinal: true (skipRounds = 0):\nPlayers A, B, C, D\n\u251c\u2500 MAIN:\n\u2502   \u251c\u2500 Semi 1: A vs B (winner to final)\n\u2502   \u251c\u2500 Semi 2: C vs D (winner to final)\n\u2502   \u2514\u2500 Final: Winner of Semi1 vs Winner of Semi2\n\u2514\u2500 CONSOLATION:\n    \u2514\u2500 Loser of Semi1 vs Loser of Semi2\n    (Both losers are first match losers)\n")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Notes:")),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"FMLC uses special ",(0,a.yg)("inlineCode",{parentName:"li"},"linkCondition: FIRST_MATCHUP")," for round 2 links"),(0,a.yg)("li",{parentName:"ul"},"Round 2 links with FIRST_MATCHUP condition only feed players who had a BYE in round 1"),(0,a.yg)("li",{parentName:"ul"},"This ensures only FIRST match losers feed, not second match losers"),(0,a.yg)("li",{parentName:"ul"},"FRLC is simpler - only feeds from round 1, no special conditions"),(0,a.yg)("li",{parentName:"ul"},"For 4-player draws, FMLC needs ",(0,a.yg)("inlineCode",{parentName:"li"},"feedFromMainFinal: true")," to ensure first round happens")),(0,a.yg)("hr",null),(0,a.yg)("h3",{id:"roundgroupedorder"},(0,a.yg)("inlineCode",{parentName:"h3"},"roundGroupedOrder")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Type:")," ",(0,a.yg)("inlineCode",{parentName:"p"},"number[][]")," (optional)",(0,a.yg)("br",{parentName:"p"}),"\n",(0,a.yg)("strong",{parentName:"p"},"Default:")," Standard sequential order",(0,a.yg)("br",{parentName:"p"}),"\n",(0,a.yg)("strong",{parentName:"p"},"Purpose:")," Controls the order in which losers from the same round are distributed into consolation matchUps"),(0,a.yg)("p",null,"Each inner array represents how losers from a main draw round are grouped when feeding into consolation."),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Structure:")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-typescript"},"roundGroupedOrder: [\n  [1], // Round 1: All losers as single group\n  [1], // Round 2: All losers as single group\n  [1, 2], // Round 3: Split into 2 groups (first half, second half)\n  [3, 4, 1, 2], // Round 4: Split into 4 groups with specific order\n  // ... more rounds\n];\n")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Understanding the Numbers:")),(0,a.yg)("p",null,'The numbers represent which "segment" of losers feed into which part of the consolation:'),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"[1]")," - All losers from this round feed sequentially"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"[1, 2]")," - Split into 2 groups: first half (1), second half (2)"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"[1, 2, 3, 4]")," - Split into 4 groups/quarters"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"[2, 1, 4, 3]")," - Split into 4 groups but reordered")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Examples:")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"// Simple 32-draw feed-in\nconst simpleFeedPolicy = {\n  roundGroupedOrder: [\n    [1], // Round 1: 16 losers feed sequentially\n    [1], // Round 2: 8 losers feed sequentially\n    [1, 2], // Round 3: 4 losers split into 2 groups\n    [1, 2], // Round 4: 2 losers split into 2 groups\n  ],\n};\n\n// Complex 128-draw feed-in\nconst complexFeedPolicy = {\n  roundGroupedOrder: [\n    [1], // Round 1: All losers together\n    [1], // Round 2: All losers together\n    [1, 2], // Round 3: Split into halves\n    [3, 4, 1, 2], // Round 4: Quarters with specific order\n    [2, 1, 4, 3, 6, 5, 8, 7], // Round 5: Eighths with alternating order\n    [1], // Round 6: All losers together\n  ],\n};\n")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"How Grouping Works:")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"// Example: Round 3 with [1, 2]\n// Main draw round 3 has 4 matchUps (8 players, 4 losers)\n// Losers: L1, L2, L3, L4\n\n// With roundGroupedOrder: [1, 2]\n// Group 1: L1, L2 \u2192 Feed to first consolation matchUps (TOP_DOWN or BOTTOM_UP)\n// Group 2: L3, L4 \u2192 Feed to second consolation matchUps\n\n// Example: Round 4 with [3, 4, 1, 2]\n// Main draw round 4 has 8 matchUps (16 players, 8 losers)\n// Losers: L1, L2, L3, L4, L5, L6, L7, L8\n\n// With roundGroupedOrder: [3, 4, 1, 2]\n// Group 3 (positions 5-6): L5, L6 \u2192 Feed first\n// Group 4 (positions 7-8): L7, L8 \u2192 Feed second\n// Group 1 (positions 1-2): L1, L2 \u2192 Feed third\n// Group 2 (positions 3-4): L3, L4 \u2192 Feed fourth\n")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Detailed Example (64-draw):")),(0,a.yg)("p",null,"In a MAIN structure with 64 participants in the first round, 32 participants will be fed into the CONSOLATION structure."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"// Round 1: roundGroupedOrder: [1]\n// Specifies that all 32 participants should be treated as one group\n\n// Round 3: roundGroupedOrder: [1, 2]\n// 16 participants being fed\n// Split into two groups: first half and second half\n\n// With feedProfile BOTTOM_UP:\n// [1, 2] means first group feeds first\n// First half (8 players): [8, 7, 6, 5, 4, 3, 2, 1]\n// Second half (8 players): [16, 15, 14, 13, 12, 11, 10, 9]\n// Result: [8, 7, 6, 5, 4, 3, 2, 1, 16, 15, 14, 13, 12, 11, 10, 9]\n\n// Round 4: roundGroupedOrder: [3, 4, 1, 2]\n// 8 players being fed\n// Start with 3rd division: [5, 6]\n// BOTTOM_UP reverses to: [6, 5]\n// Full order: [6, 5, 8, 7, 2, 1, 3, 4]\n")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"128-Draw Example (From Original Documentation):")),(0,a.yg)("p",null,"This example is sufficient to cover MAIN draw sizes up to 128. This is because the fifth element of the roundGroupedOrder array corresponds to the eighth round of a CONSOLATION structure. With a 128 MAIN structure, fed rounds contain 64, 32, 16, 8, 4 and 2 participants."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"import { TOP_DOWN, BOTTOM_UP, POLICY_TYPE_FEED_IN } from 'tods-competition-factory';\n\nconst feedPolicy = {\n  [POLICY_TYPE_FEED_IN]: {\n    feedFromMainFinal: false, // Optional - defaults to false; drawSize: 4 will not feed from main final unless true\n    roundGroupedOrder: [\n      [1], // Complete round TOP_DOWN\n      [1], // Complete round BOTTOM_UP\n      [1, 2], // 1st half BOTTOM_UP, 2nd half BOTTOM_UP\n      [3, 4, 1, 2], // 3rd Qtr BOTTOM_UP, 4th Qtr BOTTOM_UP, 1st Qtr BOTTOM_UP, 2nd Qtr BOTTOM_UP\n      [2, 1, 4, 3, 6, 5, 8, 7], // 1st Qtr BOTTOM_UP, 2nd Qtr BOTTOM_UP, 3rd Qtr BOTTOM_UP, 4th Qtr BOTTOM_UP\n      [1], // Complete round BOTTOM_UP\n    ],\n    roundFeedProfiles: [TOP_DOWN, BOTTOM_UP, BOTTOM_UP, BOTTOM_UP, BOTTOM_UP, BOTTOM_UP, BOTTOM_UP, BOTTOM_UP],\n  },\n};\n")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"256-Draw Example (Professional Tournament):")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"import { TOP_DOWN, BOTTOM_UP, POLICY_TYPE_FEED_IN } from 'tods-competition-factory';\n\nconst pro256FeedPolicy = {\n  [POLICY_TYPE_FEED_IN]: {\n    roundGroupedOrder: [\n      [1], // R1: 128 losers, single group\n      [1], // R2: 64 losers, single group\n      [1, 2], // R3: 32 losers, split into halves\n      [3, 4, 1, 2], // R4: 16 losers, quarters reordered\n      [2, 1, 4, 3, 6, 5, 8, 7], // R5: 8 losers, eighths alternating\n      [1], // R6: 4 losers, single group\n    ],\n    roundFeedProfiles: [\n      TOP_DOWN, // R1 feeds top-down\n      BOTTOM_UP, // R2 feeds bottom-up\n      BOTTOM_UP, // R3 feeds bottom-up\n      BOTTOM_UP, // R4 feeds bottom-up\n      BOTTOM_UP, // R5 feeds bottom-up\n      BOTTOM_UP, // R6 feeds bottom-up\n      BOTTOM_UP, // R7 feeds bottom-up\n      BOTTOM_UP, // R8 feeds bottom-up\n    ],\n  },\n};\n")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Notes:")),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"More complex draws require more sophisticated grouping"),(0,a.yg)("li",{parentName:"ul"},"Order affects competitive balance in consolation"),(0,a.yg)("li",{parentName:"ul"},"Wrong grouping can create unfair matchups"),(0,a.yg)("li",{parentName:"ul"},"Testing recommended when customizing"),(0,a.yg)("li",{parentName:"ul"},"Empty array ",(0,a.yg)("inlineCode",{parentName:"li"},"[]")," means no feeding from that round"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Internal optimization:")," The factory uses an internal method ",(0,a.yg)("inlineCode",{parentName:"li"},"reduceGroupOrder")," to ensure the number of array elements is never greater than the number of participants being fed (handles varying draw sizes automatically)")),(0,a.yg)("hr",null),(0,a.yg)("h3",{id:"roundfeedprofiles"},(0,a.yg)("inlineCode",{parentName:"h3"},"roundFeedProfiles")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Type:")," ",(0,a.yg)("inlineCode",{parentName:"p"},"('TOP_DOWN' | 'BOTTOM_UP')[]")," (optional)",(0,a.yg)("br",{parentName:"p"}),"\n",(0,a.yg)("strong",{parentName:"p"},"Default:")," Alternates TOP_DOWN (odd rounds) and BOTTOM_UP (even rounds)",(0,a.yg)("br",{parentName:"p"}),"\n",(0,a.yg)("strong",{parentName:"p"},"Purpose:")," Controls the direction losers feed into consolation matchUp positions"),(0,a.yg)("p",null,"Each element corresponds to a round in the main draw and specifies how losers from that round are fed into consolation positions."),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Feed Profiles:")),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"TOP_DOWN"),":")," Losers feed from top positions downward",(0,a.yg)("ul",{parentName:"li"},(0,a.yg)("li",{parentName:"ul"},"First loser goes to position 1, second to position 2, etc."),(0,a.yg)("li",{parentName:"ul"},"Used for first round in many feed-in draws"))),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"BOTTOM_UP"),":")," Losers feed from bottom positions upward",(0,a.yg)("ul",{parentName:"li"},(0,a.yg)("li",{parentName:"ul"},"First loser goes to last position, second to second-last, etc."),(0,a.yg)("li",{parentName:"ul"},"Used for most subsequent rounds")))),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Default Behavior (no policy specified):")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"// Automatic alternation\nRound 1: TOP_DOWN    (odd)\nRound 2: BOTTOM_UP   (even)\nRound 3: TOP_DOWN    (odd)\nRound 4: BOTTOM_UP   (even)\n// Pattern continues...\n")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Examples:")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"import { TOP_DOWN, BOTTOM_UP, POLICY_TYPE_FEED_IN } from 'tods-competition-factory';\n\n// Simple 32-draw\nconst feedPolicy32 = {\n  [POLICY_TYPE_FEED_IN]: {\n    roundFeedProfiles: [\n      TOP_DOWN, // Round 1 losers\n      BOTTOM_UP, // Round 2 losers\n      BOTTOM_UP, // Round 3 losers\n      BOTTOM_UP, // Round 4 losers\n    ],\n  },\n};\n\n// 64-draw with custom pattern\nconst feedPolicy64 = {\n  [POLICY_TYPE_FEED_IN]: {\n    roundFeedProfiles: [\n      TOP_DOWN, // Round 1\n      BOTTOM_UP, // Round 2\n      BOTTOM_UP, // Round 3\n      TOP_DOWN, // Round 4 (break pattern)\n      BOTTOM_UP, // Round 5\n    ],\n  },\n};\n\n// All BOTTOM_UP (conservative)\nconst conservativeFeed = {\n  [POLICY_TYPE_FEED_IN]: {\n    roundFeedProfiles: [BOTTOM_UP, BOTTOM_UP, BOTTOM_UP, BOTTOM_UP],\n  },\n};\n")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Visual Explanation:")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"Consolation Positions: 1, 2, 3, 4, 5, 6, 7, 8\n\nTOP_DOWN feeding:\nLoser A \u2192 Position 1\nLoser B \u2192 Position 2\nLoser C \u2192 Position 3\nLoser D \u2192 Position 4\n...\n\nBOTTOM_UP feeding:\nLoser A \u2192 Position 8\nLoser B \u2192 Position 7\nLoser C \u2192 Position 6\nLoser D \u2192 Position 5\n...\n")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Practical Example:")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"// 32-draw FEED_IN_CHAMPIONSHIP\n\n// Main Draw Round 1: 16 matchUps \u2192 16 losers\n// With TOP_DOWN:\n// Loser from matchUp 1 \u2192 Consolation position 1\n// Loser from matchUp 2 \u2192 Consolation position 2\n// ... \u2192 ...\n// Loser from matchUp 16 \u2192 Consolation position 16\n\n// Main Draw Round 2: 8 matchUps \u2192 8 losers\n// With BOTTOM_UP:\n// Loser from matchUp 1 \u2192 Consolation position 8 (last)\n// Loser from matchUp 2 \u2192 Consolation position 7\n// ... \u2192 ...\n// Loser from matchUp 8 \u2192 Consolation position 1 (first)\n")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Advanced Usage with groupedOrder:")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"const advancedFeedPolicy = {\n  [POLICY_TYPE_FEED_IN]: {\n    roundGroupedOrder: [\n      [1], // R1: Single group\n      [1], // R2: Single group\n      [1, 2], // R3: Two groups\n      [3, 4, 1, 2], // R4: Four groups, reordered\n    ],\n    roundFeedProfiles: [\n      TOP_DOWN, // R1: Top-down for single group\n      BOTTOM_UP, // R2: Bottom-up for single group\n      BOTTOM_UP, // R3: Bottom-up for both groups\n      BOTTOM_UP, // R4: Bottom-up for all four groups\n    ],\n  },\n};\n\n// Round 3 behavior:\n// Group 1 (first half) feeds BOTTOM_UP to their positions\n// Group 2 (second half) feeds BOTTOM_UP to their positions\n")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Notes:")),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Array length should match number of feeding rounds"),(0,a.yg)("li",{parentName:"ul"},"First round typically uses TOP_DOWN"),(0,a.yg)("li",{parentName:"ul"},"Subsequent rounds typically use BOTTOM_UP"),(0,a.yg)("li",{parentName:"ul"},"Affects draw balance and potential matchups"),(0,a.yg)("li",{parentName:"ul"},"Must coordinate with ",(0,a.yg)("inlineCode",{parentName:"li"},"roundGroupedOrder")," for complex draws")),(0,a.yg)("hr",null),(0,a.yg)("h2",{id:"default-behavior-no-policy-specified"},"Default Behavior (No Policy Specified)"),(0,a.yg)("p",null,"When no feed-in policy is provided, the engine uses automatic defaults:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"// Automatic behavior\nconst automaticDefaults = {\n  feedFromMainFinal: false,\n  roundGroupedOrder: [], // Standard sequential grouping\n  roundFeedProfiles: [\n    // Alternates based on round number:\n    // roundNumber % 2 === 1 ? TOP_DOWN : BOTTOM_UP\n  ],\n};\n")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Default Feed Profile Calculation:")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"// From source code: feedInLinks.ts\nconst feedProfile = roundFeedProfiles?.[roundNumber - 1]\n  ? roundFeedProfiles[roundNumber - 1]\n  : (roundNumber % 2 && TOP_DOWN) || BOTTOM_UP;\n\n// Meaning:\n// Round 1 (odd): TOP_DOWN\n// Round 2 (even): BOTTOM_UP\n// Round 3 (odd): TOP_DOWN\n// Round 4 (even): BOTTOM_UP\n// ...continues alternating\n")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"When to Override Defaults:")),(0,a.yg)("p",null,"Override when:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Tournament rules specify different feed patterns"),(0,a.yg)("li",{parentName:"ul"},"Creating custom draw types"),(0,a.yg)("li",{parentName:"ul"},"Optimizing for specific competitive requirements"),(0,a.yg)("li",{parentName:"ul"},"Large draws (128+) need sophisticated grouping")),(0,a.yg)("p",null,"Use defaults when:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Standard feed-in championship"),(0,a.yg)("li",{parentName:"ul"},"Small draws (\u226464)"),(0,a.yg)("li",{parentName:"ul"},"No special federation requirements")),(0,a.yg)("hr",null),(0,a.yg)("h2",{id:"usage-examples"},"Usage Examples"),(0,a.yg)("h3",{id:"basic-usage---standard-feed-in-championship"},"Basic Usage - Standard Feed-In Championship"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"import tournamentEngine from 'tods-competition-factory';\nimport { FEED_IN_CHAMPIONSHIP, POLICY_TYPE_FEED_IN, TOP_DOWN, BOTTOM_UP } from 'tods-competition-factory';\n\n// Create feed-in policy\nconst feedPolicy = {\n  [POLICY_TYPE_FEED_IN]: {\n    feedFromMainFinal: false,\n    roundFeedProfiles: [TOP_DOWN, BOTTOM_UP, BOTTOM_UP, BOTTOM_UP],\n  },\n};\n\n// Generate draw\ntournamentEngine.generateDrawDefinition({\n  drawType: FEED_IN_CHAMPIONSHIP,\n  policyDefinitions: feedPolicy,\n  drawSize: 32,\n  participants: myParticipants,\n  // ...\n});\n")),(0,a.yg)("h3",{id:"fmlc-first-match-loser-consolation"},"FMLC (First Match Loser Consolation)"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"import { FIRST_MATCH_LOSER_CONSOLATION, POLICY_TYPE_FEED_IN } from 'tods-competition-factory';\n\n// FMLC policy - feed from main final\nconst fmlcPolicy = {\n  [POLICY_TYPE_FEED_IN]: {\n    feedFromMainFinal: true,\n    roundFeedProfiles: [TOP_DOWN, BOTTOM_UP, BOTTOM_UP],\n  },\n};\n\ntournamentEngine.generateDrawDefinition({\n  drawType: FIRST_MATCH_LOSER_CONSOLATION,\n  policyDefinitions: fmlcPolicy,\n  drawSize: 16,\n  // ...\n});\n\n// Result:\n// - Main structure: 16 players\n// - Consolation structure: All losers including final\n// - Special link condition for final loser\n")),(0,a.yg)("h3",{id:"64-draw-with-custom-grouping"},"64-Draw with Custom Grouping"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"import { FEED_IN_CHAMPIONSHIP, POLICY_TYPE_FEED_IN, TOP_DOWN, BOTTOM_UP } from 'tods-competition-factory';\n\nconst custom64FeedPolicy = {\n  [POLICY_TYPE_FEED_IN]: {\n    feedFromMainFinal: false,\n    roundGroupedOrder: [\n      [1], // R1: 32 losers, single group\n      [1], // R2: 16 losers, single group\n      [1, 2], // R3: 8 losers, split into 2\n      [1, 2, 3, 4], // R4: 4 losers, split into 4\n      [1, 2], // R5: 2 losers, split into 2\n    ],\n    roundFeedProfiles: [\n      TOP_DOWN, // R1\n      BOTTOM_UP, // R2\n      BOTTOM_UP, // R3\n      BOTTOM_UP, // R4\n      BOTTOM_UP, // R5\n    ],\n  },\n};\n\ntournamentEngine.generateDrawDefinition({\n  drawType: FEED_IN_CHAMPIONSHIP,\n  policyDefinitions: custom64FeedPolicy,\n  drawSize: 64,\n  // ...\n});\n")),(0,a.yg)("h3",{id:"128-draw-professional-tournament"},"128-Draw Professional Tournament"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"import { FEED_IN_CHAMPIONSHIP, POLICY_TYPE_FEED_IN, TOP_DOWN, BOTTOM_UP } from 'tods-competition-factory';\n\nconst pro128FeedPolicy = {\n  [POLICY_TYPE_FEED_IN]: {\n    roundGroupedOrder: [\n      [1], // R1: 64 losers\n      [1], // R2: 32 losers\n      [1, 2], // R3: 16 losers, halves\n      [3, 4, 1, 2], // R4: 8 losers, quarters reordered\n      [2, 1, 4, 3, 6, 5, 8, 7], // R5: 4 losers, eighths alternating\n      [1], // R6: 2 losers, single group\n    ],\n    roundFeedProfiles: [TOP_DOWN, BOTTOM_UP, BOTTOM_UP, BOTTOM_UP, BOTTOM_UP, BOTTOM_UP, BOTTOM_UP],\n  },\n};\n\ntournamentEngine.generateDrawDefinition({\n  drawType: FEED_IN_CHAMPIONSHIP,\n  policyDefinitions: pro128FeedPolicy,\n  drawSize: 128,\n  seedsCount: 32,\n  // ...\n});\n")),(0,a.yg)("h3",{id:"256-draw-with-complex-grouping"},"256-Draw with Complex Grouping"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"import { FEED_IN_CHAMPIONSHIP, POLICY_TYPE_FEED_IN, TOP_DOWN, BOTTOM_UP } from 'tods-competition-factory';\n\nconst pro256FeedPolicy = {\n  [POLICY_TYPE_FEED_IN]: {\n    roundGroupedOrder: [\n      [1], // R1: 128 losers\n      [1], // R2: 64 losers\n      [1, 2], // R3: 32 losers\n      [3, 4, 1, 2], // R4: 16 losers\n      [2, 1, 4, 3, 6, 5, 8, 7], // R5: 8 losers\n      [1], // R6: 4 losers\n    ],\n    roundFeedProfiles: [TOP_DOWN, BOTTOM_UP, BOTTOM_UP, BOTTOM_UP, BOTTOM_UP, BOTTOM_UP, BOTTOM_UP, BOTTOM_UP],\n  },\n};\n\ntournamentEngine.generateDrawDefinition({\n  drawType: FEED_IN_CHAMPIONSHIP,\n  policyDefinitions: pro256FeedPolicy,\n  drawSize: 256,\n  seedsCount: 64,\n  // ...\n});\n")),(0,a.yg)("h3",{id:"feed-in-to-specific-round"},"Feed-In to Specific Round"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"import { FEED_IN_CHAMPIONSHIP_TO_SF, POLICY_TYPE_FEED_IN, TOP_DOWN, BOTTOM_UP } from 'tods-competition-factory';\n\n// Feed-in only up to semifinals\nconst feedToSFPolicy = {\n  [POLICY_TYPE_FEED_IN]: {\n    roundFeedProfiles: [\n      TOP_DOWN,\n      BOTTOM_UP,\n      BOTTOM_UP,\n      // Only 3 rounds feed (up to SF)\n    ],\n  },\n};\n\ntournamentEngine.generateDrawDefinition({\n  drawType: FEED_IN_CHAMPIONSHIP_TO_SF,\n  policyDefinitions: feedToSFPolicy,\n  drawSize: 32,\n  // ...\n});\n\n// Result:\n// - Rounds 1-3 losers feed to consolation\n// - Semifinal and final losers do NOT feed\n// - Consolation ends at specific round\n")),(0,a.yg)("h3",{id:"using-with-other-policies"},"Using with Other Policies"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"import {\n  FEED_IN_CHAMPIONSHIP,\n  POLICY_TYPE_FEED_IN,\n  POLICY_TYPE_SEEDING,\n  POLICY_SEEDING_ITF,\n  TOP_DOWN,\n  BOTTOM_UP,\n} from 'tods-competition-factory';\n\n// Combine feed-in with seeding policy\nconst combinedPolicies = {\n  ...POLICY_SEEDING_ITF, // ITF seeding\n  [POLICY_TYPE_FEED_IN]: {\n    roundGroupedOrder: [[1], [1], [1, 2], [1, 2, 3, 4]],\n    roundFeedProfiles: [TOP_DOWN, BOTTOM_UP, BOTTOM_UP, BOTTOM_UP],\n  },\n};\n\ntournamentEngine.generateDrawDefinition({\n  drawType: FEED_IN_CHAMPIONSHIP,\n  policyDefinitions: combinedPolicies,\n  drawSize: 64,\n  seedsCount: 16,\n  // ...\n});\n")),(0,a.yg)("hr",null),(0,a.yg)("h2",{id:"real-world-scenarios"},"Real-World Scenarios"),(0,a.yg)("h3",{id:"scenario-1-professional-64-draw-feed-in-championship"},"Scenario 1: Professional 64-Draw Feed-In Championship"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"import tournamentEngine from 'tods-competition-factory';\nimport {\n  FEED_IN_CHAMPIONSHIP,\n  POLICY_TYPE_FEED_IN,\n  POLICY_TYPE_SEEDING,\n  SEPARATE,\n  TOP_DOWN,\n  BOTTOM_UP\n} from 'tods-competition-factory';\n\n// Setup: Professional tournament with 64 players\nconst players = [...]; // 64 professional players\n\n// Create comprehensive policy\nconst proTournamentPolicy = {\n  [POLICY_TYPE_SEEDING]: {\n    seedingProfile: { positioning: SEPARATE },\n    validSeedPositions: { ignore: true },\n    duplicateSeedNumbers: false, // Pro tournament - unique seeds\n    drawSizeProgression: true,\n    seedsCountThresholds: [\n      { drawSize: 64, minimumParticipantCount: 48, seedsCount: 16 }\n    ]\n  },\n  [POLICY_TYPE_FEED_IN]: {\n    roundGroupedOrder: [\n      [1],         // R1: 32 losers, all together\n      [1],         // R2: 16 losers, all together\n      [1, 2],      // R3: 8 losers, split into halves\n      [1, 2, 3, 4], // R4: 4 losers, split into quarters\n      [1, 2]       // R5: 2 losers, split into halves\n    ],\n    roundFeedProfiles: [\n      TOP_DOWN,    // R1 feeds from top\n      BOTTOM_UP,   // R2 feeds from bottom\n      BOTTOM_UP,   // R3 feeds from bottom\n      BOTTOM_UP,   // R4 feeds from bottom\n      BOTTOM_UP    // R5 feeds from bottom\n    ]\n  }\n};\n\n// Create tournament\ntournamentEngine.newTournamentRecord({\n  tournamentName: 'Professional Open'\n});\n\nconst eventId = tournamentEngine.addEvent({\n  eventName: 'Men Singles'\n}).eventId;\n\n// Add entries\ntournamentEngine.addEventEntries({\n  eventId,\n  participantIds: players.map(p => p.participantId)\n});\n\n// Generate draw\nconst { drawId } = tournamentEngine.generateDrawDefinition({\n  eventId,\n  drawType: FEED_IN_CHAMPIONSHIP,\n  policyDefinitions: proTournamentPolicy,\n  drawSize: 64,\n  seedsCount: 16\n});\n\n// Result:\n// - Main structure: 64 players, 16 seeds (SEPARATE positioning)\n// - Consolation structure: All losers except finalist and champion\n// - Round 1: 32 losers feed TOP_DOWN\n// - Round 2-5: Losers feed BOTTOM_UP with grouping\n// - Consolation champion determined (3rd place equivalent)\n")),(0,a.yg)("hr",null),(0,a.yg)("h3",{id:"scenario-2-club-tournament-fmlc-first-match-losers-get-second-chance"},"Scenario 2: Club Tournament FMLC (First MATCH Losers Get Second Chance)"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"import {\n  FIRST_MATCH_LOSER_CONSOLATION,\n  POLICY_TYPE_SEEDING,\n  CLUSTER\n} from 'tods-competition-factory';\n\n// 14 club players (16 draw with 2 BYEs)\nconst clubPlayers = [...]; // 14 players\n\n// Club FMLC policy\nconst clubFMLCPolicy = {\n  [POLICY_TYPE_SEEDING]: {\n    seedingProfile: { positioning: CLUSTER },\n    validSeedPositions: { ignore: true },\n    duplicateSeedNumbers: false,\n    drawSizeProgression: true,\n    seedsCountThresholds: [\n      { drawSize: 16, minimumParticipantCount: 12, seedsCount: 4 }\n    ]\n  }\n};\n\n// Create tournament\ntournamentEngine.newTournamentRecord({\n  tournamentName: 'Club Championships'\n});\n\nconst eventId = tournamentEngine.addEvent({\n  eventName: 'Singles'\n}).eventId;\n\ntournamentEngine.addEventEntries({\n  eventId,\n  participantIds: clubPlayers.map(p => p.participantId)\n});\n\n// Generate FMLC draw\nconst { drawId } = tournamentEngine.generateDrawDefinition({\n  eventId,\n  drawType: FIRST_MATCH_LOSER_CONSOLATION,\n  policyDefinitions: clubFMLCPolicy,\n  drawSize: 16,\n  seedsCount: 4\n});\n\n// Result:\n// - Main structure: 16 positions, 14 players, 2 BYEs\n// - Consolation structure: First MATCH losers\n//\n// What happens:\n// Round 1: 7 matches (14 players) \u2192 7 losers feed to consolation\n//          2 BYEs \u2192 2 players advance to round 2 without playing\n//\n// Round 2:\n//   - 7 R1 winners play matches (second match for them)\n//     \u2192 If they lose: ELIMINATED (not first match loser)\n//   - 2 BYE holders play their FIRST MATCH\n//     \u2192 If they lose: CONSOLATION (first match loser)\n//     \u2192 Special linkCondition: FIRST_MATCHUP ensures this\n//\n// Key Insight:\n// - Total consolation players: 7 (R1) + up to 2 (R2 BYE holders who lose)\n// - Maximum 9 players can be in consolation (if both BYE holders lose)\n// - Players who played R1 and lose R2 do NOT go to consolation\n// - FMLC distinguishes between \"first MATCH\" and \"first ROUND\"\n")),(0,a.yg)("hr",null),(0,a.yg)("h3",{id:"scenario-3-college-conference-championship-128-draw"},"Scenario 3: College Conference Championship (128 Draw)"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"import {\n  FEED_IN_CHAMPIONSHIP,\n  POLICY_TYPE_FEED_IN,\n  POLICY_TYPE_SEEDING,\n  SEPARATE,\n  TOP_DOWN,\n  BOTTOM_UP\n} from 'tods-competition-factory';\n\n// 128 college players from conference\nconst collegePlayers = [...]; // 128 players\n\n// College conference policy\nconst collegePolicy = {\n  [POLICY_TYPE_SEEDING]: {\n    seedingProfile: { positioning: SEPARATE },\n    validSeedPositions: { ignore: true },\n    duplicateSeedNumbers: true,\n    drawSizeProgression: true,\n    seedsCountThresholds: [\n      { drawSize: 128, minimumParticipantCount: 96, seedsCount: 32 }\n    ]\n  },\n  [POLICY_TYPE_FEED_IN]: {\n    roundGroupedOrder: [\n      [1],                      // R1: 64 losers\n      [1],                      // R2: 32 losers\n      [1, 2],                   // R3: 16 losers, halves\n      [3, 4, 1, 2],             // R4: 8 losers, quarters reordered\n      [2, 1, 4, 3, 6, 5, 8, 7], // R5: 4 losers, eighths alternating\n      [1]                       // R6: 2 losers\n    ],\n    roundFeedProfiles: [\n      TOP_DOWN,\n      BOTTOM_UP,\n      BOTTOM_UP,\n      BOTTOM_UP,\n      BOTTOM_UP,\n      BOTTOM_UP,\n      BOTTOM_UP\n    ]\n  }\n};\n\n// Create tournament\ntournamentEngine.newTournamentRecord({\n  tournamentName: 'Conference Championships'\n});\n\nconst eventId = tournamentEngine.addEvent({\n  eventName: 'Men Singles'\n}).eventId;\n\n// Generate draw\nconst { drawId } = tournamentEngine.generateDrawDefinition({\n  eventId,\n  drawType: FEED_IN_CHAMPIONSHIP,\n  policyDefinitions: collegePolicy,\n  participants: collegePlayers,\n  drawSize: 128,\n  seedsCount: 32\n});\n\n// Result:\n// - Main: 128 players, 32 seeds\n// - Consolation: Large structure with sophisticated grouping\n// - Complex feed patterns ensure competitive balance\n// - Consolation winner receives recognition (All-Conference honors)\n")),(0,a.yg)("hr",null),(0,a.yg)("h3",{id:"scenario-4-club-tournament-feed-in-32-draw"},"Scenario 4: Club Tournament Feed-In (32 Draw)"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"import {\n  FEED_IN_CHAMPIONSHIP,\n  POLICY_TYPE_FEED_IN,\n  POLICY_TYPE_SEEDING,\n  CLUSTER,\n  TOP_DOWN,\n  BOTTOM_UP,\n} from 'tods-competition-factory';\n\n// 28 club members\nconst clubMembers = [\n  // 28 players with club rankings\n];\n\n// Simple club policy\nconst clubPolicy = {\n  [POLICY_TYPE_SEEDING]: {\n    seedingProfile: { positioning: CLUSTER },\n    validSeedPositions: { ignore: true },\n    duplicateSeedNumbers: false,\n    drawSizeProgression: true,\n    seedsCountThresholds: [{ drawSize: 32, minimumParticipantCount: 24, seedsCount: 8 }],\n  },\n  [POLICY_TYPE_FEED_IN]: {\n    // Use default grouping (no roundGroupedOrder)\n    roundFeedProfiles: [TOP_DOWN, BOTTOM_UP, BOTTOM_UP, BOTTOM_UP],\n  },\n};\n\n// Create tournament\ntournamentEngine.newTournamentRecord({\n  tournamentName: 'Club Championships',\n});\n\nconst eventId = tournamentEngine.addEvent({\n  eventName: 'Open Singles',\n}).eventId;\n\ntournamentEngine.addEventEntries({\n  eventId,\n  participantIds: clubMembers.map((p) => p.participantId),\n});\n\n// Generate draw\nconst { drawId } = tournamentEngine.generateDrawDefinition({\n  eventId,\n  drawType: FEED_IN_CHAMPIONSHIP,\n  policyDefinitions: clubPolicy,\n  drawSize: 32,\n  seedsCount: 8,\n  // 28 participants \u2192 4 BYEs\n});\n\n// Result:\n// - Main: 32 positions, 28 players, 8 seeds, 4 BYEs\n// - Consolation: All losers except finalists\n// - Simple feed pattern appropriate for club level\n// - Everyone except top 2 finishers plays in consolation\n")),(0,a.yg)("hr",null),(0,a.yg)("h2",{id:"notes"},"Notes"),(0,a.yg)("h3",{id:"feed-direction-impact"},"Feed Direction Impact"),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"TOP_DOWN vs BOTTOM_UP")," affects matchup spacing:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"Consolation Bracket (8 positions):\n\nTOP_DOWN:                  BOTTOM_UP:\n1 \u2500\u252c\u2500 M1                  8 \u2500\u252c\u2500 M1\n2 \u2500\u2518                      7 \u2500\u2518\n3 \u2500\u252c\u2500 M2                  6 \u2500\u252c\u2500 M2\n4 \u2500\u2518                      5 \u2500\u2518\n5 \u2500\u252c\u2500 M3                  4 \u2500\u252c\u2500 M3\n6 \u2500\u2518                      3 \u2500\u2518\n7 \u2500\u252c\u2500 M4                  2 \u2500\u252c\u2500 M4\n8 \u2500\u2518                      1 \u2500\u2518\n\nEffect on competitive balance and bracket aesthetics\n")),(0,a.yg)("hr",null),(0,a.yg)("h3",{id:"grouped-order-strategy"},"Grouped Order Strategy"),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Why use complex groupedOrder?")),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Competitive Balance:")," Prevents strength clustering"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Draw Aesthetics:")," Better visual distribution"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Fairness:")," Equal difficulty paths through consolation"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Federation Standards:")," ITF/USTA specifications")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Simple vs Complex:")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"// Simple (small draws \u226432)\nroundGroupedOrder: [[1], [1], [1, 2]];\n\n// Complex (large draws 128+)\nroundGroupedOrder: [[1], [1], [1, 2], [3, 4, 1, 2], [2, 1, 4, 3, 6, 5, 8, 7], [1]];\n")),(0,a.yg)("hr",null),(0,a.yg)("h3",{id:"link-structure"},"Link Structure"),(0,a.yg)("p",null,"Feed-in draws create ",(0,a.yg)("strong",{parentName:"p"},"DrawLink")," objects:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-typescript"},"{\n  linkType: 'LOSER',\n  source: {\n    structureId: 'main-structure-id',\n    roundNumber: 3\n  },\n  target: {\n    structureId: 'consolation-structure-id',\n    roundNumber: 2,\n    feedProfile: 'BOTTOM_UP',\n    groupedOrder: [1, 2]\n  },\n  linkCondition: 'FIRST_MATCHUP' // Optional, for FMLC\n}\n")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Special Link Conditions:")),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"FIRST_MATCHUP"),": Used in FMLC for round 2 links"),(0,a.yg)("li",{parentName:"ul"},"Only feeds players from round 2 if it was their FIRST match (they had a BYE in round 1)"),(0,a.yg)("li",{parentName:"ul"},'Distinguishes between "first match losers" and "second match losers" in round 2'),(0,a.yg)("li",{parentName:"ul"},"Players who played in round 1 and lose in round 2 do NOT feed (eliminated)")),(0,a.yg)("hr",null),(0,a.yg)("h3",{id:"round-matching"},"Round Matching"),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"How rounds map from main to consolation:")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"// 32-draw example:\nMain Round 1 (16 matchUps) \u2192 Consolation Round 1 (16 positions)\nMain Round 2 (8 matchUps)  \u2192 Consolation Round 1 (fills remaining)\nMain Round 3 (4 matchUps)  \u2192 Consolation Round 2\nMain Round 4 (2 matchUps)  \u2192 Consolation Round 3\nMain Round 5 (1 matchUp)   \u2192 Does not feed (final)\n\n// Formula after first two rounds:\ntargetRound = roundNumber <= 2\n  ? roundNumber\n  : (roundNumber - 2) * 2 + 2\n")),(0,a.yg)("hr",null),(0,a.yg)("h3",{id:"performance-considerations"},"Performance Considerations"),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Large Draws (128+):")),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Complex groupedOrder increases calculation time"),(0,a.yg)("li",{parentName:"ul"},"Link generation is O(n) where n = number of rounds"),(0,a.yg)("li",{parentName:"ul"},"Pre-calculate policies for frequently used draw sizes")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Testing Recommendations:")),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Test feed patterns before tournament"),(0,a.yg)("li",{parentName:"ul"},"Verify all losers are correctly placed"),(0,a.yg)("li",{parentName:"ul"},"Check consolation structure integrity")),(0,a.yg)("hr",null),(0,a.yg)("h3",{id:"validation-rules"},"Validation Rules"),(0,a.yg)("p",null,"The engine validates:"),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("p",{parentName:"li"},(0,a.yg)("strong",{parentName:"p"},"roundFeedProfiles:")),(0,a.yg)("ul",{parentName:"li"},(0,a.yg)("li",{parentName:"ul"},"Length should match feeding rounds count"),(0,a.yg)("li",{parentName:"ul"},"Each value must be TOP_DOWN or BOTTOM_UP"))),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("p",{parentName:"li"},(0,a.yg)("strong",{parentName:"p"},"roundGroupedOrder:")),(0,a.yg)("ul",{parentName:"li"},(0,a.yg)("li",{parentName:"ul"},"Each array should have valid group numbers"),(0,a.yg)("li",{parentName:"ul"},"Group numbers should be sequential or follow pattern"),(0,a.yg)("li",{parentName:"ul"},"Empty arrays allowed (no feeding from that round)"))),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("p",{parentName:"li"},(0,a.yg)("strong",{parentName:"p"},"feedFromMainFinal:")),(0,a.yg)("ul",{parentName:"li"},(0,a.yg)("li",{parentName:"ul"},"Must be boolean"),(0,a.yg)("li",{parentName:"ul"},"Affects final round link creation"))),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("p",{parentName:"li"},(0,a.yg)("strong",{parentName:"p"},"Draw Type Compatibility:")),(0,a.yg)("ul",{parentName:"li"},(0,a.yg)("li",{parentName:"ul"},"Policy only applies to feed-in draw types"),(0,a.yg)("li",{parentName:"ul"},"Warning if used with non-applicable draw type")))),(0,a.yg)("hr",null),(0,a.yg)("h3",{id:"common-pitfalls"},"Common Pitfalls"),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"1. Wrong Feed Direction:")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"// \u274c All TOP_DOWN (not recommended)\nroundFeedProfiles: [TOP_DOWN, TOP_DOWN, TOP_DOWN];\n\n// \u2705 Typical pattern\nroundFeedProfiles: [TOP_DOWN, BOTTOM_UP, BOTTOM_UP];\n")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"2. Mismatched Array Lengths:")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"// \u274c Mismatch\nroundGroupedOrder: [[1], [1], [1, 2]],  // 3 rounds\nroundFeedProfiles: [TOP_DOWN, BOTTOM_UP] // 2 rounds - Missing!\n\n// \u2705 Matched\nroundGroupedOrder: [[1], [1], [1, 2]],\nroundFeedProfiles: [TOP_DOWN, BOTTOM_UP, BOTTOM_UP]\n")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"3. Complex Grouping without Testing:")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"// \u274c Complex pattern without validation\nroundGroupedOrder: [[2, 1, 4, 3, 6, 5, 8, 7]],\n\n// \u2705 Test with actual draw\n// Use engine's validation or create test draw first\n")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"4. Using with Wrong Draw Type:")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"// \u274c Feed policy with elimination\ntournamentEngine.generateDrawDefinition({\n  drawType: 'SINGLE_ELIMINATION', // No consolation!\n  policyDefinitions: feedPolicy, // Policy ignored\n});\n\n// \u2705 Feed policy with feed-in draw\ntournamentEngine.generateDrawDefinition({\n  drawType: FEED_IN_CHAMPIONSHIP,\n  policyDefinitions: feedPolicy,\n});\n")),(0,a.yg)("hr",null),(0,a.yg)("h2",{id:"integration-with-other-policies"},"Integration with Other Policies"),(0,a.yg)("p",null,"Feed-in policy works with:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Seeding Policy:")," Seeds placed in main, affects who feeds when"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Progression Policy:")," Consolation advancement rules"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Scoring Policy:")," Same scoring applies to consolation"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Position Actions Policy:")," Position restrictions apply"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"MatchUp Actions Policy:")," MatchUp constraints apply")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Example Integration:")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"import {\n  FEED_IN_CHAMPIONSHIP,\n  POLICY_SEEDING_ITF,\n  POLICY_TYPE_FEED_IN,\n  TOP_DOWN,\n  BOTTOM_UP,\n} from 'tods-competition-factory';\n\nconst fullPolicies = {\n  ...POLICY_SEEDING_ITF,\n  [POLICY_TYPE_FEED_IN]: {\n    feedFromMainFinal: false,\n    roundFeedProfiles: [TOP_DOWN, BOTTOM_UP, BOTTOM_UP],\n  },\n};\n\ntournamentEngine.generateDrawDefinition({\n  drawType: FEED_IN_CHAMPIONSHIP,\n  policyDefinitions: fullPolicies,\n  drawSize: 32,\n});\n")),(0,a.yg)("hr",null),(0,a.yg)("h2",{id:"related-methods"},"Related Methods"),(0,a.yg)("h3",{id:"query-methods"},"Query Methods"),(0,a.yg)("h4",{id:"getstructurelinks"},(0,a.yg)("inlineCode",{parentName:"h4"},"getStructureLinks()")),(0,a.yg)("p",null,"Retrieves links between structures."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"import { getStructureLinks } from 'tods-competition-factory';\n\nconst { links } = getStructureLinks({\n  drawDefinition,\n  structureId: mainStructureId,\n});\n\n// Returns array of DrawLink objects showing feed connections\n")),(0,a.yg)("h4",{id:"getallstructurematchups"},(0,a.yg)("inlineCode",{parentName:"h4"},"getAllStructureMatchUps()")),(0,a.yg)("p",null,"Gets all matchUps from a structure (main or consolation)."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"tournamentEngine.getAllStructureMatchUps({\n  drawId,\n  structureId: consolationStructureId,\n});\n")),(0,a.yg)("hr",null),(0,a.yg)("h3",{id:"mutation-methods"},"Mutation Methods"),(0,a.yg)("h4",{id:"generatedrawdefinition"},(0,a.yg)("inlineCode",{parentName:"h4"},"generateDrawDefinition()")),(0,a.yg)("p",null,"Primary method for creating feed-in draws."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"tournamentEngine.generateDrawDefinition({\n  drawType: FEED_IN_CHAMPIONSHIP,\n  policyDefinitions: { [POLICY_TYPE_FEED_IN]: feedPolicy },\n  drawSize: 64,\n  // ...\n});\n")),(0,a.yg)("hr",null),(0,a.yg)("h2",{id:"related-concepts"},"Related Concepts"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Feed-In Draws")," - Draw types where losers feed into consolation structures"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Draw Structures")," - Main and consolation structure organization"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Draw Links")," - How losers connect from main to consolation via links"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Consolation Draws")," - Secondary competition for eliminated players"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("a",{parentName:"strong",href:"/tods-competition-factory/docs/policies/seedingPolicy"},"Seeding Policy"))," - How seeding interacts with feed-in draws")),(0,a.yg)("hr",null),(0,a.yg)("h2",{id:"summary"},"Summary"),(0,a.yg)("p",null,"The ",(0,a.yg)("strong",{parentName:"p"},"Feed-In Policy")," controls how losers transition from main to consolation structures in feed-in draw types:"),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Three Key Attributes:")),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"feedFromMainFinal"))," - Whether final loser feeds to consolation"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"roundGroupedOrder"))," - How losers from same round are grouped and ordered"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"roundFeedProfiles"))," - Direction (TOP_DOWN/BOTTOM_UP) for each round")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Applicable to:")),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"FEED_IN_CHAMPIONSHIP (all variants)"),(0,a.yg)("li",{parentName:"ul"},"FIRST_MATCH_LOSER_CONSOLATION"),(0,a.yg)("li",{parentName:"ul"},"MODIFIED_FEED_IN_CHAMPIONSHIP")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Default Behavior:")),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Alternates TOP_DOWN (odd rounds) and BOTTOM_UP (even rounds)"),(0,a.yg)("li",{parentName:"ul"},"Sequential grouping (no complex reordering)"),(0,a.yg)("li",{parentName:"ul"},"Final loser does NOT feed")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Best Practices:")),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Use defaults for draws \u226432"),(0,a.yg)("li",{parentName:"ul"},"Customize for larger draws (64+)"),(0,a.yg)("li",{parentName:"ul"},"Test complex grouping patterns"),(0,a.yg)("li",{parentName:"ul"},"Match array lengths (groupedOrder and feedProfiles)"),(0,a.yg)("li",{parentName:"ul"},"Coordinate with seeding policy")),(0,a.yg)("p",null,"The policy ensures fair consolation structures where all players (except top 2) have opportunity to compete for consolation title, maintaining competitive balance and player satisfaction throughout the tournament."))}g.isMDXComponent=!0}}]);