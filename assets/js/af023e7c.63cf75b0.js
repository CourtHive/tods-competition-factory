"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[9236],{2569:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>m,contentTitle:()=>h,default:()=>b,frontMatter:()=>l,metadata:()=>u,toc:()=>p});var n=a(1527),d=a(7942),i=a(7357);const c=JSON.parse('[{"participantId":"732cc1d0-4e8d-4575-a407-3e576dd5b395","participantType":"INDIVIDUAL","participantRole":"COMPETITOR","participantName":"Mai Nirundorn","person":{"addresses":[{"city":"Koloa","state":"MN","postalCode":"06246","countryCode":"VIR"}],"personId":"fd49533c-fcce-48d7-9ee3-b904b143ef0b","standardFamilyName":"Nirundorn","standardGivenName":"Mai","nationalityCode":"VIR","extensions":[{"name":"regionCode","value":1}],"sex":"FEMALE"},"draws":[{"drawName":"SINGLE_ELIMINATION","drawType":"SINGLE_ELIMINATION","entryStage":"MAIN","entryStatus":"DIRECT_ACCEPTANCE","eventId":"2293081f-475a-4fe2-b774-35c65be3d38a","drawId":"6d8ffefb-c1c2-4211-856b-a508a36ed148"},{"drawName":"SINGLE_ELIMINATION","drawType":"SINGLE_ELIMINATION","entryStage":"MAIN","entryStatus":"DIRECT_ACCEPTANCE","eventId":"cd2c7d3e-f4c3-43df-8e06-ad8623c330cb","drawId":"4bcddbeb-8fea-4567-b321-5fbadb61e83f"}],"events":[{"eventId":"2293081f-475a-4fe2-b774-35c65be3d38a","eventName":"Generated Event","eventType":"SINGLES","entryStage":"MAIN","entryStatus":"DIRECT_ACCEPTANCE","drawIds":["6d8ffefb-c1c2-4211-856b-a508a36ed148"]},{"eventId":"cd2c7d3e-f4c3-43df-8e06-ad8623c330cb","eventName":"Generated Event","eventType":"DOUBLES","entryStage":"MAIN","entryStatus":"DIRECT_ACCEPTANCE","drawIds":["4bcddbeb-8fea-4567-b321-5fbadb61e83f"],"partnerParticipantId":"09e8fd0b-a7f2-4053-8d11-33df910639c4"}],"potentialMatchUps":[{"drawId":"6d8ffefb-c1c2-4211-856b-a508a36ed148","eventId":"2293081f-475a-4fe2-b774-35c65be3d38a","eventType":"SINGLES","matchUpId":"96c69f86-9686-436c-803e-26ea7ddc1ab8","matchUpFormat":"SET3-S:6/TB7","roundName":"QF","roundNumber":2,"roundPosition":4,"schedule":{"time":"00:00:00","milliseconds":0,"scheduledDate":"2021-01-01","scheduledTime":"09:00","averageMinutes":90,"timeAfterRecovery":"11:30","typeChangeTimeAfterRecovery":"11:30","scheduleConflict":"2fa18511-5d50-4ae8-8a66-609cc4737e96"},"structureName":"MAIN","potential":true},{"drawId":"4bcddbeb-8fea-4567-b321-5fbadb61e83f","eventId":"cd2c7d3e-f4c3-43df-8e06-ad8623c330cb","eventType":"DOUBLES","matchUpId":"cdd04d5d-01a5-4698-ae22-8592417e1a2a","matchUpFormat":"SET3-S:6/TB7","roundName":"QF","roundNumber":2,"roundPosition":3,"schedule":{},"structureName":"MAIN","potential":true}],"matchUps":[{"drawId":"6d8ffefb-c1c2-4211-856b-a508a36ed148","eventId":"2293081f-475a-4fe2-b774-35c65be3d38a","eventType":"SINGLES","matchUpId":"733c4e76-5da7-4e68-9ba2-2450dbfb4bd6","matchUpFormat":"SET3-S:6/TB7","matchUpStatus":"TO_BE_PLAYED","opponentParticipantInfo":[{"participantId":"68452ced-8d45-4a08-83c7-dc045580a827","participantType":"INDIVIDUAL"}],"roundName":"R16","roundNumber":1,"roundPosition":7,"schedule":{"time":"00:00:00","milliseconds":0,"scheduledDate":"2021-01-01","scheduledTime":"08:00","averageMinutes":90,"timeAfterRecovery":"10:30","typeChangeTimeAfterRecovery":"10:30"},"structureName":"MAIN","winnerTo":{"matchUpId":"96c69f86-9686-436c-803e-26ea7ddc1ab8","structureId":"9c543188-4134-4e4e-94eb-294cccfa3d64","schedule":{"time":"00:00:00","milliseconds":0,"scheduledDate":"2021-01-01","scheduledTime":"09:00","averageMinutes":90,"timeAfterRecovery":"11:30","typeChangeTimeAfterRecovery":"11:30","scheduleConflict":"2fa18511-5d50-4ae8-8a66-609cc4737e96"},"roundNumber":2,"roundPosition":4,"structureName":"MAIN"}},{"drawId":"4bcddbeb-8fea-4567-b321-5fbadb61e83f","eventId":"cd2c7d3e-f4c3-43df-8e06-ad8623c330cb","eventType":"DOUBLES","matchUpId":"86c7b7ec-f52e-4430-9335-e976874f7985","matchUpFormat":"SET3-S:6/TB7","matchUpStatus":"TO_BE_PLAYED","opponentParticipantInfo":[{"participantId":"d4f90c16-e7b0-4678-bd03-0eb1993ca785","participantType":"INDIVIDUAL"},{"participantId":"8fae7235-3f26-4e7b-95b8-94048186683f","participantType":"INDIVIDUAL"},{"participantId":"5f24f02b-bccd-4ff8-981b-677f28ea9f93","participantType":"PAIR"}],"partnerParticipantId":"09e8fd0b-a7f2-4053-8d11-33df910639c4","roundName":"R16","roundNumber":1,"roundPosition":6,"schedule":{},"structureName":"MAIN","winnerTo":{"matchUpId":"cdd04d5d-01a5-4698-ae22-8592417e1a2a","structureId":"6f4629ae-c2f0-460c-8c60-781bcae79187","schedule":{},"roundNumber":2,"roundPosition":3,"structureName":"MAIN"}}],"statistics":[{"statCode":"winRatio","numerator":0,"denominator":0,"statValue":0}],"scheduleConflicts":[{"priorScheduledMatchUpId":"2fa18511-5d50-4ae8-8a66-609cc4737e96","matchUpIdWithConflict":"96c69f86-9686-436c-803e-26ea7ddc1ab8"}]},{"participantId":"09e8fd0b-a7f2-4053-8d11-33df910639c4","participantType":"INDIVIDUAL","participantRole":"COMPETITOR","participantName":"Flavio Cobolli","person":{"addresses":[{"city":"Koloa","state":"MN","postalCode":"06246","countryCode":"TUN"}],"personId":"c7b4f678-c4fc-47de-81df-9966328281a1","standardFamilyName":"Cobolli","standardGivenName":"Flavio","nationalityCode":"TUN","extensions":[{"name":"regionCode","value":2}],"sex":"MALE"},"draws":[{"drawName":"SINGLE_ELIMINATION","drawType":"SINGLE_ELIMINATION","entryStage":"MAIN","entryStatus":"DIRECT_ACCEPTANCE","eventId":"2293081f-475a-4fe2-b774-35c65be3d38a","drawId":"6d8ffefb-c1c2-4211-856b-a508a36ed148"},{"drawName":"SINGLE_ELIMINATION","drawType":"SINGLE_ELIMINATION","entryStage":"MAIN","entryStatus":"DIRECT_ACCEPTANCE","eventId":"cd2c7d3e-f4c3-43df-8e06-ad8623c330cb","drawId":"4bcddbeb-8fea-4567-b321-5fbadb61e83f"}],"events":[{"eventId":"2293081f-475a-4fe2-b774-35c65be3d38a","eventName":"Generated Event","eventType":"SINGLES","entryStage":"MAIN","entryStatus":"DIRECT_ACCEPTANCE","drawIds":["6d8ffefb-c1c2-4211-856b-a508a36ed148"]},{"eventId":"cd2c7d3e-f4c3-43df-8e06-ad8623c330cb","eventName":"Generated Event","eventType":"DOUBLES","entryStage":"MAIN","entryStatus":"DIRECT_ACCEPTANCE","drawIds":["4bcddbeb-8fea-4567-b321-5fbadb61e83f"],"partnerParticipantId":"732cc1d0-4e8d-4575-a407-3e576dd5b395"}],"potentialMatchUps":[{"drawId":"6d8ffefb-c1c2-4211-856b-a508a36ed148","eventId":"2293081f-475a-4fe2-b774-35c65be3d38a","eventType":"SINGLES","matchUpId":"05c88ab4-920e-4e56-9c85-216c350f23a1","matchUpFormat":"SET3-S:6/TB7","roundName":"QF","roundNumber":2,"roundPosition":3,"schedule":{"time":"00:00:00","milliseconds":0,"scheduledDate":"2021-01-01","scheduledTime":"09:00","averageMinutes":90,"timeAfterRecovery":"11:30","typeChangeTimeAfterRecovery":"11:30","scheduleConflict":"793d3ea5-23bf-415b-bc0a-9afc8086c1b0"},"structureName":"MAIN","potential":true},{"drawId":"4bcddbeb-8fea-4567-b321-5fbadb61e83f","eventId":"cd2c7d3e-f4c3-43df-8e06-ad8623c330cb","eventType":"DOUBLES","matchUpId":"cdd04d5d-01a5-4698-ae22-8592417e1a2a","matchUpFormat":"SET3-S:6/TB7","roundName":"QF","roundNumber":2,"roundPosition":3,"schedule":{},"structureName":"MAIN","potential":true}],"matchUps":[{"drawId":"6d8ffefb-c1c2-4211-856b-a508a36ed148","eventId":"2293081f-475a-4fe2-b774-35c65be3d38a","eventType":"SINGLES","matchUpId":"793d3ea5-23bf-415b-bc0a-9afc8086c1b0","matchUpFormat":"SET3-S:6/TB7","matchUpStatus":"TO_BE_PLAYED","opponentParticipantInfo":[{"participantId":"6ed42edb-85e6-4d0a-ba99-7c4c3f1b2ce6","participantType":"INDIVIDUAL"}],"roundName":"R16","roundNumber":1,"roundPosition":6,"schedule":{"time":"00:00:00","milliseconds":0,"scheduledDate":"2021-01-01","scheduledTime":"08:00","averageMinutes":90,"timeAfterRecovery":"10:30","typeChangeTimeAfterRecovery":"10:30"},"structureName":"MAIN","winnerTo":{"matchUpId":"05c88ab4-920e-4e56-9c85-216c350f23a1","structureId":"9c543188-4134-4e4e-94eb-294cccfa3d64","schedule":{"time":"00:00:00","milliseconds":0,"scheduledDate":"2021-01-01","scheduledTime":"09:00","averageMinutes":90,"timeAfterRecovery":"11:30","typeChangeTimeAfterRecovery":"11:30","scheduleConflict":"793d3ea5-23bf-415b-bc0a-9afc8086c1b0"},"roundNumber":2,"roundPosition":3,"structureName":"MAIN"}},{"drawId":"4bcddbeb-8fea-4567-b321-5fbadb61e83f","eventId":"cd2c7d3e-f4c3-43df-8e06-ad8623c330cb","eventType":"DOUBLES","matchUpId":"86c7b7ec-f52e-4430-9335-e976874f7985","matchUpFormat":"SET3-S:6/TB7","matchUpStatus":"TO_BE_PLAYED","opponentParticipantInfo":[{"participantId":"d4f90c16-e7b0-4678-bd03-0eb1993ca785","participantType":"INDIVIDUAL"},{"participantId":"8fae7235-3f26-4e7b-95b8-94048186683f","participantType":"INDIVIDUAL"},{"participantId":"5f24f02b-bccd-4ff8-981b-677f28ea9f93","participantType":"PAIR"}],"partnerParticipantId":"732cc1d0-4e8d-4575-a407-3e576dd5b395","roundName":"R16","roundNumber":1,"roundPosition":6,"schedule":{},"structureName":"MAIN","winnerTo":{"matchUpId":"cdd04d5d-01a5-4698-ae22-8592417e1a2a","structureId":"6f4629ae-c2f0-460c-8c60-781bcae79187","schedule":{},"roundNumber":2,"roundPosition":3,"structureName":"MAIN"}}],"statistics":[{"statCode":"winRatio","numerator":0,"denominator":0,"statValue":0}],"scheduleConflicts":[{"priorScheduledMatchUpId":"793d3ea5-23bf-415b-bc0a-9afc8086c1b0","matchUpIdWithConflict":"05c88ab4-920e-4e56-9c85-216c350f23a1"}]}]'),r=JSON.parse('[{"date":"2020-01-01","startTime":"07:00","endTime":"19:00","bookings":[{"startTime":"07:00","endTime":"08:30","bookingType":"PRACTICE"},{"startTime":"08:30","endTime":"09:00","bookingType":"MAINTENANCE"},{"startTime":"13:30","endTime":"14:00","bookingType":"MAINTENANCE"}]}]'),s=JSON.parse('[{"scheduleDate":"2020-04-30","venues":[{"venueId":"a37dfa4f-e6a0-4ebd-bdbd-d22c8870bfd5","rounds":[{"tournamentId":"dbc5b3d2-c6ab-45d2-ae88-5f3745990647","eventId":"F75AEAA6-58FE-4310-A8EE-E3DFA373B206","drawId":"48f71377-e8dc-4af3-8b44-52a29efa6a1e","structureId":"11d05713-535f-4d4b-b52b-13a36398a9d9","id":"11d05713-535f-4d4b-b52b-13a36398a9d9-bdea1fe3-ab3b-4528-ab38-fbfd27469bc6","eventName":"U18 Female Singles","notBeforeTime":"","roundName":"R32","roundNumber":1,"sortOrder":1},{"tournamentId":"dbc5b3d2-c6ab-45d2-ae88-5f3745990647","eventId":"F75AEAA6-58FE-4310-A8EE-E3DFA373B206","drawId":"48f71377-e8dc-4af3-8b44-52a29efa6a1e","structureId":"11d05713-535f-4d4b-b52b-13a36398a9d9","id":"11d05713-535f-4d4b-b52b-13a36398a9d9-16035215-ca57-4722-9de5-5af82c3b234c","eventName":"U18 Female Singles","notBeforeTime":"","roundName":"R16","roundNumber":2,"sortOrder":2}]}]},{"scheduleDate":"2020-05-01","venues":[{"venueId":"a37dfa4f-e6a0-4ebd-bdbd-d22c8870bfd5","rounds":[{"tournamentId":"dbc5b3d2-c6ab-45d2-ae88-5f3745990647","eventId":"6F15E022-A6B7-4117-AA81-B3FE089FAD72","drawId":"01b5116e-b1d4-48b3-8b3f-8438a5350a59","structureId":"46a5aed3-2f11-4db4-83fb-9da5ffa6156e","roundNumber":1,"id":"46a5aed3-2f11-4db4-83fb-9da5ffa6156e-1c78036f-cd89-45d0-8d07-1c390580fdea","eventName":"U18 Male Doubles","roundName":"E-R16"},{"tournamentId":"dbc5b3d2-c6ab-45d2-ae88-5f3745990647","eventId":"6F15E022-A6B7-4117-AA81-B3FE089FAD72","drawId":"01b5116e-b1d4-48b3-8b3f-8438a5350a59","structureId":"46a5aed3-2f11-4db4-83fb-9da5ffa6156e","roundNumber":2,"id":"46a5aed3-2f11-4db4-83fb-9da5ffa6156e-b3ff539e-8967-4fb9-b954-797b13546acb","eventName":"U18 Male Doubles","roundName":"E-QF"}]}]}]'),o=JSON.parse('{"defaultTimes":{"averageTimes":[{"categoryNames":[],"minutes":{"default":90}}],"recoveryTimes":[{"minutes":{"DOUBLES":30,"default":60}}]},"defaultDailyLimits":{"SINGLES":2,"DOUBLES":2,"total":3},"matchUpAverageTimes":[{"matchUpFormatCodes":["SET3-S:6/TB7"],"averageTimes":[{"categoryTypes":["JUNIOR"],"minutes":{"default":97}},{"categoryTypes":["ADULT","WHEELCHAIR"],"minutes":{"default":120}}]},{"matchUpFormatCodes":["SET3-S:6/TB7-F:TB10"],"averageTimes":[{"categoryNames":[],"minutes":{"default":90}},{"categoryTypes":["ADULT"],"minutes":{"default":90}}]},{"matchUpFormatCodes":["SET3-S:6/TB7-F:TB7"],"averageTimes":[{"categoryNames":[],"minutes":{"default":70}}]},{"matchUpFormatCodes":["SET3-S:4/TB7"],"averageTimes":[{"categoryNames":[],"minutes":{"default":60}}]},{"matchUpFormatCodes":["SET3-S:4/TB7-F:TB7"],"averageTimes":[{"categoryNames":[],"minutes":{"default":55}}]},{"matchUpFormatCodes":["SET3-S:4/TB7-F:TB7"],"averageTimes":[{"categoryNames":[],"minutes":{"default":50}}]},{"matchUpFormatCodes":["SET3-S:4/TB5@3"],"averageTimes":[{"categoryNames":[],"minutes":{"default":45}}]},{"matchUpFormatCodes":["SET1-S:8/TB7"],"averageTimes":[{"categoryNames":[],"minutes":{"default":40}}]},{"matchUpFormatCodes":["SET1-S:6/TB7"],"averageTimes":[{"categoryNames":[],"minutes":{"default":30}}]},{"matchUpFormatCodes":["SET1-S:4/TB7","SET1-S:4/TB5@3","SET3-S:TB10","SET1-S:T20"],"averageTimes":[{"categoryNames":[],"minutes":{"default":20}}]},{"matchUpFormatCodes":["SET1-S:TB10"],"averageTimes":[{"categoryNames":[],"minutes":{"default":10}}]}],"matchUpRecoveryTimes":[{"matchUpFormatCodes":["SET3-S:6/TB7"],"recoveryTimes":[{"categoryNames":[],"minutes":{"default":60,"DOUBLES":30}}]},{"averageTimes":{"greaterThan":29,"lessThan":70},"recoveryTimes":[{"categoryNames":[],"minutes":{"default":30}}]},{"averageTimes":{"lessThan":30},"recoveryTimes":[{"categoryNames":[],"minutes":{"default":15,"DOUBLES":15}}]}],"matchUpDailyLimits":[{"matchUpFormatCodes":[],"limits":[{"categoryNames":[],"categoryTypes":[],"matchesCombinations":[{"SINGLES":{"default":2},"DOUBLES":{"default":1}},{"SINGLES":{"default":1},"DOUBLES":{"default":2}}],"sets":{"total":9,"SINGLES":6,"DOUBLES":9}}]},{"matchUpFormatCodes":["S3-S:TB10"],"limits":[{"categoryNames":["12U"],"matchesCombinations":[{"SINGLES":{"default":2}},{"SINGLES":{"default":1},"DOUBLES":{"default":2}},{"DOUBLES":{"default":3}}],"sets":{"total":9,"DOUBLES":9,"SINGLES":6}}]}]}'),l={title:"Scheduling"},h=void 0,u={id:"concepts/scheduling",title:"Scheduling",description:"Overview",source:"@site/docs/concepts/scheduling.mdx",sourceDirName:"concepts",slug:"/concepts/scheduling",permalink:"/tods-competition-factory/docs/concepts/scheduling",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Scheduling"},sidebar:"docs",previous:{title:"Feed Policy",permalink:"/tods-competition-factory/docs/policies/feedPolicy"},next:{title:"Scale Items",permalink:"/tods-competition-factory/docs/concepts/scaleItems"}},m={},p=[{value:"Overview",id:"overview",level:2},{value:"dateAvailability",id:"dateavailability",level:3},{value:"Iterative Garman scheduling",id:"iterative-garman-scheduling",level:2},{value:"schedulingProfile",id:"schedulingprofile",level:2},{value:"Example",id:"example",level:3},{value:"Scheduling policy",id:"scheduling-policy",level:2},{value:"Overriding policies",id:"overriding-policies",level:2},{value:"Automated Scheduling",id:"automated-scheduling",level:2},{value:"Pseudocode",id:"pseudocode",level:3},{value:"Schedule Conflict Reporting",id:"schedule-conflict-reporting",level:2},{value:"Example participants with schedule conflicts",id:"example-participants-with-schedule-conflicts",level:3}];function f(e){const t={admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,d.ah)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,n.jsxs)(t.p,{children:["Scheduling is the process of assigning ",(0,n.jsx)(t.strong,{children:"dates"}),", ",(0,n.jsx)(t.strong,{children:"venues"}),", ",(0,n.jsx)(t.strong,{children:"courts"})," and ",(0,n.jsx)(t.strong,{children:"times"})," to tournament ",(0,n.jsx)(t.code,{children:"matchUps"}),"."]}),"\n",(0,n.jsxs)(t.p,{children:["In TODS, scheduling information is attached to ",(0,n.jsx)(t.code,{children:"matchUps"})," as ",(0,n.jsx)(t.code,{children:"timeItems"})," and the schedule is derived by interrogating the scheduling information attached to ",(0,n.jsx)(t.code,{children:"matchUps"}),".\nThis approach means that there is no master schedule object; it also means that when ",(0,n.jsx)(t.code,{children:"drawDefinitions"})," or draw ",(0,n.jsx)(t.code,{children:"structures"})," are removed there is no schedule to be cleared."]}),"\n",(0,n.jsxs)(t.p,{children:["In the Competition Factory, scheduling is accomplished either direclty via scheduling methods such as ",(0,n.jsx)(t.code,{children:"addMatchUpScheduledDate"}),", or automatically via ",(0,n.jsx)(t.code,{children:"scheduleMatchUps"})," or ",(0,n.jsx)(t.code,{children:"scheduleProfileRounds"}),"."]}),"\n",(0,n.jsxs)(t.p,{children:["Automated scheduling, along with direct assignment of venues and courts, depends on having venues with courts which have defined ",(0,n.jsx)(t.code,{children:"dateAvailability"}),"."]}),"\n",(0,n.jsx)(t.h3,{id:"dateavailability",children:"dateAvailability"}),"\n",(0,n.jsxs)(t.p,{children:["A ",(0,n.jsx)(t.code,{children:"dateAvailability"})," definition is an array of objects which define a ",(0,n.jsx)(t.code,{children:"startTime"})," and ",(0,n.jsx)(t.code,{children:"endTime"})," for court availability."]}),"\n",(0,n.jsx)(t.admonition,{type:"note",children:(0,n.jsxs)(t.p,{children:["When no date is specified in a ",(0,n.jsx)(t.code,{children:"dateAvailability"})," object the ",(0,n.jsx)(t.code,{children:"startTime"})," and ",(0,n.jsx)(t.code,{children:"endTime"})," apply to all valid tournament dates; defining a ",(0,n.jsx)(t.code,{children:"date"})," attribute scopes the\ndefinition to a specific date."]})}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"dateAvailability"})," definitions can also contain an array of ",(0,n.jsx)(t.code,{children:"bookings"})," objects which makes courts unavailable to auto-scheduling\nfunctions during specified blocks of time."]}),"\n",(0,n.jsx)(i.Z,{data:r,root:"dateAvailability",colorScheme:"summerfruit",invertTheme:!0,expandRoot:!0,expandToLevel:2}),"\n",(0,n.jsx)(t.h2,{id:"iterative-garman-scheduling",children:"Iterative Garman scheduling"}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"competitionEngine"})," supports Garman scheduling of ",(0,n.jsx)(t.code,{children:"matchUps"})," from multiple tournaments across shared ",(0,n.jsx)(t.code,{children:"venues"}),"."]}),"\n",(0,n.jsxs)(t.p,{children:["The Garman formula calculates the times at which ",(0,n.jsx)(t.code,{children:"matchUps"})," may be scheduled, taking into consideration court availability\nand average minutes per match, but it does not inherently support the ",(0,n.jsx)(t.strong,{children:"average minutes"})," per ",(0,n.jsx)(t.code,{children:"matchUp"})," being ",(0,n.jsx)(t.strong,{children:(0,n.jsx)(t.em,{children:"different"})}),"\nacross blocks of ",(0,n.jsx)(t.code,{children:"matchUps"}),"."]}),"\n",(0,n.jsx)(t.h2,{id:"schedulingprofile",children:"schedulingProfile"}),"\n",(0,n.jsxs)(t.p,{children:["To support the use of the Garman formula for scheduling ",(0,n.jsx)(t.code,{children:"matchUps"})," from different events,\n",(0,n.jsx)(t.code,{children:"competitionEngine"})," makes use of a ",(0,n.jsx)(t.code,{children:"schedulingProfile"})," to define the order of ",(0,n.jsx)(t.code,{children:"rounds"})," of structures within ",(0,n.jsx)(t.code,{children:"drawDefinitions"}),"\nto be scheduled on specific days, and then iteratively calls the Garman formula."]}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"schedulingProfile"})," is an array of profiles for the ",(0,n.jsx)(t.code,{children:"scheduleDates"})," to be scheduled; it is stored as an ",(0,n.jsx)(t.code,{children:"extension"})," attached to the tournament record.\n",(0,n.jsx)(t.code,{children:"competitionEngine"})," provides convenience methods for creating and manipulting the ",(0,n.jsx)(t.code,{children:"schedulingProfile"}),", or it can be generated externally and attached\nvia ",(0,n.jsx)(t.code,{children:"setSchedulingProfile()"}),"."]}),"\n",(0,n.jsxs)(t.p,{children:["Each ",(0,n.jsx)(t.code,{children:"scheduleDate"})," profile object must include the attributes ",(0,n.jsx)(t.code,{children:"{ scheduleDate, venues }"}),", and the ",(0,n.jsx)(t.code,{children:"venues"})," attribute must be an array of venue profile objects\nwhich include the attributes ",(0,n.jsx)(t.code,{children:"{ venueId, rounds }"}),", where ",(0,n.jsx)(t.code,{children:"rounds"})," is an array of objects with the following attributes:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:"[\n  {\n    // required\n    tournamentId,\n    eventId,\n    drawId,\n    structureId,\n    roundNumber,\n\n    //optional\n    notBeforeTime, // optional - 'HH:MM' timeString - TO BE IMPLEMENTED\n    roundSegment: {\n      segmentNumber, // segment which is to be scheduled\n      segmentsCount, // number of segments in a round\n    },\n  },\n];\n"})}),"\n",(0,n.jsx)(t.h3,{id:"example",children:"Example"}),"\n",(0,n.jsx)(t.p,{children:"In this example additional attributes have been added by the client applications for display purposes.\nThey are not required for automated scheduling to function."}),"\n",(0,n.jsx)(i.Z,{data:s,root:"schedulingProfile",colorScheme:"summerfruit",invertTheme:!0}),"\n",(0,n.jsx)(t.h2,{id:"scheduling-policy",children:"Scheduling policy"}),"\n",(0,n.jsxs)(t.p,{children:['A "Scheduling Policy" defines the average matchUp times and mandated recovery times for each ',(0,n.jsx)(t.code,{children:"matchUpFormat"}),",\nand sets limits on the number of matchUps that may be played per-player per-day."]}),"\n",(0,n.jsx)(i.Z,{data:o,root:"scheduling",colorScheme:"summerfruit",invertTheme:!0}),"\n",(0,n.jsx)(t.h2,{id:"overriding-policies",children:"Overriding policies"}),"\n",(0,n.jsxs)(t.p,{children:["Average ",(0,n.jsx)(t.code,{children:"matchUpFormat"})," times and recovery times can be defined, or established policies can be overridden"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:"// set averageTimes for a specific matchUpFormat\ncompetitionEngine.modifyMatchUpFormatTiming({\n  matchUpFormat: 'SET3-S:6/TB7',\n  averageTimes: [\n    {\n      categoryNames: ['U12', 'U14'],\n      minutes: { ['DOUBLES']: 110, default: 130 },\n    },\n    {\n      categoryNames: ['U16', 'U18'],\n      minutes: { ['DOUBLES']: 100, default: 120 },\n    },\n  ],\n  recoveryTimes: [\n    { categoryNames: [], minutes: { default: 15, ['DOUBLES']: 15 } },\n  ],\n});\n\n// set dailyLimits\ncompetitionEngine.setMatchUpDailyLimits({\n  dailyLimits: { SINGLES: 2, DOUBLES: 1, total: 3 },\n});\n"})}),"\n",(0,n.jsx)(t.h2,{id:"automated-scheduling",children:"Automated Scheduling"}),"\n",(0,n.jsxs)(t.p,{children:["Once the ",(0,n.jsx)(t.code,{children:"schedulingProfile"}),", ",(0,n.jsx)(t.code,{children:"matchUpFormatTiming"})," and ",(0,n.jsx)(t.code,{children:"dailyLimits"})," have been defined, automated assignment of ",(0,n.jsx)(t.strong,{children:"scheduleTimes"})," to ",(0,n.jsx)(t.code,{children:"matchUps"})," is straightforward."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:"competitionEngine.scheduleProfileRounds({\n  scheduleDates, // optional array of dates to be scheduled\n});\n"})}),"\n",(0,n.jsx)(t.h3,{id:"pseudocode",children:"Pseudocode"}),"\n",(0,n.jsxs)(t.p,{children:["The highest level auto-scheduling method is ",(0,n.jsx)(t.code,{children:"competitionEngine.scheduleProfileRounds"}),"."]}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["Validate and filter ",(0,n.jsx)(t.code,{children:"schedulingProfile"})," dates by specified ",(0,n.jsx)(t.code,{children:"scheduleDates"})]}),"\n",(0,n.jsxs)(t.li,{children:["Construct ",(0,n.jsx)(t.code,{children:"matchUpDependencies"})," to ensure matchUps are scheduled before their dependents"]}),"\n",(0,n.jsxs)(t.li,{children:["Get an array of ",(0,n.jsx)(t.strong,{children:"inContext"})," ",(0,n.jsx)(t.code,{children:"matchUps"})," for all relevant ",(0,n.jsx)(t.code,{children:"tournamentRecords"})]}),"\n",(0,n.jsxs)(t.li,{children:["Retrieve ",(0,n.jsx)(t.code,{children:"matchUpDailyLimits"})," and ",(0,n.jsx)(t.code,{children:"personRequests"})]}),"\n",(0,n.jsxs)(t.li,{children:["Sort ",(0,n.jsx)(t.code,{children:"scheduleDates"})," and for each iterate through all venues"]}),"\n",(0,n.jsxs)(t.li,{children:["Construct hash tables of ",(0,n.jsx)(t.code,{children:"matchUpNotBeforeTimes"})," and ",(0,n.jsx)(t.code,{children:"matchUpPotentialParticipantIds"})]}),"\n",(0,n.jsxs)(t.li,{children:["Ensure ",(0,n.jsx)(t.code,{children:"rounds"})," specified for ",(0,n.jsx)(t.code,{children:"scheduleDate"})," are sorted as specified"]}),"\n",(0,n.jsxs)(t.li,{children:["Generate ordered array of ",(0,n.jsx)(t.code,{children:"matchUpIds"})," derived from specified ",(0,n.jsx)(t.code,{children:"rounds"})]}),"\n",(0,n.jsxs)(t.li,{children:["Build up a mapping of ",(0,n.jsx)(t.code,{children:"matchUpIds"})," to ",(0,n.jsx)(t.code,{children:"recoveryMinutes"})," so that ",(0,n.jsx)(t.code,{children:"matchUps"})," with equivalent ",(0,n.jsx)(t.code,{children:"averageMatchUpMinutes"}),"\ncan be block scheduled while still considering varying ",(0,n.jsx)(t.code,{children:"recoveryMinutes"})]}),"\n",(0,n.jsxs)(t.li,{children:["Group ordered ",(0,n.jsx)(t.code,{children:"matchUpIds"})," by ",(0,n.jsx)(t.strong,{children:"averageMatchUpMinutes|periodLength"})]}),"\n",(0,n.jsxs)(t.li,{children:["Loop through groups of ",(0,n.jsx)(t.code,{children:"matchUpIds"})," ..."]}),"\n",(0,n.jsxs)(t.li,{children:["Calculate available scheduleTimes, considering court availability, already scheduled matchUps, and ",(0,n.jsx)(t.code,{children:"remainingScheduleTimes"})," from previous iteration"]}),"\n",(0,n.jsxs)(t.li,{children:["Construct per-participant hash tables of ",(0,n.jsx)(t.code,{children:"matchUps"})," played and ",(0,n.jsx)(t.code,{children:"timeAfterRecovery"})]}),"\n",(0,n.jsxs)(t.li,{children:["Filter out ",(0,n.jsx)(t.code,{children:"matchUps"})," which are not appropriate for scheduling"]}),"\n",(0,n.jsxs)(t.li,{children:["Filter out ",(0,n.jsx)(t.code,{children:"matchUps"})," which include participants who have reached daily limits"]}),"\n",(0,n.jsxs)(t.li,{children:["Loop through available ",(0,n.jsx)(t.code,{children:"scheduleTimes"})," and build up mapping of ",(0,n.jsx)(t.code,{children:"matchUpIds"})," to ",(0,n.jsx)(t.code,{children:"scheduleTimes"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["Defer scheduling of matchUps where ",(0,n.jsx)(t.code,{children:"timeAfterRecovery"})," has not been reached"]}),"\n",(0,n.jsxs)(t.li,{children:["Defer scheduling of matchUps where ",(0,n.jsx)(t.code,{children:"personRequests"})," include ",(0,n.jsx)(t.code,{children:"{ requestType: DO_NOT_SCHEDULE }"})," conflicts"]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["Group ",(0,n.jsx)(t.code,{children:"matchUpIds"})," by ",(0,n.jsx)(t.strong,{children:"eventId|drawId|structureId"})," and assign ",(0,n.jsx)(t.code,{children:"scheduleTimes"})," to ",(0,n.jsx)(t.code,{children:"matchUps"})]}),"\n",(0,n.jsxs)(t.li,{children:["Return array of ",(0,n.jsx)(t.code,{children:"remainingScheduleTimes"})," from current iteration to seed next iteration of virtualCourtBookings"]}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"schedule-conflict-reporting",children:"Schedule Conflict Reporting"}),"\n",(0,n.jsxs)(t.p,{children:["Schedule Conflicts are reported for participants that are returned from ",(0,n.jsx)(t.code,{children:"tournamentEngine.getParticipants"}),"\nor ",(0,n.jsx)(t.code,{children:"competitionEngine.getCompetitionParticipants"}),"."]}),"\n",(0,n.jsxs)(t.p,{children:["The attribute ",(0,n.jsx)(t.code,{children:"scheduleConflicts"})," is an array of objects containing pairs of ",(0,n.jsx)(t.code,{children:"matchUpIds"}),"\nthat have been scheduled at times that conflict with each other based on either the ",(0,n.jsx)(t.strong,{children:"scheduling policy"}),"\nthat is in force, or a specified ",(0,n.jsx)(t.code,{children:"scheduledMinutesDifference"}),", which overrides the default behavior."]}),"\n",(0,n.jsx)(t.admonition,{type:"note",children:(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"matchUpIds"})," in the ",(0,n.jsx)(t.code,{children:"scheduleConflicts"})," array may refer to either a participant's ",(0,n.jsx)(t.code,{children:"matchUps"})," or their ",(0,n.jsx)(t.code,{children:"potentialMatchUps"})," which are defined as those ",(0,n.jsx)(t.code,{children:"matchUps"}),"\nin which they will appear if they either win or lose ",(0,n.jsx)(t.code,{children:"matchUps"})," in which they are already present."]})}),"\n",(0,n.jsxs)(t.p,{children:["A ",(0,n.jsx)(t.strong,{children:"scheduling policy"})," defines average match times for different scoring formats as well as recovery times between ",(0,n.jsx)(t.strong,{children:(0,n.jsx)(t.em,{children:"matchUpTypes"})}),".\nA conflict occurs when a matchUp's ",(0,n.jsx)(t.code,{children:"scheduledTime + averageMinutes + recoveryMinutes"}),", or ",(0,n.jsx)(t.code,{children:"endTime + recoveryMinutes"})," (if available) is greater than the ",(0,n.jsx)(t.code,{children:"scheduledTime"})," of any other participant ",(0,n.jsx)(t.code,{children:"matchUp"}),"."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:"const {\n  participants,\n  participantIdsWithConflicts, // array of participantIds which have scheduling conflicts\n} = tournamentEngine.getParticipants({\n  inContext: true,\n\n  scheduleAnalysis: {\n    scheduledMinutesDifference: 60, // optional - scheduling conflicts determined by scheduledTime difference between matchUps\n  },\n  withStatistics,\n  withOpponents,\n  withMatchUps,\n});\n"})}),"\n",(0,n.jsx)(t.h3,{id:"example-participants-with-schedule-conflicts",children:"Example participants with schedule conflicts"}),"\n",(0,n.jsx)(i.Z,{data:c,root:"tournamentParticipants",colorScheme:"summerfruit",invertTheme:!0,expandRoot:!0,expandToLevel:1})]})}function b(e={}){const{wrapper:t}={...(0,d.ah)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(f,{...e})}):f(e)}},7942:(e,t,a)=>{a.d(t,{ah:()=>o});var n=a(959);function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){d(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function r(e,t){if(null==e)return{};var a,n,d=function(e,t){if(null==e)return{};var a,n,d={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(d[a]=e[a]);return d}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(d[a]=e[a])}return d}var s=n.createContext({}),o=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):c(c({},t),e)),a},l={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,d=e.mdxType,i=e.originalType,s=e.parentName,h=r(e,["components","mdxType","originalType","parentName"]),u=o(a),m=d,p=u["".concat(s,".").concat(m)]||u[m]||l[m]||i;return a?n.createElement(p,c(c({ref:t},h),{},{components:a})):n.createElement(p,c({ref:t},h))}));h.displayName="MDXCreateElement"},7357:(e,t,a)=>{a.d(t,{Z:()=>m});a(959);var n=a(1601),d=a(5752);const i=JSON.parse('{"monokai":{"scheme":"monokai","author":"wimer hazenberg (http://www.monokai.nl)","base00":"#272822","base01":"#383830","base02":"#49483e","base03":"#75715e","base04":"#a59f85","base05":"#f8f8f2","base06":"#f5f4f1","base07":"#f9f8f5","base08":"#f92672","base09":"#fd971f","base0A":"#f4bf75","base0B":"#a6e22e","base0C":"#a1efe4","base0D":"#66d9ef","base0E":"#ae81ff","base0F":"#cc6633"},"summerfruit":{"scheme":"summerfruit","author":"christopher corley (http://cscorley.github.io/)","base00":"#151515","base01":"#202020","base02":"#303030","base03":"#505050","base04":"#B0B0B0","base05":"#D0D0D0","base06":"#E0E0E0","base07":"#FFFFFF","base08":"#FF0086","base09":"#FD8900","base0A":"#ABA800","base0B":"#00C918","base0C":"#1faaaa","base0D":"#3777E6","base0E":"#AD00A1","base0F":"#cc6633"},"solarized":{"scheme":"solarized","author":"ethan schoonover (http://ethanschoonover.com/solarized)","base00":"#002b36","base01":"#073642","base02":"#586e75","base03":"#657b83","base04":"#839496","base05":"#93a1a1","base06":"#eee8d5","base07":"#fdf6e3","base08":"#dc322f","base09":"#cb4b16","base0A":"#b58900","base0B":"#859900","base0C":"#2aa198","base0D":"#268bd2","base0E":"#6c71c4","base0F":"#d33682"}}');var c=a(1527);const r=(e,t,a)=>{let{style:n}=e;return{style:{...n,color:Number.isNaN(a[0])||parseInt(a,10)%2?n.color:"#33F"}}},s=(e,t,a)=>{let{style:n}=e;return{style:{...n,fontWeight:a?"bold":n.textTransform}}},o=(e,t)=>{let{style:a}=e;return{style:{...a,borderRadius:"Boolean"===t?3:a.borderRadius}}},l=(e,t,a)=>{const d="object"==typeof t,i=d&&Object.values(t)[0],r="string"==typeof i&&"{"===i[0];let s;if(d){const e=Object.keys(t);2!==n.hC.intersection(e,["drawId","drawType"]).length||e.includes("drawRepresentativeIds")||(s="drawDefinition"),2!==n.hC.intersection(e,["entryPosition","entryStatus"]).length||e.includes("entryStageSequence")||(s="entry"),3!==n.hC.intersection(e,["eventId","sortOrder","notBeforeTime"]).length||e.includes("tennisOfficialIds")?2!==n.hC.intersection(e,["eventId","eventName"]).length||e.includes("tennisOfficialIds")||(s="event"):s="round",2===n.hC.intersection(e,["flightNumber","drawId"]).length&&(s="flight"),2===n.hC.intersection(e,["name","value"]).length&&(s="extension"),2!==n.hC.intersection(e,["linkType","source"]).length||e.includes("linkCondition")||(s="link"),2!==n.hC.intersection(e,["matchUpId","drawPositions"]).length||e.includes("surfaceCategory")||(s="matchUp"),2===n.hC.intersection(e,["drawPosition","participantId","bye"]).length&&(s="positionAssignment"),2!==n.hC.intersection(e,["courtId","dateAvailability"]).length||e.includes("altitude")||(s="court"),2!==n.hC.intersection(e,["participantId","participantName"]).length||e.includes("onlineResources")||(s="participant"),2===n.hC.intersection(e,["structureId","structureName"]).length&&(s="structure"),2!==n.hC.intersection(e,["venueId","courts"]).length||e.includes("venueOtherIds")||(s="venue")}return(0,c.jsx)("span",{children:s||(r?e:a)})},h=e=>{return"string"==typeof(t=e)&&t.length>2&&"{"===t[1]?(e=>{try{const t=JSON.parse(JSON.parse(e)),a="true"===t.required?"":"? ",n="true"===t.array?"[]":"";return`${a}: ${["any","boolean","number","string"].includes(t.type)&&t.type||"object"===t.type&&t.object||"enum"===t.type?`enum ${t.enum}`:""}${n}${t.note?` \\\\ ${t.note}`:""}`}catch(t){return""}})(e):"string"==typeof e&&e.length>40?e.slice(0,40)+"...":e;var t},u=e=>{let[t]=e;return(0,c.jsx)("strong",{children:t})},m=e=>{let{colorScheme:t="summerfruit",sortObjectKeys:a=!0,invertTheme:n=!0,expandRoot:m=!0,expandToLevel:p=1,hideRoot:f=!1,root:b="root",data:g}=e;return(0,c.jsx)("div",{style:{marginBottom:"1em"},children:(0,c.jsx)(d.L,{theme:{valueLabel:r,nestedNodeLabel:s,extend:i[t],value:o},shouldExpandNode:(e,t,a)=>!!m&&(("object"!=typeof t||!t._typeDef)&&(a<p||void 0)),sortObjectKeys:a,getItemString:l,labelRenderer:u,valueRenderer:h,invertTheme:n,hideRoot:f,keyPath:[b],data:g})})}}}]);