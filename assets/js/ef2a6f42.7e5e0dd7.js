"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[3895],{4116:(e,n,a)=>{a.d(n,{A:()=>r});var t=a(4809),i=a(758);const r=e=>{let{drawType:n,drawSize:r=8}=e;const[l,o]=(0,i.useState)(null);if((0,i.useEffect)((()=>{a.e(8376).then(a.bind(a,8376)).then((e=>{o(e)}))}),[]),!l)return i.createElement("div",null,"Loading...");const{compositions:s,renderStructure:d}=l,p={seedsCount:4,drawType:n,drawSize:r};"AD_HOC"===n&&Object.assign(p,{automated:!0,roundsCount:3});const u=t.gm.generateTournamentRecord({drawProfiles:[p],completeAllMatchUps:!0,randomWinningSide:!0}),{tournamentRecord:g,eventIds:m}=u||{},y=m?.[0],{eventData:c}=t.o3.setState(g).getEventData({participantsProfile:{withIOC:!0,withISO2:!0},eventId:y})||{},N=c?.drawsData?.[0]?.structures||[],f=N[0]?.structureId,w=N?.find((e=>e.structureId===f)),v=w?.roundMatchUps,h=v?Object.values(v)?.flat():[],E=d({composition:s[t.Yl.randomMember(["Australian","Wimbledon","National","US Open","French","ITF"])],matchUps:h});return i.createElement("div",{style:{zoom:.9}},i.createElement("div",{ref:e=>{for(;e?.firstChild;)e.removeChild(e.firstChild);e&&e.appendChild(E)}}))}},4466:(e,n,a)=>{a.d(n,{A:()=>r});var t=a(758),i=a(1587);function r(e){let{children:n,fallback:a}=e;return(0,i.A)()?t.createElement(t.Fragment,null,n?.()):a??null}},9936:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>p,contentTitle:()=>s,default:()=>y,frontMatter:()=>o,metadata:()=>d,toc:()=>u});var t=a(2232),i=(a(758),a(3805)),r=a(4466),l=a(4116);const o={title:"Draw Generation"},s=void 0,d={unversionedId:"concepts/draws-overview",id:"concepts/draws-overview",title:"Draw Generation",description:"Visual Example",source:"@site/docs/concepts/draws-overview.mdx",sourceDirName:"concepts",slug:"/concepts/draws-overview",permalink:"/tods-competition-factory/docs/concepts/draws-overview",draft:!1,tags:[],version:"current",frontMatter:{title:"Draw Generation"},sidebar:"docs",previous:{title:"tieFormats",permalink:"/tods-competition-factory/docs/concepts/tieFormat"},next:{title:"Draw Types",permalink:"/tods-competition-factory/docs/concepts/draw-types"}},p={},u=[{value:"Visual Example",id:"visual-example",level:2},{value:"Generating Draw Definitions",id:"generating-draw-definitions",level:2},{value:"Basic Usage",id:"basic-usage",level:3},{value:"Key Parameters",id:"key-parameters",level:3},{value:"Examples",id:"examples",level:3},{value:"Simple Elimination Draw",id:"simple-elimination-draw",level:4},{value:"Round Robin with Playoffs",id:"round-robin-with-playoffs",level:4},{value:"Draw with Qualifying",id:"draw-with-qualifying",level:4},{value:"Compass Draw",id:"compass-draw",level:4},{value:"Manual Placement (Seeds Only)",id:"manual-placement-seeds-only",level:4},{value:"Seeding Profiles",id:"seeding-profiles",level:3},{value:"Return Value",id:"return-value",level:3},{value:"Next Steps",id:"next-steps",level:3},{value:"Related Documentation",id:"related-documentation",level:2}],g={toc:u},m="wrapper";function y(e){let{components:n,...a}=e;return(0,i.yg)(m,(0,t.A)({},g,a,{components:n,mdxType:"MDXLayout"}),(0,i.yg)("h2",{id:"visual-example"},"Visual Example"),(0,i.yg)("p",null,"Themed visualization of draws by ",(0,i.yg)("a",{parentName:"p",href:"https://github.com/CourtHive/courthive-components"},"courthive-components"),"."),(0,i.yg)(r.A,{mdxType:"BrowserOnly"},(()=>(0,i.yg)(l.A,{drawType:"COMPASS",drawSize:8,mdxType:"DrawType"}))),(0,i.yg)("h2",{id:"generating-draw-definitions"},"Generating Draw Definitions"),(0,i.yg)("p",null,"The Competition Factory provides ",(0,i.yg)("inlineCode",{parentName:"p"},"generateDrawDefinition()")," as the primary convenience method for creating draw structures. This powerful function handles most common use cases for draw generation and can create draws of arbitrary complexity."),(0,i.yg)("h3",{id:"basic-usage"},"Basic Usage"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-js"},"import { tournamentEngine } from 'tods-competition-factory';\n\nconst { drawDefinition } = tournamentEngine.generateDrawDefinition({\n  eventId: 'event-123',\n  drawSize: 32,\n  drawType: 'SINGLE_ELIMINATION',\n  drawEntries: eventEntries,\n  automated: true  // Automatically place participants\n});\n")),(0,i.yg)("h3",{id:"key-parameters"},"Key Parameters"),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"Essential Parameters:")),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"drawSize")," - Number of draw positions in the first structure (e.g., 16, 32, 64)"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"drawEntries")," - Array of participant entries (equal to or subset of event.entries)"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"drawType")," - Type of draw structure (see ",(0,i.yg)("a",{parentName:"li",href:"./draw-types"},"Draw Types")," for full list)")),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"Participant Placement:")),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"automated")," - Boolean or object controlling automatic placement:",(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"true")," - Place all participants automatically"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"false")," - Manual placement required"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"{ seedsOnly: true }")," - Only place seeded participants and adjacent byes"))),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"seededParticipants")," - Array of ",(0,i.yg)("inlineCode",{parentName:"li"},"{ participantId, seedNumber, seedValue }")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"seedsCount")," - Number of seeds to generate if seededParticipants not provided"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"seedingProfile")," - Positioning strategy (WATERFALL, CLUSTER, SEPARATE)")),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"Match Configuration:")),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"matchUpType")," - SINGLES, DOUBLES, or TEAM"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"matchUpFormat")," - Default TODS matchUpFormat code for all matchUps"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"tieFormat")," - For TEAM events: ",(0,i.yg)("inlineCode",{parentName:"li"},"{ collectionDefinitions, winCriteria }"))),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"Qualifying Integration:")),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"qualifiersCount")," - Number of positions reserved for qualifiers"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"qualifyingProfiles")," - Array defining complete qualifying structures"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"qualifyingOnly")," - Boolean - only include QUALIFYING stage entries"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"qualifyingPlaceholder")," - Generate placeholder qualifying structure")),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"Advanced Options:")),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"structureOptions")," - For ROUND_ROBIN: ",(0,i.yg)("inlineCode",{parentName:"li"},"{ groupSize, playoffGroups }")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"playoffAttributes")," - Custom playoff structure naming and configuration"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"voluntaryConsolation")," - Add voluntary consolation structure"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"staggeredEntry")," - Enable non-base-2 draw sizes with feed-in positions"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"policyDefinitions")," - Seeding and avoidance policies")),(0,i.yg)("h3",{id:"examples"},"Examples"),(0,i.yg)("h4",{id:"simple-elimination-draw"},"Simple Elimination Draw"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-js"},"const { drawDefinition } = tournamentEngine.generateDrawDefinition({\n  eventId: 'singles-open',\n  drawSize: 16,\n  drawType: 'SINGLE_ELIMINATION',\n  drawEntries: acceptedEntries,\n  seedsCount: 4,\n  automated: true\n});\n")),(0,i.yg)("h4",{id:"round-robin-with-playoffs"},"Round Robin with Playoffs"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-js"},"const { drawDefinition } = tournamentEngine.generateDrawDefinition({\n  eventId: 'doubles-u18',\n  drawSize: 16,\n  drawType: 'ROUND_ROBIN_WITH_PLAYOFF',\n  drawEntries: acceptedEntries,\n  structureOptions: {\n    groupSize: 4,\n    playoffGroups: [\n      { finishingPositions: [1], structureName: 'Gold Flight', drawType: 'SINGLE_ELIMINATION' },\n      { finishingPositions: [2], structureName: 'Silver Flight', drawType: 'SINGLE_ELIMINATION' }\n    ]\n  },\n  automated: true\n});\n")),(0,i.yg)("h4",{id:"draw-with-qualifying"},"Draw with Qualifying"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-js"},"const { drawDefinition } = tournamentEngine.generateDrawDefinition({\n  eventId: 'singles-championship',\n  drawSize: 32,\n  drawType: 'SINGLE_ELIMINATION',\n  drawEntries: allEntries,\n  qualifiersCount: 4,\n  qualifyingProfiles: [\n    {\n      roundTarget: 1,  // Qualifiers feed into Round 1 of main draw\n      structureProfiles: [\n        {\n          drawSize: 16,\n          seedsCount: 2,\n          qualifyingPositions: 4  // Top 4 advance to main draw\n        }\n      ]\n    }\n  ],\n  seedsCount: 8,\n  automated: true\n});\n")),(0,i.yg)("h4",{id:"compass-draw"},"Compass Draw"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-js"},"const { drawDefinition } = tournamentEngine.generateDrawDefinition({\n  eventId: 'singles-compass',\n  drawSize: 8,\n  drawType: 'COMPASS',\n  drawEntries: acceptedEntries,\n  automated: true\n});\n")),(0,i.yg)("h4",{id:"manual-placement-seeds-only"},"Manual Placement (Seeds Only)"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-js"},"const { drawDefinition } = tournamentEngine.generateDrawDefinition({\n  eventId: 'singles-main',\n  drawSize: 32,\n  drawType: 'SINGLE_ELIMINATION',\n  drawEntries: acceptedEntries,\n  seededParticipants: [\n    { participantId: 'player-1', seedNumber: 1, seedValue: '1' },\n    { participantId: 'player-2', seedNumber: 2, seedValue: '2' },\n    { participantId: 'player-3', seedNumber: 3, seedValue: '3-4' },\n    { participantId: 'player-4', seedNumber: 4, seedValue: '3-4' }\n  ],\n  automated: { seedsOnly: true }  // Only place seeds and adjacent byes\n});\n// Remaining participants can be placed manually or via custom logic\n")),(0,i.yg)("h3",{id:"seeding-profiles"},"Seeding Profiles"),(0,i.yg)("p",null,"Control how seeded participants are positioned:"),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"WATERFALL")," (for Round Robin):"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-js"},"seedingProfile: { positioning: 'WATERFALL' }\n// Seeds distributed sequentially across groups: Group 1 gets seed 1, Group 2 gets seed 2, etc.\n")),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"CLUSTER")," (for elimination):"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-js"},"seedingProfile: { positioning: 'CLUSTER' }\n// Seeds positioned closely together in the draw\n")),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"SEPARATE")," (for elimination):"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-js"},"seedingProfile: { positioning: 'SEPARATE' }\n// Seeds maximally separated using standard seeding algorithm\n")),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"Group Seeding Threshold"),":"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-js"},"seedingProfile: { \n  positioning: 'SEPARATE',\n  groupSeedingThreshold: 5  // Seeds 5+ assigned lowest value within their groups\n}\n")),(0,i.yg)("h3",{id:"return-value"},"Return Value"),(0,i.yg)("p",null,(0,i.yg)("inlineCode",{parentName:"p"},"generateDrawDefinition()")," returns:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-js"},"{\n  drawDefinition: {\n    drawId: 'uuid',\n    drawType: 'SINGLE_ELIMINATION',\n    drawSize: 32,\n    structures: [...],  // Array of structure definitions\n    links: [...],       // Participant flow between structures\n    entries: [...]      // Draw entries with position assignments\n  },\n  success: true\n}\n")),(0,i.yg)("h3",{id:"next-steps"},"Next Steps"),(0,i.yg)("p",null,"After generating a draw definition:"),(0,i.yg)("ol",null,(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("strong",{parentName:"li"},"Add to Event"),": Use ",(0,i.yg)("inlineCode",{parentName:"li"},"addDrawDefinition()")," to attach to tournament event"),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("strong",{parentName:"li"},"Modify Structure"),": Use position actions to adjust participant placement"),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("strong",{parentName:"li"},"Configure Scheduling"),": Set up venues, courts, and scheduling profiles"),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("strong",{parentName:"li"},"Publish"),": Use ",(0,i.yg)("inlineCode",{parentName:"li"},"publishEvent()")," to make draw visible")),(0,i.yg)("h2",{id:"related-documentation"},"Related Documentation"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},(0,i.yg)("a",{parentName:"strong",href:"./draw-types"},"Draw Types"))," - Complete list of supported draw types and structures"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},(0,i.yg)("a",{parentName:"strong",href:"./actions"},"Actions"))," - Valid position and matchUp actions for draw management"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},(0,i.yg)("a",{parentName:"strong",href:"/docs/governors/generation-governor#generatedrawdefinition"},"Generation Governor"))," - Complete API reference"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},(0,i.yg)("a",{parentName:"strong",href:"/docs/policies/seedingPolicy"},"Seeding Policy"))," - Configuring seeding patterns"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},(0,i.yg)("a",{parentName:"strong",href:"/docs/policies/avoidance"},"Avoidance Policy"))," - Preventing same-club/nation matchups")))}y.isMDXComponent=!0}}]);