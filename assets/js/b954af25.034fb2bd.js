"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[8473],{8194(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>p,frontMatter:()=>l,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"policies/draws","title":"Draws Policy","description":"The Draws Policy (POLICYTYPEDRAWS) controls draw type coercion rules, including minimum participant requirements for specific draw types. This policy helps prevent inappropriate draw type selection based on participant count.","source":"@site/docs/policies/draws.md","sourceDirName":"policies","slug":"/policies/draws","permalink":"/competition-factory/docs/policies/draws","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Draws Policy"},"sidebar":"docs","previous":{"title":"Scoring Policy","permalink":"/competition-factory/docs/policies/scoringPolicy"},"next":{"title":"Ranking Policy","permalink":"/competition-factory/docs/policies/rankingPolicy"}}');var s=i(6070),o=i(8322);const l={title:"Draws Policy"},t=void 0,c={},a=[{value:"Policy Structure",id:"policy-structure",level:2},{value:"Default Policy",id:"default-policy",level:2},{value:"Basic Examples",id:"basic-examples",level:2},{value:"Disable All Coercion",id:"disable-all-coercion",level:3},{value:"Set Minimum Participants for Round Robin with Playoff",id:"set-minimum-participants-for-round-robin-with-playoff",level:3},{value:"Draw Type Coercion Examples",id:"draw-type-coercion-examples",level:2},{value:"Custom Minimums for Multiple Draw Types",id:"custom-minimums-for-multiple-draw-types",level:3},{value:"Federation-Specific Rules",id:"federation-specific-rules",level:3},{value:"Real-World Examples",id:"real-world-examples",level:2},{value:"Club Tournament (Flexible)",id:"club-tournament-flexible",level:3},{value:"Professional Event (Strict)",id:"professional-event-strict",level:3},{value:"Development/Testing (No Coercion)",id:"developmenttesting-no-coercion",level:3},{value:"Draw Type Minimum Recommendations",id:"draw-type-minimum-recommendations",level:2},{value:"Policy Behavior",id:"policy-behavior",level:2},{value:"When Coercion is Disabled (false)",id:"when-coercion-is-disabled-false",level:3},{value:"When Coercion is Enabled (true or object)",id:"when-coercion-is-enabled-true-or-object",level:3},{value:"Common Scenarios",id:"common-scenarios",level:2},{value:"Scenario 1: Small Draw Size",id:"scenario-1-small-draw-size",level:3},{value:"Scenario 2: Exact Minimum",id:"scenario-2-exact-minimum",level:3},{value:"Scenario 3: Coercion Disabled",id:"scenario-3-coercion-disabled",level:3},{value:"Event-Specific Draw Policies",id:"event-specific-draw-policies",level:2},{value:"Notes",id:"notes",level:2},{value:"Related Concepts",id:"related-concepts",level:2},{value:"Draw Type Constants",id:"draw-type-constants",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.strong,{children:"Draws Policy"})," (",(0,s.jsx)(n.code,{children:"POLICY_TYPE_DRAWS"}),") controls draw type coercion rules, including minimum participant requirements for specific draw types. This policy helps prevent inappropriate draw type selection based on participant count."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Policy Type:"})," ",(0,s.jsx)(n.code,{children:"draws"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"When to Use:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Setting minimum participants for Round Robin with Playoffs"}),"\n",(0,s.jsx)(n.li,{children:"Preventing automatic draw type coercion"}),"\n",(0,s.jsx)(n.li,{children:"Enforcing draw type requirements per federation rules"}),"\n",(0,s.jsx)(n.li,{children:"Customizing draw type selection logic"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"policy-structure",children:"Policy Structure"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"{\n  draws: {\n    policyName?: string;                    // Optional policy identifier\n    \n    // Draw type coercion rules\n    drawTypeCoercion?: boolean | {\n      [drawType: string]: number;           // Minimum participants for each draw type\n    };\n  }\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Attributes:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"drawTypeCoercion"}),": Controls automatic draw type adjustments","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"false"})," - Disables all draw type coercion"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"true"})," - Enables default coercion rules (default behavior)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Object"})," - Custom minimum participant counts per draw type"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"default-policy",children:"Default Policy"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"import { POLICY_DRAWS_DEFAULT } from 'tods-competition-factory';\n\n// Default: Empty policy (coercion enabled with system defaults)\n// {\n//   draws: {\n//     // drawTypeCoercion: true (default - not specified)\n//   }\n// }\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"basic-examples",children:"Basic Examples"}),"\n",(0,s.jsx)(n.h3,{id:"disable-all-coercion",children:"Disable All Coercion"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"import { POLICY_TYPE_DRAWS } from 'tods-competition-factory';\n\n// Prevent any automatic draw type changes\nconst noCoercionPolicy = {\n  [POLICY_TYPE_DRAWS]: {\n    policyName: 'No Coercion',\n    drawTypeCoercion: false  // No automatic adjustments\n  }\n};\n\ntournamentEngine.attachPolicies({\n  policyDefinitions: noCoercionPolicy\n});\n\n// Draw type will be exactly as specified, even if inappropriate\n"})}),"\n",(0,s.jsx)(n.h3,{id:"set-minimum-participants-for-round-robin-with-playoff",children:"Set Minimum Participants for Round Robin with Playoff"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"// Require at least 5 participants for Round Robin with Playoff\nconst roundRobinMinimumPolicy = {\n  [POLICY_TYPE_DRAWS]: {\n    policyName: 'Round Robin Minimum',\n    drawTypeCoercion: {\n      ROUND_ROBIN_WITH_PLAYOFF: 5  // Min 5 participants\n    }\n  }\n};\n\ntournamentEngine.attachPolicies({\n  policyDefinitions: roundRobinMinimumPolicy\n});\n\n// Attempt to create ROUND_ROBIN_WITH_PLAYOFF with 4 participants\nconst result = tournamentEngine.generateDrawDefinition({\n  drawType: 'ROUND_ROBIN_WITH_PLAYOFF',\n  drawSize: 4,  // Below minimum\n  eventId: 'event-1'\n});\n\n// Result: Draw type may be coerced to simpler Round Robin\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"draw-type-coercion-examples",children:"Draw Type Coercion Examples"}),"\n",(0,s.jsx)(n.h3,{id:"custom-minimums-for-multiple-draw-types",children:"Custom Minimums for Multiple Draw Types"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"const customDrawMinimumsPolicy = {\n  [POLICY_TYPE_DRAWS]: {\n    policyName: 'Custom Draw Minimums',\n    drawTypeCoercion: {\n      ROUND_ROBIN_WITH_PLAYOFF: 5,    // Min 5 for RR with playoff\n      COMPASS: 8,                      // Min 8 for compass draw\n      MODIFIED_FEED_IN_CHAMPIONSHIP: 8 // Min 8 for modified feed-in\n    }\n  }\n};\n\ntournamentEngine.attachPolicies({\n  policyDefinitions: customDrawMinimumsPolicy\n});\n\n// Below-minimum requests will be coerced to simpler draw types\n"})}),"\n",(0,s.jsx)(n.h3,{id:"federation-specific-rules",children:"Federation-Specific Rules"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"// ITF: Prefer Round Robin with Playoff for smaller groups\nconst itfDrawPolicy = {\n  [POLICY_TYPE_DRAWS]: {\n    policyName: 'ITF Draw Policy',\n    drawTypeCoercion: {\n      ROUND_ROBIN_WITH_PLAYOFF: 4  // Allow RR+playoff with as few as 4\n    }\n  }\n};\n\n// USTA: Require more participants for complex draws\nconst ustaDrawPolicy = {\n  [POLICY_TYPE_DRAWS]: {\n    policyName: 'USTA Draw Policy',\n    drawTypeCoercion: {\n      ROUND_ROBIN_WITH_PLAYOFF: 6,  // Minimum 6 participants\n      COMPASS: 16                    // Full compass draw only\n    }\n  }\n};\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"real-world-examples",children:"Real-World Examples"}),"\n",(0,s.jsx)(n.h3,{id:"club-tournament-flexible",children:"Club Tournament (Flexible)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"// Club tournaments often have small draws - be flexible\nconst clubDrawPolicy = {\n  [POLICY_TYPE_DRAWS]: {\n    policyName: 'Club Flexibility',\n    drawTypeCoercion: {\n      ROUND_ROBIN_WITH_PLAYOFF: 3  // Allow very small RR+playoff\n    }\n  }\n};\n"})}),"\n",(0,s.jsx)(n.h3,{id:"professional-event-strict",children:"Professional Event (Strict)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"// Professional events require proper draw sizes\nconst professionalDrawPolicy = {\n  [POLICY_TYPE_DRAWS]: {\n    policyName: 'Professional Standards',\n    drawTypeCoercion: {\n      ROUND_ROBIN_WITH_PLAYOFF: 8,     // Full groups required\n      COMPASS: 16,                      // Full compass only\n      MODIFIED_FEED_IN_CHAMPIONSHIP: 16 // Full feed-in only\n    }\n  }\n};\n"})}),"\n",(0,s.jsx)(n.h3,{id:"developmenttesting-no-coercion",children:"Development/Testing (No Coercion)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"// Testing environment - allow any draw configuration\nconst testingDrawPolicy = {\n  [POLICY_TYPE_DRAWS]: {\n    policyName: 'Testing Policy',\n    drawTypeCoercion: false  // No restrictions\n  }\n};\n\n// Useful for:\n// - Unit testing edge cases\n// - Demonstrating draw structures\n// - Debugging draw generation logic\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"draw-type-minimum-recommendations",children:"Draw Type Minimum Recommendations"}),"\n",(0,s.jsx)(n.p,{children:"Based on draw structure requirements:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Draw Type"}),(0,s.jsx)(n.th,{children:"Recommended Minimum"}),(0,s.jsx)(n.th,{children:"Notes"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"SINGLE_ELIMINATION"}),(0,s.jsx)(n.td,{children:"2"}),(0,s.jsx)(n.td,{children:"Any number works"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"DOUBLE_ELIMINATION"}),(0,s.jsx)(n.td,{children:"4"}),(0,s.jsx)(n.td,{children:"2 players not meaningful"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ROUND_ROBIN"}),(0,s.jsx)(n.td,{children:"2"}),(0,s.jsx)(n.td,{children:"Any number works"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ROUND_ROBIN_WITH_PLAYOFF"}),(0,s.jsx)(n.td,{children:"4-6"}),(0,s.jsx)(n.td,{children:"Need enough for groups + playoff"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"COMPASS"}),(0,s.jsx)(n.td,{children:"8"}),(0,s.jsx)(n.td,{children:"Requires proper bracket structure"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"FEED_IN"}),(0,s.jsx)(n.td,{children:"4"}),(0,s.jsx)(n.td,{children:"Need losers to feed"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"MODIFIED_FEED_IN_CHAMPIONSHIP"}),(0,s.jsx)(n.td,{children:"8"}),(0,s.jsx)(n.td,{children:"Complex structure"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"CURTIS_CONSOLATION"}),(0,s.jsx)(n.td,{children:"8"}),(0,s.jsx)(n.td,{children:"Proper consolation brackets"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"policy-behavior",children:"Policy Behavior"}),"\n",(0,s.jsx)(n.h3,{id:"when-coercion-is-disabled-false",children:"When Coercion is Disabled (false)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"drawTypeCoercion: false\n\n// Behavior:\n// - System uses exact draw type specified\n// - No automatic adjustments\n// - May result in invalid/awkward draws\n// - Tournament director has full control\n"})}),"\n",(0,s.jsx)(n.h3,{id:"when-coercion-is-enabled-true-or-object",children:"When Coercion is Enabled (true or object)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"drawTypeCoercion: true  // OR\ndrawTypeCoercion: { ROUND_ROBIN_WITH_PLAYOFF: 5 }\n\n// Behavior:\n// - System checks participant count\n// - Compares against minimums\n// - Automatically adjusts to simpler draw type if needed\n// - Ensures draw structure integrity\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"common-scenarios",children:"Common Scenarios"}),"\n",(0,s.jsx)(n.h3,{id:"scenario-1-small-draw-size",children:"Scenario 1: Small Draw Size"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"// Policy requires minimum 5 for RR+playoff\ndrawTypeCoercion: { ROUND_ROBIN_WITH_PLAYOFF: 5 }\n\n// Request: ROUND_ROBIN_WITH_PLAYOFF with 4 participants\ntournamentEngine.generateDrawDefinition({\n  drawType: 'ROUND_ROBIN_WITH_PLAYOFF',\n  drawSize: 4,\n  eventId: 'event-1'\n});\n\n// Result: Coerced to ROUND_ROBIN (simpler)\n// Reason: 4 < 5 minimum\n"})}),"\n",(0,s.jsx)(n.h3,{id:"scenario-2-exact-minimum",children:"Scenario 2: Exact Minimum"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"// Policy requires minimum 5\ndrawTypeCoercion: { ROUND_ROBIN_WITH_PLAYOFF: 5 }\n\n// Request: ROUND_ROBIN_WITH_PLAYOFF with 5 participants\ntournamentEngine.generateDrawDefinition({\n  drawType: 'ROUND_ROBIN_WITH_PLAYOFF',\n  drawSize: 5,\n  eventId: 'event-1'\n});\n\n// Result: ROUND_ROBIN_WITH_PLAYOFF as requested\n// Reason: 5 >= 5 minimum\n"})}),"\n",(0,s.jsx)(n.h3,{id:"scenario-3-coercion-disabled",children:"Scenario 3: Coercion Disabled"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"// No coercion\ndrawTypeCoercion: false\n\n// Request: ROUND_ROBIN_WITH_PLAYOFF with 2 participants\ntournamentEngine.generateDrawDefinition({\n  drawType: 'ROUND_ROBIN_WITH_PLAYOFF',\n  drawSize: 2,\n  eventId: 'event-1'\n});\n\n// Result: ROUND_ROBIN_WITH_PLAYOFF as requested (even though impractical)\n// Reason: Coercion disabled\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"event-specific-draw-policies",children:"Event-Specific Draw Policies"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"// Tournament-wide: Be strict\ntournamentEngine.attachPolicies({\n  policyDefinitions: {\n    [POLICY_TYPE_DRAWS]: {\n      drawTypeCoercion: {\n        ROUND_ROBIN_WITH_PLAYOFF: 8\n      }\n    }\n  }\n});\n\n// Consolation event: Be flexible\ntournamentEngine.attachPolicies({\n  policyDefinitions: {\n    [POLICY_TYPE_DRAWS]: {\n      drawTypeCoercion: {\n        ROUND_ROBIN_WITH_PLAYOFF: 4  // Smaller groups OK\n      }\n    }\n  },\n  eventId: 'consolation-event-id'\n});\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Default behavior"}),": Coercion enabled with system defaults"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"false disables all coercion"}),": Exact draw types used"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Object sets custom minimums"}),": Per draw type control"]}),"\n",(0,s.jsx)(n.li,{children:"Only specified draw types in object are affected"}),"\n",(0,s.jsx)(n.li,{children:"Draw types not in policy use system defaults"}),"\n",(0,s.jsx)(n.li,{children:"Coercion happens during draw generation"}),"\n",(0,s.jsx)(n.li,{children:"No error thrown - draw type silently adjusted"}),"\n",(0,s.jsx)(n.li,{children:"Tournament directors should be notified of coercion"}),"\n",(0,s.jsx)(n.li,{children:"Policy applies at generation time, not retroactively"}),"\n",(0,s.jsx)(n.li,{children:"Event-level policy overrides tournament policy"}),"\n",(0,s.jsx)(n.li,{children:"Useful for preventing inappropriate draw selections"}),"\n",(0,s.jsxs)(n.li,{children:["Testing/development often uses ",(0,s.jsx)(n.code,{children:"drawTypeCoercion: false"})]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"related-concepts",children:"Related Concepts"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/concepts/draw-types",children:"Draw Types"})," - Understanding draw structures"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/concepts/draw-types#pre-defined-draw-types",children:"Draw Types"})," - Round Robin and complex group structures"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"draw-type-constants",children:"Draw Type Constants"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"import {\n  SINGLE_ELIMINATION,\n  DOUBLE_ELIMINATION,\n  ROUND_ROBIN,\n  ROUND_ROBIN_WITH_PLAYOFF,\n  COMPASS,\n  FEED_IN,\n  MODIFIED_FEED_IN_CHAMPIONSHIP,\n  CURTIS_CONSOLATION\n} from 'tods-competition-factory';\n\n// Use constants in policy configuration\nconst policy = {\n  [POLICY_TYPE_DRAWS]: {\n    drawTypeCoercion: {\n      [ROUND_ROBIN_WITH_PLAYOFF]: 5,\n      [COMPASS]: 8\n    }\n  }\n};\n"})})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8322(e,n,i){i.d(n,{R:()=>l,x:()=>t});var r=i(758);const s={},o=r.createContext(s);function l(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);