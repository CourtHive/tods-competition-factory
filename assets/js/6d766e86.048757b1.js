"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[5767],{5195(e,n,t){t.r(n),t.d(n,{assets:()=>m,contentTitle:()=>l,default:()=>u,frontMatter:()=>d,metadata:()=>o,toc:()=>h});const o=JSON.parse('{"id":"codes/matchup-format","title":"matchUpFormat Codes","description":"Overview","source":"@site/docs/codes/matchup-format.mdx","sourceDirName":"codes","slug":"/codes/matchup-format","permalink":"/competition-factory/docs/codes/matchup-format","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"matchUpFormat Codes"},"sidebar":"docs","previous":{"title":"Age Category Codes","permalink":"/competition-factory/docs/codes/age-category"},"next":{"title":"Type Definitions","permalink":"/competition-factory/docs/types/typedefs"}}');var r=t(6070),i=t(8439),a=t(758),s=t(5802);function c(){const e=(0,a.useRef)(null),n=(0,a.useRef)(null),[o,i]=(0,a.useState)(null),[c,d]=(0,a.useState)(null);return(0,a.useEffect)(()=>{t.e(6745).then(t.bind(t,6745)).then(({getMatchUpFormatModal:t})=>{if(e.current){e.current.innerHTML="";const r=document.createElement("div");r.style.marginBottom="1em",r.style.color="#666",r.innerHTML="Configure matchUp format codes interactively. Choose the number of sets, scoring format, tiebreak rules, and final set variations. The editor will generate the TODS-compliant matchUpFormat code.";const a=document.createElement("button");a.className="button button--primary button--lg",a.textContent="\ud83c\udfbe Configure Match Format",a.style.marginBottom="1em",a.onclick=()=>{t({matchUpFormat:o?.matchUpFormat,callback:e=>{const t={matchUpFormat:e,timestamp:(new Date).toISOString()};if(i(t),d(null),n.current&&e){n.current.innerHTML="";const o=document.createElement("div");o.style.marginBottom="1em",o.style.padding="1em",o.style.backgroundColor="#f0f0f0",o.style.borderRadius="4px",o.innerHTML=`\n                    <strong style="font-size: 1.2em;">Match Format Code</strong><br/>\n                    <code style="font-size: 1.1em; background: #fff; padding: 0.5em; display: inline-block; margin-top: 0.5em; border-radius: 3px;">\n                      ${e}\n                    </code>\n                  `,n.current.appendChild(o),(0,s.N)(n.current,t,{expanded:2})}}})},e.current.appendChild(r),e.current.appendChild(a)}}).catch(e=>{console.error("Failed to load courthive-components:",e),d("Failed to load matchUp format editor")})},[o]),(0,r.jsxs)("div",{style:{marginBottom:"2em"},children:[(0,r.jsx)("div",{ref:e}),c&&(0,r.jsx)("div",{style:{color:"red",padding:"1em",backgroundColor:"#fee"},children:c}),(0,r.jsx)("div",{ref:n})]})}const d={title:"matchUpFormat Codes"},l=void 0,m={},h=[{value:"Overview",id:"overview",level:2},{value:"Interactive Format Editor",id:"interactive-format-editor",level:2},{value:"parse and stringify",id:"parse-and-stringify",level:2},{value:"matchUpFormat discovery",id:"matchupformat-discovery",level:2},{value:"parse and stringify",id:"parse-and-stringify-1",level:2},{value:"Note on NoAD in Tiebreak Formats (Non-Standard Extension)",id:"note-on-noad-in-tiebreak-formats-non-standard-extension",level:2},{value:"Standard TODS Behavior",id:"standard-tods-behavior",level:3},{value:"Non-Standard Extension: <code>NOAD</code> in Tiebreaks",id:"non-standard-extension-noad-in-tiebreaks",level:3},{value:"Implementation Note",id:"implementation-note",level:3}];function p(e){const n={admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(n.p,{children:["A ",(0,r.jsx)(n.strong,{children:"matchUpFormat"})," code describes the scoring method used for a specific ",(0,r.jsx)(n.strong,{children:"matchUp"}),", for all matchUps within a ",(0,r.jsx)(n.strong,{children:"structure"}),", for all matchUps within a ",(0,r.jsx)(n.strong,{children:"drawDefinition"}),", or for all matchUps within an ",(0,r.jsx)(n.strong,{children:"event"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"interactive-format-editor",children:"Interactive Format Editor"}),"\n",(0,r.jsx)(n.p,{children:"Configure matchUp formats interactively and generate TODS-compliant format codes:"}),"\n",(0,r.jsx)(c,{}),"\n",(0,r.jsx)(n.h2,{id:"parse-and-stringify",children:"parse and stringify"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"import { matchUpFormatCode } from 'tods-competition-factory';\n\nconst matchUpFormat = 'SET3-S:6/TB7';\n\n// validate matchUpFormat codes\nconst valid = matchUpFormatCode.isValidMatchUpFormat({ matchUpFormat });\n\n// parse matchUpFormat codes into an object representation\n// tiebreakFormat and tiebreakSet are mutually exclusive\nconst {\n  bestOf,\n  setFormat: {\n    setTo,\n    tiebreakAt,\n    tiebreakFormat: { tiebreakTo },\n    tiebreakSet: { tiebreakTo },\n  },\n  finalSetFormat: {\n    setTo,\n    tiebreakAt,\n    tiebreakFormat: { tiebreakTo },\n    tiebreakSet: { tiebreakTo },\n  },\n} = matchUpFormatCode.parse(matchUpFormat);\n\n// stringify object representation\nconst result = matchUpFormatCode.stringify({\n  bestOf: 1,\n  setFormat: { timed: true, minutes: 20 },\n});\n"})}),"\n",(0,r.jsx)(n.h2,{id:"matchupformat-discovery",children:"matchUpFormat discovery"}),"\n",(0,r.jsxs)(n.p,{children:["In TODS, a ",(0,r.jsx)(n.strong,{children:"drawDefinition"})," is a collection of ",(0,r.jsx)(n.strong,{children:"structures"}),". For example, a MAIN ",(0,r.jsx)(n.strong,{children:"structure"})," and a CONSOLATION ",(0,r.jsx)(n.strong,{children:"structure"})," are considered to be part of the same ",(0,r.jsx)(n.strong,{children:"drawDefinition"})," because they have a logical relationship whereby participants move from one ",(0,r.jsx)(n.strong,{children:"structure"})," to another."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:" tournament.events[].drawDefinitions[].structures[].matchUps[]\n"})}),"\n",(0,r.jsxs)(n.p,{children:["An application using the Competition Factory can request the ",(0,r.jsx)(n.strong,{children:"matchUpFormat"})," for a given ",(0,r.jsx)(n.strong,{children:"matchUp"})," and the factory ",(0,r.jsx)(n.strong,{children:"engine"})," will traverse the hierarchy from bottom up looking to see at what level a ",(0,r.jsx)(n.strong,{children:"matchUpFormat"})," has been defined. This method will also return any ",(0,r.jsx)(n.strong,{children:"matchUpFormat"})," codes encountered in the hierarchy within which a ",(0,r.jsx)(n.strong,{children:"matchUp"})," is found:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const { matchUpFormat } = engine.getMatchUpFormat({\n  matchUpId,\n  drawId,\n});\n"})}),"\n",(0,r.jsxs)(n.p,{children:["To set the ",(0,r.jsx)(n.strong,{children:"matchUpFormat"})," at each level:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"engine.setMatchUpFormat({\n  matchUpFormat,\n  structureId, // optional\n  eventId, // optional\n  drawId, // optional\n});\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.strong,{children:"matchUpFormat"})," for a ",(0,r.jsx)(n.strong,{children:"matchUp"})," is set at the time of score entry:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"engine.setMatchUpStatus({\n  matchUpFormat,\n  matchUpId,\n  outcome,\n  drawId,\n});\n"})}),"\n",(0,r.jsx)(n.h2,{id:"parse-and-stringify-1",children:"parse and stringify"}),"\n",(0,r.jsxs)(n.p,{children:["The Competition Factory utilizes ",(0,r.jsx)(n.code,{children:"matchUpFormatCode"})," functions primarily for validation, but also in the calculation of Round Robin results when determining group finishing positions."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"import { matchUpFormatCode } from 'tods-competition-factory';\n\nconst matchUpFormat = 'SET3-S:6/TB7';\n\n// validate matchUpFormat codes\nconst valid = matchUpFormatCode.isValidMatchUpFormat(matchUpFormat);\n\n// parse matchUpFormat codes into an object representation\nconst {\n  bestOf,\n  setFormat: {\n    setTo,\n    tiebreakAt,\n    tiebreakFormat: { tiebreakTo },\n  },\n  finalSetFormat: {\n    setTo,\n    tiebreakAt,\n    tiebreakFormat: { tiebreakTo },\n  },\n} = matchUpFormatCode.parse(matchUpFormat);\n\n// stringify object representation\nconst result = matchUpFormatCode.stringify({\n  bestOf: 1,\n  setFormat: { timed: true, minutes: 20 },\n});\n"})}),"\n",(0,r.jsx)(n.h2,{id:"note-on-noad-in-tiebreak-formats-non-standard-extension",children:"Note on NoAD in Tiebreak Formats (Non-Standard Extension)"}),"\n",(0,r.jsx)(n.admonition,{title:"Non-Standard Extension",type:"caution",children:(0,r.jsxs)(n.p,{children:["The use of ",(0,r.jsx)(n.code,{children:"NOAD"})," applied to tiebreak formats (e.g., ",(0,r.jsx)(n.code,{children:"TB10NOAD"}),") is a ",(0,r.jsx)(n.strong,{children:"non-standard extension"})," for recreational tennis use and is ",(0,r.jsx)(n.strong,{children:"not part of the official ITF Tennis Open Data Standards (TODS) specification"}),"."]})}),"\n",(0,r.jsx)(n.h3,{id:"standard-tods-behavior",children:"Standard TODS Behavior"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"NOAD"})," is officially documented only for game-level scoring (e.g., ",(0,r.jsx)(n.code,{children:"SET3-S:6NOAD"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:["All standard tennis tiebreak formats require win-by-2:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"7-point tiebreak: first to 7, win by 2 \u2192 valid scores: 7-5, 8-6, 9-7, etc."}),"\n",(0,r.jsx)(n.li,{children:"10-point match tiebreak: first to 10, win by 2 \u2192 valid scores: 10-8, 11-9, 12-10, etc."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"non-standard-extension-noad-in-tiebreaks",children:["Non-Standard Extension: ",(0,r.jsx)(n.code,{children:"NOAD"})," in Tiebreaks"]}),"\n",(0,r.jsxs)(n.p,{children:["When ",(0,r.jsx)(n.code,{children:"NOAD"})," is applied to a tiebreak format (e.g., ",(0,r.jsx)(n.code,{children:"SET3-S:6/TB7@5-F:TB10NOAD"}),"):"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Behavior"}),": Changes ",(0,r.jsx)(n.code,{children:"winBy"})," from 2 to 1 (first to reach ",(0,r.jsx)(n.code,{children:"tiebreakTo"})," wins immediately)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Example"}),": ",(0,r.jsx)(n.code,{children:"TB10NOAD"})," allows scores like [10-9], [10-8] (winner needs exactly 10 points)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use case"}),": Recreational leagues and club play for time management"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Not recognized by"}),": ITF, ATP, WTA, USTA official formats"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"implementation-note",children:"Implementation Note"}),"\n",(0,r.jsxs)(n.p,{children:["This implementation supports ",(0,r.jsx)(n.code,{children:"tiebreakSet.NoAD"})," to enable recreational formats, but developers should be aware this is an extension beyond the TODS specification. When interoperating with other TODS-compliant systems, tiebreak ",(0,r.jsx)(n.code,{children:"NOAD"})," notation may not be recognized or may be interpreted differently."]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},5802(e,n,t){t.d(n,{N:()=>r});class o{constructor(e,n,t={}){this.container=e,this.options={expanded:t.expanded??1,theme:t.theme??"light"},this.render(n)}render(e){this.container.innerHTML="",this.container.style.fontFamily='Monaco, Menlo, "Ubuntu Mono", monospace',this.container.style.fontSize="13px",this.container.style.lineHeight="1.5",this.injectStyles();const n=this.createNode(e,0,"");this.container.appendChild(n)}injectStyles(){const e="json-viewer-styles";if(document.getElementById(e))return;const n=document.createElement("style");n.id=e,n.textContent="\n      .json-viewer-container {\n        background: #f8f8f8;\n        padding: 12px;\n        border-radius: 4px;\n        overflow: auto;\n        max-height: 600px;\n      }\n      \n      .json-viewer-line {\n        display: flex;\n        align-items: flex-start;\n        margin: 2px 0;\n      }\n      \n      .json-viewer-toggle {\n        cursor: pointer;\n        user-select: none;\n        width: 16px;\n        flex-shrink: 0;\n        color: #666;\n        font-weight: bold;\n      }\n      \n      .json-viewer-toggle:hover {\n        color: #1976d2;\n      }\n      \n      .json-viewer-key {\n        color: #881391;\n        font-weight: 500;\n        margin-right: 6px;\n      }\n      \n      .json-viewer-string {\n        color: #c41a16;\n      }\n      \n      .json-viewer-number {\n        color: #1c00cf;\n      }\n      \n      .json-viewer-boolean {\n        color: #0d22aa;\n        font-weight: bold;\n      }\n      \n      .json-viewer-null {\n        color: #808080;\n        font-style: italic;\n      }\n      \n      .json-viewer-bracket {\n        color: #000;\n        font-weight: bold;\n      }\n      \n      .json-viewer-children {\n        margin-left: 20px;\n        border-left: 1px solid #ddd;\n        padding-left: 8px;\n      }\n      \n      .json-viewer-collapsed {\n        display: none;\n      }\n      \n      .json-viewer-summary {\n        color: #999;\n        font-style: italic;\n        margin-left: 6px;\n      }\n      \n      .json-viewer-comma {\n        color: #000;\n      }\n    ",document.head.appendChild(n)}createNode(e,n,t,o=!0){const r=document.createElement("div");return null===e?r.appendChild(this.createLine(t,this.span("null","json-viewer-null"),o)):"string"==typeof e?r.appendChild(this.createLine(t,this.span(`"${e}"`,"json-viewer-string"),o)):"number"==typeof e?r.appendChild(this.createLine(t,this.span(String(e),"json-viewer-number"),o)):"boolean"==typeof e?r.appendChild(this.createLine(t,this.span(String(e),"json-viewer-boolean"),o)):Array.isArray(e)?r.appendChild(this.createComplexNode(e,n,t,!0,o)):"object"==typeof e&&r.appendChild(this.createComplexNode(e,n,t,!1,o)),r}createLine(e,n,t){const o=document.createElement("div");o.className="json-viewer-line";const r=document.createElement("span");if(r.className="json-viewer-toggle",r.textContent=" ",o.appendChild(r),e){const n=this.span(`${e}: `,"json-viewer-key");o.appendChild(n)}return o.appendChild(n),t||o.appendChild(this.span(",","json-viewer-comma")),o}createComplexNode(e,n,t,o,r){const i=document.createElement("div"),a=document.createElement("div");a.className="json-viewer-line";const s=document.createElement("span");s.className="json-viewer-toggle";const c=n<this.options.expanded;if(s.textContent=c?"\u25bc":"\u25b6",a.appendChild(s),t){const e=this.span(`${t}: `,"json-viewer-key");a.appendChild(e)}const d=o?"[":"{";a.appendChild(this.span(d,"json-viewer-bracket"));const l=document.createElement("span");if(l.className="json-viewer-summary",o)l.textContent=` ${e.length} items `;else{const n=Object.keys(e);l.textContent=` ${n.length} keys `}c||a.appendChild(l);const m=document.createElement("span");if(m.className="json-viewer-bracket",m.textContent=o?"]":"}",c||a.appendChild(m),!r){const e=this.span(",","json-viewer-comma");c||a.appendChild(e)}i.appendChild(a);const h=document.createElement("div");h.className="json-viewer-children",c||h.classList.add("json-viewer-collapsed");const p=o?e.map((e,n)=>[n,e]):Object.entries(e);p.forEach(([e,t],r)=>{const i=o?"":String(e),a=r===p.length-1;h.appendChild(this.createNode(t,n+1,i,a))}),i.appendChild(h);const u=document.createElement("div");u.className="json-viewer-line",c||u.classList.add("json-viewer-collapsed");const f=document.createElement("span");return f.className="json-viewer-toggle",f.textContent=" ",u.appendChild(f),u.appendChild(this.span(o?"]":"}","json-viewer-bracket")),r||u.appendChild(this.span(",","json-viewer-comma")),i.appendChild(u),s.addEventListener("click",()=>{const e="\u25bc"===s.textContent;if(s.textContent=e?"\u25b6":"\u25bc",e)h.classList.add("json-viewer-collapsed"),u.classList.add("json-viewer-collapsed"),a.appendChild(l),a.appendChild(m),r||a.appendChild(this.span(",","json-viewer-comma"));else{h.classList.remove("json-viewer-collapsed"),u.classList.remove("json-viewer-collapsed"),l.parentNode&&l.remove(),m.parentNode&&m.remove();const e=a.querySelector(".json-viewer-comma");e&&e.remove()}}),i}span(e,n){const t=document.createElement("span");return t.className=n,t.textContent=e,t}update(e){this.render(e)}}function r(e,n,t){return e.className="json-viewer-container",new o(e,n,t)}},8439(e,n,t){t.d(n,{R:()=>a,x:()=>s});var o=t(758);const r={},i=o.createContext(r);function a(e){const n=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);