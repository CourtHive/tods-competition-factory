"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[3895],{1346(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>l,metadata:()=>s,toc:()=>u});const s=JSON.parse('{"id":"concepts/draws-overview","title":"Draw Generation","description":"Visual Example","source":"@site/docs/concepts/draws-overview.mdx","sourceDirName":"concepts","slug":"/concepts/draws-overview","permalink":"/competition-factory/docs/concepts/draws-overview","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Draw Generation"},"sidebar":"docs","previous":{"title":"Flights","permalink":"/competition-factory/docs/concepts/events/flights"},"next":{"title":"Draw Types","permalink":"/competition-factory/docs/concepts/draw-types"}}');var r=i(6070),t=i(8439),a=i(7898),d=i(2497);const l={title:"Draw Generation"},o=void 0,c={},u=[{value:"Visual Example",id:"visual-example",level:2},{value:"Generating Draw Definitions",id:"generating-draw-definitions",level:2},{value:"Basic Usage",id:"basic-usage",level:3},{value:"Key Parameters",id:"key-parameters",level:3},{value:"Examples",id:"examples",level:3},{value:"Simple Elimination Draw",id:"simple-elimination-draw",level:4},{value:"Round Robin with Playoffs",id:"round-robin-with-playoffs",level:4},{value:"Draw with Qualifying",id:"draw-with-qualifying",level:4},{value:"Compass Draw",id:"compass-draw",level:4},{value:"Manual Placement (Seeds Only)",id:"manual-placement-seeds-only",level:4},{value:"Seeding Profiles",id:"seeding-profiles",level:3},{value:"Return Value",id:"return-value",level:3},{value:"Next Steps",id:"next-steps",level:3},{value:"Related Documentation",id:"related-documentation",level:2}];function h(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"visual-example",children:"Visual Example"}),"\n",(0,r.jsxs)(n.p,{children:["Themed visualization of draws by ",(0,r.jsx)(n.a,{href:"https://github.com/CourtHive/courthive-components",children:"courthive-components"}),"."]}),"\n",(0,r.jsx)(a.A,{children:()=>(0,r.jsx)(d.A,{drawType:"COMPASS",drawSize:8})}),"\n",(0,r.jsx)(n.h2,{id:"generating-draw-definitions",children:"Generating Draw Definitions"}),"\n",(0,r.jsxs)(n.p,{children:["The Competition Factory provides ",(0,r.jsx)(n.code,{children:"generateDrawDefinition()"})," as the primary convenience method for creating draw structures. This powerful function handles most common use cases for draw generation and can create draws of arbitrary complexity."]}),"\n",(0,r.jsx)(n.h3,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"import { tournamentEngine } from 'tods-competition-factory';\n\nconst { drawDefinition } = tournamentEngine.generateDrawDefinition({\n  eventId: 'event-123',\n  drawSize: 32,\n  drawType: 'SINGLE_ELIMINATION',\n  drawEntries: eventEntries,\n  automated: true, // Automatically place participants\n});\n"})}),"\n",(0,r.jsx)(n.h3,{id:"key-parameters",children:"Key Parameters"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Essential Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"drawSize"})," - Number of draw positions in the first structure (e.g., 16, 32, 64)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"drawEntries"})," - Array of participant entries (equal to or subset of event.entries)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"drawType"})," - Type of draw structure (see ",(0,r.jsx)(n.a,{href:"./draw-types",children:"Draw Types"})," for full list)"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Participant Placement:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"automated"})," - Boolean or object controlling automatic placement:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"true"})," - Place all participants automatically"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"false"})," - Manual placement required"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"{ seedsOnly: true }"})," - Only place seeded participants and adjacent byes"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"seededParticipants"})," - Array of ",(0,r.jsx)(n.code,{children:"{ participantId, seedNumber, seedValue }"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"seedsCount"})," - Number of seeds to generate if seededParticipants not provided"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"seedingProfile"})," - Positioning strategy (WATERFALL, CLUSTER, SEPARATE)"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Match Configuration:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"matchUpType"})," - SINGLES, DOUBLES, or TEAM"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"matchUpFormat"})," - Default TODS matchUpFormat code for all matchUps"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tieFormat"})," - For TEAM events: ",(0,r.jsx)(n.code,{children:"{ collectionDefinitions, winCriteria }"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Qualifying Integration:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"qualifiersCount"})," - Number of positions reserved for qualifiers"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"qualifyingProfiles"})," - Array defining complete qualifying structures"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"qualifyingOnly"})," - Boolean - only include QUALIFYING stage entries"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"qualifyingPlaceholder"})," - Generate placeholder qualifying structure"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Advanced Options:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"structureOptions"})," - For ROUND_ROBIN: ",(0,r.jsx)(n.code,{children:"{ groupSize, playoffGroups }"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"playoffAttributes"})," - Custom playoff structure naming and configuration"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"voluntaryConsolation"})," - Add voluntary consolation structure"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"staggeredEntry"})," - Enable non-base-2 draw sizes with feed-in positions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"policyDefinitions"})," - Seeding and avoidance policies"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(n.h4,{id:"simple-elimination-draw",children:"Simple Elimination Draw"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const { drawDefinition } = tournamentEngine.generateDrawDefinition({\n  eventId: 'singles-open',\n  drawSize: 16,\n  drawType: 'SINGLE_ELIMINATION',\n  drawEntries: acceptedEntries,\n  seedsCount: 4,\n  automated: true,\n});\n"})}),"\n",(0,r.jsx)(n.h4,{id:"round-robin-with-playoffs",children:"Round Robin with Playoffs"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const { drawDefinition } = tournamentEngine.generateDrawDefinition({\n  eventId: 'doubles-u18',\n  drawSize: 16,\n  drawType: 'ROUND_ROBIN_WITH_PLAYOFF',\n  drawEntries: acceptedEntries,\n  structureOptions: {\n    groupSize: 4,\n    playoffGroups: [\n      { finishingPositions: [1], structureName: 'Gold Flight', drawType: 'SINGLE_ELIMINATION' },\n      { finishingPositions: [2], structureName: 'Silver Flight', drawType: 'SINGLE_ELIMINATION' },\n    ],\n  },\n  automated: true,\n});\n"})}),"\n",(0,r.jsx)(n.h4,{id:"draw-with-qualifying",children:"Draw with Qualifying"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const { drawDefinition } = tournamentEngine.generateDrawDefinition({\n  eventId: 'singles-championship',\n  drawSize: 32,\n  drawType: 'SINGLE_ELIMINATION',\n  drawEntries: allEntries,\n  qualifiersCount: 4,\n  qualifyingProfiles: [\n    {\n      roundTarget: 1, // Qualifiers feed into Round 1 of main draw\n      structureProfiles: [\n        {\n          drawSize: 16,\n          seedsCount: 2,\n          qualifyingPositions: 4, // Top 4 advance to main draw\n        },\n      ],\n    },\n  ],\n  seedsCount: 8,\n  automated: true,\n});\n"})}),"\n",(0,r.jsx)(n.h4,{id:"compass-draw",children:"Compass Draw"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const { drawDefinition } = tournamentEngine.generateDrawDefinition({\n  eventId: 'singles-compass',\n  drawSize: 8,\n  drawType: 'COMPASS',\n  drawEntries: acceptedEntries,\n  automated: true,\n});\n"})}),"\n",(0,r.jsx)(n.h4,{id:"manual-placement-seeds-only",children:"Manual Placement (Seeds Only)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const { drawDefinition } = tournamentEngine.generateDrawDefinition({\n  eventId: 'singles-main',\n  drawSize: 32,\n  drawType: 'SINGLE_ELIMINATION',\n  drawEntries: acceptedEntries,\n  seededParticipants: [\n    { participantId: 'player-1', seedNumber: 1, seedValue: '1' },\n    { participantId: 'player-2', seedNumber: 2, seedValue: '2' },\n    { participantId: 'player-3', seedNumber: 3, seedValue: '3-4' },\n    { participantId: 'player-4', seedNumber: 4, seedValue: '3-4' },\n  ],\n  automated: { seedsOnly: true }, // Only place seeds and adjacent byes\n});\n// Remaining participants can be placed manually or via custom logic\n"})}),"\n",(0,r.jsx)(n.h3,{id:"seeding-profiles",children:"Seeding Profiles"}),"\n",(0,r.jsx)(n.p,{children:"Control how seeded participants are positioned:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"WATERFALL"})," (for Round Robin):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"seedingProfile: {\n  positioning: 'WATERFALL';\n}\n// Seeds distributed sequentially across groups: Group 1 gets seed 1, Group 2 gets seed 2, etc.\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"ADJACENT"})," (for elimination):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"seedingProfile: {\n  positioning: 'ADJACENT';\n}\n// Seeds positioned closely together in the draw\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"SEPARATE"})," (for elimination):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"seedingProfile: {\n  positioning: 'SEPARATE';\n}\n// Seeds maximally separated using standard seeding algorithm\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Group Seeding Threshold"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"seedingProfile: {\n  positioning: 'SEPARATE',\n  groupSeedingThreshold: 5  // Seeds 5+ assigned lowest value within their groups\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"return-value",children:"Return Value"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"generateDrawDefinition()"})," returns:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"{\n  drawDefinition: {\n    drawId: 'uuid',\n    drawType: 'SINGLE_ELIMINATION',\n    drawSize: 32,\n    structures: [...],  // Array of structure definitions\n    links: [...],       // Participant flow between structures\n    entries: [...]      // Draw entries with position assignments\n  },\n  success: true\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsx)(n.p,{children:"After generating a draw definition:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Add to Event"}),": Use ",(0,r.jsx)(n.code,{children:"addDrawDefinition()"})," to attach to tournament event"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Modify Structure"}),": Use position actions to adjust participant placement"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Configure Scheduling"}),": Set up venues, courts, and scheduling profiles"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Publish"}),": Use ",(0,r.jsx)(n.code,{children:"publishEvent()"})," to make draw visible"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"./draw-types",children:"Draw Types"})})," - Complete list of supported draw types and structures"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"./actions",children:"Actions"})})," - Valid position and matchUp actions for draw management"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/governors/generation-governor#generatedrawdefinition",children:"Generation Governor"})})," - Complete API reference"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/policies/seedingPolicy",children:"Seeding Policy"})})," - Configuring seeding patterns"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/policies/avoidance",children:"Avoidance Policy"})})," - Preventing same-club/nation matchups"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},2497(e,n,i){i.d(n,{A:()=>a});var s=i(1437),r=i(758),t=i(6070);const a=({drawType:e,drawSize:n=8})=>{const[a,d]=(0,r.useState)(null);if((0,r.useEffect)(()=>{i.e(6745).then(i.bind(i,6745)).then(e=>{d(e)})},[]),!a)return(0,t.jsx)("div",{children:"Loading..."});const{compositions:l,renderStructure:o}=a,c={seedsCount:4,drawType:e,drawSize:n};"AD_HOC"===e&&Object.assign(c,{automated:!0,roundsCount:3});const u=s.gm.generateTournamentRecord({drawProfiles:[c],completeAllMatchUps:!0,randomWinningSide:!0}),{tournamentRecord:h,eventIds:p}=u||{},j=p?.[0],{eventData:x}=s.o3.setState(h).getEventData({participantsProfile:{withIOC:!0,withISO2:!0},eventId:j})||{},g=x?.drawsData?.[0]?.structures||[],m=g[0]?.structureId,f=g?.find(e=>e.structureId===m),w=f?.roundMatchUps,v=w?Object.values(w)?.flat():[],y=o({composition:l[s.Yl.randomMember(["Australian","Wimbledon","National","US Open","French","ITF"])],matchUps:v});return(0,t.jsx)("div",{style:{zoom:.9},children:(0,t.jsx)("div",{ref:e=>{for(;e?.firstChild;)e.removeChild(e.firstChild);e&&e.appendChild(y)}})})}},7898(e,n,i){i.d(n,{A:()=>t});i(758);var s=i(3675),r=i(6070);function t({children:e,fallback:n}){return(0,s.A)()?(0,r.jsx)(r.Fragment,{children:e?.()}):n??null}}}]);